============================= test session starts ==============================
platform linux -- Python 3.11.12, pytest-8.3.5, pluggy-1.5.0 -- /usr/bin/python3
cachedir: .pytest_cache
rootdir: /content/drive/MyDrive/new
configfile: pytest.ini
plugins: cov-6.1.1, mock-3.14.0, xdist-3.6.1, langsmith-0.3.42, anyio-4.9.0, typeguard-4.4.2
collecting ... 
----------------------------- live log collection ------------------------------
09:24:15 [INFO] [numexpr.utils] NumExpr defaulting to 2 threads.
collected 185 items

test_gold_ai.py::TestGoldAIPart1SetupAndEnv::test_environment_is_colab_drive_mount_succeeds 
-------------------------------- live log call ---------------------------------
09:24:15 [DEBUG] [matplotlib] matplotlib data path: /usr/local/lib/python3.11/dist-packages/matplotlib/mpl-data
09:24:15 [DEBUG] [matplotlib] CONFIGDIR=/root/.config/matplotlib
09:24:15 [DEBUG] [matplotlib] interactive is False
09:24:15 [DEBUG] [matplotlib] platform is linux
09:24:16 [INFO] [gold_ai2025.Part2_DeprecatedParams] Part 2: Core Parameters & Strategy Settings (DEPRECATED - Parameters now in StrategyConfig from YAML).
09:24:16 [WARNING] [gold_ai2025.Part2_DeprecatedParams] Part 2: Is DEPRECATED. All tunable strategy parameters should be managed by StrategyConfig.
09:24:16 [INFO] [gold_ai2025.Part2_DeprecatedParams] Any true constants (e.g., for feature engineering) will be defined in their relevant sections or Part 1.
09:24:16 [INFO] [gold_ai2025.MLHelpers] Loading Machine Learning Configuration & Helpers (v4.9.13 - Refined Model Switcher)...
09:24:16 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_CLASSIFIER (L1 Filter): True
09:24:16 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_META_CLASSIFIER (L2 Filter): False
09:24:16 [INFO] [gold_ai2025.MLHelpers]   Initial Optuna Hyperparameter Tuning Enabled: False
09:24:16 [INFO] [gold_ai2025.MLHelpers]   Initial Auto Threshold Tuning Enabled: False
09:24:16 [INFO] [gold_ai2025.MT5Connector] Loading Part 12: MT5 Connector (Placeholder)...
09:24:16 [INFO] [gold_ai2025.MT5Connector] Part 12: MT5 Connector (Placeholder) Loaded.
09:24:16 [DEBUG] [gold_ai2025.Part14_FutureAdditions] Part 14: Placeholder for Future Additions reached.
09:24:16 [INFO] [gold_ai2025.Part15_EndOfScript] Reached End of Part 15 (Definitive End of Script Marker). Gold AI script processing complete.
PASSED                                                                   [  0%]
test_gold_ai.py::TestGoldAI2025::test_all_module_functions_present 
-------------------------------- live log setup --------------------------------
09:24:16 [INFO] [gold_ai2025.Part2_DeprecatedParams] Part 2: Core Parameters & Strategy Settings (DEPRECATED - Parameters now in StrategyConfig from YAML).
09:24:16 [WARNING] [gold_ai2025.Part2_DeprecatedParams] Part 2: Is DEPRECATED. All tunable strategy parameters should be managed by StrategyConfig.
09:24:16 [INFO] [gold_ai2025.Part2_DeprecatedParams] Any true constants (e.g., for feature engineering) will be defined in their relevant sections or Part 1.
09:24:16 [INFO] [gold_ai2025.MLHelpers] Loading Machine Learning Configuration & Helpers (v4.9.13 - Refined Model Switcher)...
09:24:16 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_CLASSIFIER (L1 Filter): True
09:24:16 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_META_CLASSIFIER (L2 Filter): False
09:24:16 [INFO] [gold_ai2025.MLHelpers]   Initial Optuna Hyperparameter Tuning Enabled: False
09:24:16 [INFO] [gold_ai2025.MLHelpers]   Initial Auto Threshold Tuning Enabled: False
09:24:16 [INFO] [gold_ai2025.MT5Connector] Loading Part 12: MT5 Connector (Placeholder)...
09:24:16 [INFO] [gold_ai2025.MT5Connector] Part 12: MT5 Connector (Placeholder) Loaded.
09:24:16 [DEBUG] [gold_ai2025.Part14_FutureAdditions] Part 14: Placeholder for Future Additions reached.
09:24:16 [INFO] [gold_ai2025.Part15_EndOfScript] Reached End of Part 15 (Definitive End of Script Marker). Gold AI script processing complete.
PASSED                                                                   [  1%]
test_gold_ai.py::TestGoldAI2025::test_check_kill_switch_logic 
-------------------------------- live log call ---------------------------------
09:24:16 [DEBUG] [gold_ai2025.StrategyConfig] Initializing StrategyConfig with dict: {}
09:24:16 [INFO] [gold_ai2025.StrategyConfig] StrategyConfig initialized. Risk/Trade: 0.010, Max Hold: 24 bars, Kill DD: 20.00%
09:24:16 [DEBUG] [gold_ai2025.StrategyConfig]   Feature Eng Params: M15 EMA Fast=50, M1 Rolling Z Window=300
09:24:16 [DEBUG] [gold_ai2025.StrategyConfig]   Default Signal Thresh: GainZ=0.3, RSI Buy=50
09:24:16 [DEBUG] [gold_ai2025.StrategyConfig]   Dynamic TP2 Params: HighVolBoost=1.2, LotBoostMult=1.1
09:24:16 [DEBUG] [test_kill._check_kill_switch] Checking Kill Switch at 2021-01-01 00:00:00: Equity=80.00, Peak=100.00, DDThresh=10.00%, ConsLossThresh=5, CurrentConsLoss=0, ActiveStatus=False
09:24:16 [CRITICAL] [test_kill._check_kill_switch] [KILL SWITCH - DD] Triggered at 2021-01-01 00:00:00. DD=20.00% >= Threshold=10.00%. Equity=80.00, Peak=100.00
09:24:16 [INFO] [test_kill._check_kill_switch] Kill Switch newly activated at 2021-01-01 00:00:00 (DD: True, ConsLoss: False).
09:24:16 [DEBUG] [test_kill._check_kill_switch] Kill Switch check result: TriggeredNow=True, NewActiveStatus=True
09:24:16 [DEBUG] [test_kill._check_kill_switch] Checking Kill Switch at 2021-01-01 00:00:00: Equity=100.00, Peak=100.00, DDThresh=50.00%, ConsLossThresh=3, CurrentConsLoss=4, ActiveStatus=False
09:24:16 [CRITICAL] [test_kill._check_kill_switch] [KILL SWITCH - CONSECUTIVE LOSS] Triggered at 2021-01-01 00:00:00. Losses=4 >= Threshold=3.
09:24:16 [INFO] [test_kill._check_kill_switch] Kill Switch newly activated at 2021-01-01 00:00:00 (DD: False, ConsLoss: True).
09:24:16 [DEBUG] [test_kill._check_kill_switch] Kill Switch check result: TriggeredNow=True, NewActiveStatus=True
09:24:16 [DEBUG] [test_kill._check_kill_switch] Checking Kill Switch at 2021-01-01 00:00:00: Equity=90.00, Peak=100.00, DDThresh=50.00%, ConsLossThresh=5, CurrentConsLoss=1, ActiveStatus=False
09:24:16 [DEBUG] [test_kill._check_kill_switch] Kill Switch check result: TriggeredNow=False, NewActiveStatus=False
PASSED                                                                   [  1%]
test_gold_ai.py::TestGoldAI2025::test_check_margin_call 
-------------------------------- live log call ---------------------------------
09:24:16 [CRITICAL] [gold_ai2025.check_margin_call] [MARGIN CALL] Current equity (-1.00) is at or below margin call level (0.00).
09:24:16 [CRITICAL] [gold_ai2025.check_margin_call] [MARGIN CALL] Current equity (5.00) is at or below margin call level (5.00).
PASSED                                                                   [  2%]
test_gold_ai.py::TestGoldAI2025::test_forced_entry_audit_in_trade_log PASSED [  2%]
test_gold_ai.py::TestGoldAI2025::test_library_already_imported 
-------------------------------- live log call ---------------------------------
09:24:16 [INFO] [gold_ai2025.log_library_version] (Info) Using BAZ version: 1.0
PASSED                                                                   [  3%]
test_gold_ai.py::TestGoldAI2025::test_library_import_fails_install_succeeds 
-------------------------------- live log call ---------------------------------
09:24:16 [WARNING] [gold_ai2025.try_import_with_install] ไม่พบ Library: BAR. กำลังพยายามติดตั้ง...
09:24:16 [INFO] [gold_ai2025.try_import_with_install]    ติดตั้ง BAR สำเร็จ (pip stdout): <MagicMock name='run().stdout.__getitem__()' id='140237139469456'>...
09:24:16 [INFO] [gold_ai2025.try_import_with_install] [Patch] Successfully installed and imported BAR version: 0.2
PASSED                                                                   [  3%]
test_gold_ai.py::TestGoldAI2025::test_load_app_config_not_found 
-------------------------------- live log call ---------------------------------
09:24:16 [WARNING] [gold_ai2025.load_app_config] Function 'load_app_config' is DEPRECATED. Use 'load_config_from_yaml' with StrategyConfig instead.
09:24:16 [ERROR] [gold_ai2025.load_app_config]    (Config Error) Configuration file 'nofile.json' not found. Using default script values.
PASSED                                                                   [  4%]
test_gold_ai.py::TestGoldAI2025::test_load_app_config_success 
-------------------------------- live log call ---------------------------------
09:24:16 [WARNING] [gold_ai2025.load_app_config] Function 'load_app_config' is DEPRECATED. Use 'load_config_from_yaml' with StrategyConfig instead.
09:24:16 [INFO] [gold_ai2025.load_app_config]    (Config) Successfully loaded configuration from: /content/drive/MyDrive/new/cfg.json
PASSED                                                                   [  4%]
test_gold_ai.py::TestGoldAI2025::test_load_config_from_yaml 
-------------------------------- live log call ---------------------------------
09:24:16 [INFO] [gold_ai2025.load_config_from_yaml] Successfully loaded configuration from: dummy.yaml
09:24:16 [DEBUG] [gold_ai2025.StrategyConfig] Initializing StrategyConfig with dict: {'risk_per_trade': 0.02, 'max_lot': 2.0}
09:24:16 [INFO] [gold_ai2025.StrategyConfig] StrategyConfig initialized. Risk/Trade: 0.020, Max Hold: 24 bars, Kill DD: 20.00%
09:24:16 [DEBUG] [gold_ai2025.StrategyConfig]   Feature Eng Params: M15 EMA Fast=50, M1 Rolling Z Window=300
09:24:16 [DEBUG] [gold_ai2025.StrategyConfig]   Default Signal Thresh: GainZ=0.3, RSI Buy=50
09:24:16 [DEBUG] [gold_ai2025.StrategyConfig]   Dynamic TP2 Params: HighVolBoost=1.2, LotBoostMult=1.1
PASSED                                                                   [  5%]
test_gold_ai.py::TestGoldAI2025::test_load_data_and_plotting 
-------------------------------- live log call ---------------------------------
09:24:16 [DEBUG] [gold_ai2025.StrategyConfig] Initializing StrategyConfig with dict: {}
09:24:16 [INFO] [gold_ai2025.StrategyConfig] StrategyConfig initialized. Risk/Trade: 0.010, Max Hold: 24 bars, Kill DD: 20.00%
09:24:16 [DEBUG] [gold_ai2025.StrategyConfig]   Feature Eng Params: M15 EMA Fast=50, M1 Rolling Z Window=300
09:24:16 [DEBUG] [gold_ai2025.StrategyConfig]   Default Signal Thresh: GainZ=0.3, RSI Buy=50
09:24:16 [DEBUG] [gold_ai2025.StrategyConfig]   Dynamic TP2 Params: HighVolBoost=1.2, LotBoostMult=1.1
09:24:16 [INFO] [gold_ai2025.load_data] (Loading) กำลังโหลดข้อมูล  จาก: /content/drive/MyDrive/new/testdata.csv
09:24:16 [INFO] [gold_ai2025.load_data]    ไฟล์ข้อมูล: /content/drive/MyDrive/new/testdata.csv
09:24:16 [DEBUG] [gold_ai2025.load_data]    Converting price columns ['Open', 'High', 'Low', 'Close'] to numeric (if not already specified in dtypes)...
09:24:16 [DEBUG] [gold_ai2025.load_data]    [Data Quality] Checking for invalid prices (<= 0)...
09:24:16 [DEBUG] [gold_ai2025.load_data]    [Data Quality] Checking High >= Low consistency...
09:24:16 [INFO] [gold_ai2025.load_data]    [Data Quality] ตรวจสอบ % NaN ในคอลัมน์ราคา...
09:24:16 [INFO] [gold_ai2025.load_data]       NaN Percentage:
Open     0.0
High     0.0
Low      0.0
Close    0.0
dtype: float64
09:24:16 [INFO] [gold_ai2025.load_data]    [Data Quality] ตรวจสอบ Duplicates (Date & Timestamp)...
09:24:16 [DEBUG] [gold_ai2025.load_data]       ไม่พบ Duplicates (Date & Timestamp).
09:24:16 [INFO] [gold_ai2025.load_data]    [Data Quality] ตรวจสอบ Price Jumps (Threshold > 10.0%)...
09:24:16 [DEBUG] [gold_ai2025.load_data]       ข้ามการตรวจสอบ Price Jumps (ไม่มีข้อมูล Close หรือมีน้อยกว่า 2 แถว).
09:24:16 [INFO] [gold_ai2025.load_data] (Success) โหลดและตรวจสอบข้อมูล  สำเร็จ: 1 แถว
09:24:16 [INFO] [gold_ai2025.plot_equity_curve.demo] 
--- (Plotting) Plotting Equity Curve: Unit Test ---
PASSED                                                                   [  5%]
test_gold_ai.py::TestGoldAI2025::test_log_library_version_info PASSED    [  6%]
test_gold_ai.py::TestGoldAI2025::test_log_library_version_none PASSED    [  7%]
test_gold_ai.py::TestGoldAI2025::test_minimal_test_function PASSED       [  7%]
test_gold_ai.py::TestGoldAI2025::test_print_gpu_utilization_and_show_system_status PASSED [  8%]
test_gold_ai.py::TestGoldAI2025::test_risk_manager_consecutive_loss_and_trading_allowed 
-------------------------------- live log call ---------------------------------
09:24:16 [DEBUG] [gold_ai2025.StrategyConfig] Initializing StrategyConfig with dict: {}
09:24:16 [INFO] [gold_ai2025.StrategyConfig] StrategyConfig initialized. Risk/Trade: 0.010, Max Hold: 24 bars, Kill DD: 20.00%
09:24:16 [DEBUG] [gold_ai2025.StrategyConfig]   Feature Eng Params: M15 EMA Fast=50, M1 Rolling Z Window=300
09:24:16 [DEBUG] [gold_ai2025.StrategyConfig]   Default Signal Thresh: GainZ=0.3, RSI Buy=50
09:24:16 [DEBUG] [gold_ai2025.StrategyConfig]   Dynamic TP2 Params: HighVolBoost=1.2, LotBoostMult=1.1
09:24:16 [INFO] [gold_ai2025.RiskManager] RiskManager initialized. Hard Kill DD: 20.00%, Soft Kill DD: 15.00%
09:24:16 [CRITICAL] [gold_ai2025.RiskManager] [RISK - KILL SWITCH] Consecutive Losses Threshold Hit. Losses=7 >= Threshold=7
09:24:16 [DEBUG] [gold_ai2025.RiskManager] [RISK] Trading blocked: Soft Kill Switch is active.
PASSED                                                                   [  8%]
test_gold_ai.py::TestGoldAI2025::test_risk_manager_drawdown_and_kill_switch 
-------------------------------- live log call ---------------------------------
09:24:16 [DEBUG] [gold_ai2025.StrategyConfig] Initializing StrategyConfig with dict: {}
09:24:16 [INFO] [gold_ai2025.StrategyConfig] StrategyConfig initialized. Risk/Trade: 0.010, Max Hold: 24 bars, Kill DD: 20.00%
09:24:16 [DEBUG] [gold_ai2025.StrategyConfig]   Feature Eng Params: M15 EMA Fast=50, M1 Rolling Z Window=300
09:24:16 [DEBUG] [gold_ai2025.StrategyConfig]   Default Signal Thresh: GainZ=0.3, RSI Buy=50
09:24:16 [DEBUG] [gold_ai2025.StrategyConfig]   Dynamic TP2 Params: HighVolBoost=1.2, LotBoostMult=1.1
09:24:16 [INFO] [gold_ai2025.RiskManager] RiskManager initialized. Hard Kill DD: 20.00%, Soft Kill DD: 15.00%
09:24:16 [INFO] [gold_ai2025.RiskManager] [Patch AI Studio v4.9.58+] Drawdown peak initialized to 100.00
09:24:16 [INFO] [gold_ai2025.RiskManager] [Patch AI Studio v4.9.58+] Drawdown updated: Equity=100.00, Peak=100.00, DD=0.0000
09:24:16 [INFO] [gold_ai2025.RiskManager] [Patch AI Studio v4.9.58+] Drawdown updated: Equity=90.00, Peak=100.00, DD=0.1000
09:24:16 [INFO] [gold_ai2025.RiskManager] [Patch AI Studio v4.9.58+] Drawdown updated: Equity=85.00, Peak=100.00, DD=0.1500
09:24:16 [CRITICAL] [gold_ai2025.RiskManager] [Patch AI Studio v4.9.58+][RISK] Soft Kill ACTIVATED: DD=0.1500 >= 0.1500
09:24:16 [INFO] [gold_ai2025.RiskManager] [Patch AI Studio v4.9.58+] Drawdown updated: Equity=79.00, Peak=100.00, DD=0.2100
09:24:16 [CRITICAL] [gold_ai2025.RiskManager] [Patch AI Studio v4.9.59+][Patch] [RISK - KILL SWITCH] Max Drawdown Triggered! EQ=79.00, Peak=100.00, DD=0.2100 >= 0.2000
PASSED                                                                   [  9%]
test_gold_ai.py::TestGoldAI2025::test_risk_manager_soft_kill_active 
-------------------------------- live log call ---------------------------------
09:24:16 [DEBUG] [gold_ai2025.StrategyConfig] Initializing StrategyConfig with dict: {}
09:24:16 [INFO] [gold_ai2025.StrategyConfig] StrategyConfig initialized. Risk/Trade: 0.010, Max Hold: 24 bars, Kill DD: 20.00%
09:24:16 [DEBUG] [gold_ai2025.StrategyConfig]   Feature Eng Params: M15 EMA Fast=50, M1 Rolling Z Window=300
09:24:16 [DEBUG] [gold_ai2025.StrategyConfig]   Default Signal Thresh: GainZ=0.3, RSI Buy=50
09:24:16 [DEBUG] [gold_ai2025.StrategyConfig]   Dynamic TP2 Params: HighVolBoost=1.2, LotBoostMult=1.1
09:24:16 [INFO] [gold_ai2025.RiskManager] RiskManager initialized. Hard Kill DD: 20.00%, Soft Kill DD: 15.00%
09:24:16 [INFO] [gold_ai2025.RiskManager] [Patch AI Studio v4.9.58+] Drawdown updated: Equity=80.00, Peak=100.00, DD=0.2000
09:24:16 [CRITICAL] [gold_ai2025.RiskManager] [Patch AI Studio v4.9.58+][RISK] Soft Kill ACTIVATED: DD=0.2000 >= 0.1500
PASSED                                                                   [  9%]
test_gold_ai.py::TestGoldAI2025::test_risk_manager_update_and_soft_kill 
-------------------------------- live log call ---------------------------------
09:24:16 [DEBUG] [gold_ai2025.StrategyConfig] Initializing StrategyConfig with dict: {}
09:24:16 [INFO] [gold_ai2025.StrategyConfig] StrategyConfig initialized. Risk/Trade: 0.010, Max Hold: 24 bars, Kill DD: 20.00%
09:24:16 [DEBUG] [gold_ai2025.StrategyConfig]   Feature Eng Params: M15 EMA Fast=50, M1 Rolling Z Window=300
09:24:16 [DEBUG] [gold_ai2025.StrategyConfig]   Default Signal Thresh: GainZ=0.3, RSI Buy=50
09:24:16 [DEBUG] [gold_ai2025.StrategyConfig]   Dynamic TP2 Params: HighVolBoost=1.2, LotBoostMult=1.1
09:24:16 [INFO] [gold_ai2025.RiskManager] RiskManager initialized. Hard Kill DD: 20.00%, Soft Kill DD: 15.00%
09:24:16 [INFO] [gold_ai2025.RiskManager] [Patch AI Studio v4.9.58+] Drawdown peak initialized to 100.00
09:24:16 [INFO] [gold_ai2025.RiskManager] [Patch AI Studio v4.9.58+] Drawdown updated: Equity=100.00, Peak=100.00, DD=0.0000
09:24:16 [INFO] [gold_ai2025.RiskManager] [Patch AI Studio v4.9.58+] Drawdown updated: Equity=80.00, Peak=100.00, DD=0.2000
09:24:16 [CRITICAL] [gold_ai2025.RiskManager] [Patch AI Studio v4.9.58+][RISK] Soft Kill ACTIVATED: DD=0.2000 >= 0.1500
PASSED                                                                   [ 10%]
test_gold_ai.py::TestGoldAI2025::test_risk_trade_manager_forced_entry_spike PASSED [ 10%]
test_gold_ai.py::TestGoldAI2025::test_safe_get_global PASSED             [ 11%]
test_gold_ai.py::TestGoldAI2025::test_safe_load_csv_auto 
-------------------------------- live log call ---------------------------------
09:24:16 [INFO] [gold_ai2025.safe_load_csv_auto] [Patch][QA v4.9.85] (safe_load) Attempting to load: missing.csv
09:24:16 [WARNING] [gold_ai2025.safe_load_csv_auto] [Patch][QA v4.9.100] Could not create directory for CSV: FileNotFoundError(2, 'No such file or directory')
09:24:16 [INFO] [gold_ai2025.safe_load_csv_auto] [Patch][QA v4.9.85] (safe_load) Attempting to load: data.csv
09:24:16 [DEBUG] [gold_ai2025.safe_load_csv_auto] [Patch][QA v4.9.85] No .gz extension, using standard pd.read_csv.
09:24:16 [INFO] [gold_ai2025.safe_load_csv_auto] [Patch][QA v4.9.85] Loaded csv with default encoding.
09:24:16 [INFO] [gold_ai2025.safe_load_csv_auto] [Patch][QA v4.9.85] (safe_load) Attempting to load: data.csv.gz
09:24:16 [DEBUG] [gold_ai2025.safe_load_csv_auto] [Patch][QA v4.9.85] Detected .gz extension, using gzip for file 'data.csv.gz'
09:24:16 [INFO] [gold_ai2025.safe_load_csv_auto] [Patch][QA v4.9.85] Loaded gzipped file with utf-8 encoding.
PASSED                                                                   [ 11%]
test_gold_ai.py::TestGoldAI2025::test_set_thai_font_and_setup_fonts 
-------------------------------- live log call ---------------------------------
09:24:16 [INFO] [gold_ai2025.set_thai_font] [Patch][QA v4.9.91+] Found font: 'Loma' (requested: 'Loma') at /content/drive/MyDrive/new/font.ttf
09:24:16 [INFO] [gold_ai2025.set_thai_font] [Patch][QA v4.9.91+] Found font: 'Loma' (requested: 'TH Sarabun New') at /content/drive/MyDrive/new/font.ttf
09:24:16 [INFO] [gold_ai2025.set_thai_font] [Patch][QA v4.9.91+] Found font: 'Loma' (requested: 'THSarabunNew') at /content/drive/MyDrive/new/font.ttf
09:24:16 [INFO] [gold_ai2025.set_thai_font] [Patch][QA v4.9.91+] Found font: 'Loma' (requested: 'Garuda') at /content/drive/MyDrive/new/font.ttf
09:24:16 [INFO] [gold_ai2025.set_thai_font] [Patch][QA v4.9.91+] Found font: 'Loma' (requested: 'Norasi') at /content/drive/MyDrive/new/font.ttf
09:24:16 [INFO] [gold_ai2025.set_thai_font] [Patch][QA v4.9.91+] Found font: 'Loma' (requested: 'Kinnari') at /content/drive/MyDrive/new/font.ttf
09:24:16 [INFO] [gold_ai2025.set_thai_font] [Patch][QA v4.9.91+] Found font: 'Loma' (requested: 'Waree') at /content/drive/MyDrive/new/font.ttf
09:24:16 [INFO] [gold_ai2025.set_thai_font] [Patch][QA v4.9.91+] Found font: 'Loma' (requested: 'Laksaman') at /content/drive/MyDrive/new/font.ttf
09:24:16 [INFO] [gold_ai2025.set_thai_font] [Patch][QA v4.9.91+] Set default font to 'Loma'.
09:24:16 [INFO] [gold_ai2025.set_thai_font] [Patch][QA v4.9.91+] Font 'Loma' set and tested successfully.
09:24:16 [INFO] [gold_ai2025.setup_fonts] 
(Processing) Setting up Thai font for plots...
09:24:16 [INFO] [gold_ai2025.setup_fonts]    Attempting to set font directly using findfont...
09:24:16 [INFO] [gold_ai2025.set_thai_font] [Patch][QA v4.9.91+] Found font: 'Loma' (requested: 'TH Sarabun New') at /content/drive/MyDrive/new/font.ttf
09:24:16 [INFO] [gold_ai2025.set_thai_font] [Patch][QA v4.9.91+] Found font: 'Loma' (requested: 'THSarabunNew') at /content/drive/MyDrive/new/font.ttf
09:24:16 [INFO] [gold_ai2025.set_thai_font] [Patch][QA v4.9.91+] Found font: 'Loma' (requested: 'Garuda') at /content/drive/MyDrive/new/font.ttf
09:24:16 [INFO] [gold_ai2025.set_thai_font] [Patch][QA v4.9.91+] Found font: 'Loma' (requested: 'Norasi') at /content/drive/MyDrive/new/font.ttf
09:24:16 [INFO] [gold_ai2025.set_thai_font] [Patch][QA v4.9.91+] Found font: 'Loma' (requested: 'Kinnari') at /content/drive/MyDrive/new/font.ttf
09:24:16 [INFO] [gold_ai2025.set_thai_font] [Patch][QA v4.9.91+] Found font: 'Loma' (requested: 'Waree') at /content/drive/MyDrive/new/font.ttf
09:24:16 [INFO] [gold_ai2025.set_thai_font] [Patch][QA v4.9.91+] Found font: 'Loma' (requested: 'Laksaman') at /content/drive/MyDrive/new/font.ttf
09:24:16 [INFO] [gold_ai2025.set_thai_font] [Patch][QA v4.9.91+] Found font: 'Loma' (requested: 'Loma') at /content/drive/MyDrive/new/font.ttf
09:24:16 [INFO] [gold_ai2025.set_thai_font] [Patch][QA v4.9.91+] Set default font to 'Loma'.
09:24:16 [INFO] [gold_ai2025.set_thai_font] [Patch][QA v4.9.91+] Font 'Loma' set and tested successfully.
09:24:16 [INFO] [gold_ai2025.setup_fonts] 
   (Info) Font setup process complete.
PASSED                                                                   [ 12%]
test_gold_ai.py::TestGoldAI2025::test_setup_output_directory 
-------------------------------- live log call ---------------------------------
09:24:16 [INFO] [gold_ai2025.setup_output_directory]    (Setup) กำลังตรวจสอบ/สร้าง Output Directory: /content/drive/MyDrive/new/outdir
09:24:16 [INFO] [gold_ai2025.setup_output_directory]       -> Directory exists or was created.
09:24:16 [INFO] [gold_ai2025.setup_output_directory]       -> การเขียนไฟล์ทดสอบสำเร็จ.
PASSED                                                                   [ 12%]
test_gold_ai.py::TestGoldAI2025::test_should_exit_due_to_holding PASSED  [ 13%]
test_gold_ai.py::TestGoldAI2025::test_simple_converter 
-------------------------------- live log call ---------------------------------
09:24:16 [DEBUG] [gold_ai2025.simple_converter] Type <class 'object'> not directly serializable. Converting to string: '<object object at 0x7f8b8126c870>...'
PASSED                                                                   [ 14%]
test_gold_ai.py::TestGoldAI2025::test_spike_guard_and_reentry 
-------------------------------- live log call ---------------------------------
09:24:16 [DEBUG] [gold_ai2025.StrategyConfig] Initializing StrategyConfig with dict: {}
09:24:16 [INFO] [gold_ai2025.StrategyConfig] StrategyConfig initialized. Risk/Trade: 0.010, Max Hold: 24 bars, Kill DD: 20.00%
09:24:16 [DEBUG] [gold_ai2025.StrategyConfig]   Feature Eng Params: M15 EMA Fast=50, M1 Rolling Z Window=300
09:24:16 [DEBUG] [gold_ai2025.StrategyConfig]   Default Signal Thresh: GainZ=0.3, RSI Buy=50
09:24:16 [DEBUG] [gold_ai2025.StrategyConfig]   Dynamic TP2 Params: HighVolBoost=1.2, LotBoostMult=1.1
09:24:16 [INFO] [GoldAI_UnitTest] [Patch AI Studio v4.9.58+] spike_guard_blocked INPUT: session=London, row={'spike_score': 0.6, 'Pattern_Label': 'Breakout'}, cfg.threshold=0.50, allowed=['Breakout']
09:24:16 [INFO] [GoldAI.SpikeGuard] [Patch AI Studio v4.9.58+] Checking spike guard: session=London, score=0.6, threshold=0.5, pattern=Breakout, allowed_patterns=['Breakout']
09:24:16 [WARNING] [GoldAI.SpikeGuard] [Patch AI Studio v4.9.58+] Spike guard blocked! session=London, score=0.6, pattern=Breakout
09:24:16 [INFO] [GoldAI_UnitTest] [Patch AI Studio v4.9.58+] spike_guard_blocked OUTPUT: True
09:24:16 [INFO] [GoldAI.SpikeGuard] [Patch AI Studio v4.9.58+] Checking spike guard: session=Asia, score=0.6, threshold=0.5, pattern=Breakout, allowed_patterns=['Breakout']
09:24:16 [INFO] [GoldAI.SpikeGuard] [Patch AI Studio v4.9.58+] Spike guard allowed: session=Asia, score=0.6, pattern=Breakout
09:24:16 [INFO] [GoldAI_UnitTest] [Patch AI Studio v4.9.58+] spike_guard_blocked (Asia) OUTPUT: False
09:24:16 [DEBUG] [gold_ai2025.is_reentry_allowed.BUY] Re-entry blocked: Cooldown active. Bars since last trade (1) < Cooldown (3).
09:24:16 [INFO] [gold_ai2025.is_reentry_allowed.BUY] Re-entry ALLOWED for side BUY at 2021-01-01 00:15:00.
PASSED                                                                   [ 14%]
test_gold_ai.py::TestGoldAI2025::test_strategy_config_defaults 
-------------------------------- live log call ---------------------------------
09:24:16 [DEBUG] [gold_ai2025.StrategyConfig] Initializing StrategyConfig with dict: {}
09:24:16 [INFO] [gold_ai2025.StrategyConfig] StrategyConfig initialized. Risk/Trade: 0.010, Max Hold: 24 bars, Kill DD: 20.00%
09:24:16 [DEBUG] [gold_ai2025.StrategyConfig]   Feature Eng Params: M15 EMA Fast=50, M1 Rolling Z Window=300
09:24:16 [DEBUG] [gold_ai2025.StrategyConfig]   Default Signal Thresh: GainZ=0.3, RSI Buy=50
09:24:16 [DEBUG] [gold_ai2025.StrategyConfig]   Dynamic TP2 Params: HighVolBoost=1.2, LotBoostMult=1.1
PASSED                                                                   [ 15%]
test_gold_ai.py::TestGoldAI2025::test_try_import_with_install_success 
-------------------------------- live log call ---------------------------------
09:24:16 [INFO] [gold_ai2025.log_library_version] (Info) Using FOO version: 0.1
PASSED                                                                   [ 15%]
test_gold_ai.py::TestEdgeCases::test_calculate_metrics_basic 
-------------------------------- live log setup --------------------------------
09:24:16 [INFO] [gold_ai2025.Part2_DeprecatedParams] Part 2: Core Parameters & Strategy Settings (DEPRECATED - Parameters now in StrategyConfig from YAML).
09:24:16 [WARNING] [gold_ai2025.Part2_DeprecatedParams] Part 2: Is DEPRECATED. All tunable strategy parameters should be managed by StrategyConfig.
09:24:16 [INFO] [gold_ai2025.Part2_DeprecatedParams] Any true constants (e.g., for feature engineering) will be defined in their relevant sections or Part 1.
09:24:16 [INFO] [gold_ai2025.MLHelpers] Loading Machine Learning Configuration & Helpers (v4.9.13 - Refined Model Switcher)...
09:24:16 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_CLASSIFIER (L1 Filter): True
09:24:16 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_META_CLASSIFIER (L2 Filter): False
09:24:16 [INFO] [gold_ai2025.MLHelpers]   Initial Optuna Hyperparameter Tuning Enabled: False
09:24:16 [INFO] [gold_ai2025.MLHelpers]   Initial Auto Threshold Tuning Enabled: False
09:24:16 [INFO] [gold_ai2025.MT5Connector] Loading Part 12: MT5 Connector (Placeholder)...
09:24:16 [INFO] [gold_ai2025.MT5Connector] Part 12: MT5 Connector (Placeholder) Loaded.
09:24:16 [DEBUG] [gold_ai2025.Part14_FutureAdditions] Part 14: Placeholder for Future Additions reached.
09:24:16 [INFO] [gold_ai2025.Part15_EndOfScript] Reached End of Part 15 (Definitive End of Script Marker). Gold AI script processing complete.
-------------------------------- live log call ---------------------------------
09:24:16 [WARNING] [gold_ai2025.calculate_metrics_basic] [Patch AI Studio v4.9.56+] Extra kwargs ignored in calculate_metrics: ['side']
09:24:16 [DEBUG] [gold_ai2025.calculate_metrics_basic] Metrics calculated for fold 'test': {'fold_tag': 'test', 'num_trades': 3, 'num_tp': 1, 'num_sl': 1, 'num_be': 1, 'net_profit': 10.0}
PASSED                                                                   [ 16%]
test_gold_ai.py::TestEdgeCases::test_dummy_module_behavior PASSED        [ 16%]
test_gold_ai.py::TestEdgeCases::test_engineer_m1_features_atr_missing_fallback 
-------------------------------- live log call ---------------------------------
09:24:16 [DEBUG] [gold_ai2025.StrategyConfig] Initializing StrategyConfig with dict: {}
09:24:16 [INFO] [gold_ai2025.StrategyConfig] StrategyConfig initialized. Risk/Trade: 0.010, Max Hold: 24 bars, Kill DD: 20.00%
09:24:16 [DEBUG] [gold_ai2025.StrategyConfig]   Feature Eng Params: M15 EMA Fast=50, M1 Rolling Z Window=300
09:24:16 [DEBUG] [gold_ai2025.StrategyConfig]   Default Signal Thresh: GainZ=0.3, RSI Buy=50
09:24:16 [DEBUG] [gold_ai2025.StrategyConfig]   Dynamic TP2 Params: HighVolBoost=1.2, LotBoostMult=1.1
09:24:16 [INFO] [gold_ai2025.engineer_m1_features] (Processing) กำลังสร้าง Features M1 (using StrategyConfig)...
09:24:16 [ERROR] [root] [Patch][QA v4.9.90] engineer_m1_features: ATR_14 missing or all NaN, fallback to pd.Series([np.nan]*len(df)).
09:24:16 [INFO] [root] [Patch][QA v4.9.90] engineer_m1_features: Fallback applied, ATR_14 is all NaN as expected for missing.
09:24:16 [WARNING] [gold_ai2025.macd]    (Warning) MACD calculation skipped: Not enough valid data points (2 < 26).
09:24:16 [WARNING] [gold_ai2025.engineer_m1_features]       (Warning) ไม่สามารถคำนวณ MACD_hist_smooth.
09:24:16 [WARNING] [gold_ai2025.atr]    (Warning) ATR calculation skipped: Not enough valid data after dropna (need >= 14).
09:24:16 [WARNING] [gold_ai2025.engineer_m1_features]       (Warning) ไม่สามารถคำนวณ ATR_14_Rolling_Avg.
09:24:16 [WARNING] [gold_ai2025.rsi] [Patch AI Studio v4.9.73+] (Warning) RSI calculation fallback to default 50 (manual/series too short/all NaN); all values set to 50.
09:24:16 [INFO] [gold_ai2025.rsi] [Patch AI Studio v4.9.73+] [Patch] RSI fallback manual returned all 50 with correct index/dtype
09:24:16 [WARNING] [gold_ai2025.engineer_m1_features]          (Warning) ไม่สามารถคำนวณ Volatility_Index. Setting to 1.0.
09:24:16 [WARNING] [gold_ai2025.engineer_m1_features] [Patch AI Studio v4.9.67+] ta.trend.ADXIndicator not available; using manual ADX.
09:24:16 [WARNING] [gold_ai2025.engineer_m1_features]          (Warning) Not enough valid features/samples for clustering. Setting cluster to 0.
09:24:16 [INFO] [gold_ai2025.engineer_m1_features]       Creating 'session' column using config.session_times_utc...
09:24:16 [WARNING] [gold_ai2025.engineer_m1_features]          (Warning) Original index is not a valid DatetimeIndex. Session tagging will result in 'Error_Tagging_Reindex_Fill'.
09:24:16 [INFO] [gold_ai2025.engineer_m1_features]          Session distribution:
session
Error_Tagging_Reindex_Fill    1.0
09:24:16 [INFO] [gold_ai2025.engineer_m1_features] (Success) สร้าง Features M1 (using StrategyConfig) เสร็จสิ้น.
PASSED                                                                   [ 17%]
test_gold_ai.py::TestEdgeCases::test_gen_random_m1_df_no_recursion PASSED [ 17%]
test_gold_ai.py::TestEdgeCases::test_load_data_missing_columns 
-------------------------------- live log call ---------------------------------
09:24:16 [INFO] [gold_ai2025.load_data] (Loading) กำลังโหลดข้อมูล  จาก: /content/drive/MyDrive/new/invalid.csv
09:24:16 [INFO] [gold_ai2025.load_data]    ไฟล์ข้อมูล: /content/drive/MyDrive/new/invalid.csv
09:24:16 [CRITICAL] [gold_ai2025.load_data] (Error) ขาดคอลัมน์ที่จำเป็น: ['Close', 'Low', 'Timestamp']
09:24:16 [CRITICAL] [gold_ai2025.load_data] (Error) ไม่สามารถโหลดข้อมูล : ขาดคอลัมน์ที่จำเป็น
Traceback (most recent call last):
  File "/content/drive/MyDrive/new/gold_ai2025.py", line 1672, in load_data
    load_data_logger.critical(f"(Error) ขาดคอลัมน์ที่จำเป็น: {missing_req}")
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
gold_ai2025.DataLoadError: ขาดคอลัมน์ที่จำเป็น
Traceback (most recent call last):
  File "/content/drive/MyDrive/new/gold_ai2025.py", line 1672, in load_data
    load_data_logger.critical(f"(Error) ขาดคอลัมน์ที่จำเป็น: {missing_req}")
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
gold_ai2025.DataLoadError: ขาดคอลัมน์ที่จำเป็น
PASSED                                                                   [ 18%]
test_gold_ai.py::TestEdgeCases::test_load_data_missing_file 
-------------------------------- live log call ---------------------------------
09:24:16 [INFO] [gold_ai2025.load_data] (Loading) กำลังโหลดข้อมูล  จาก: /content/drive/MyDrive/new/no_such_file.csv
09:24:16 [CRITICAL] [gold_ai2025.load_data] (Error) ไม่พบไฟล์ข้อมูล
PASSED                                                                   [ 18%]
test_gold_ai.py::TestEdgeCases::test_load_data_valid 
-------------------------------- live log call ---------------------------------
09:24:16 [INFO] [gold_ai2025.load_data] (Loading) กำลังโหลดข้อมูล  จาก: /content/drive/MyDrive/new/valid.csv
09:24:16 [INFO] [gold_ai2025.load_data]    ไฟล์ข้อมูล: /content/drive/MyDrive/new/valid.csv
09:24:16 [DEBUG] [gold_ai2025.load_data]    Converting price columns ['Open', 'High', 'Low', 'Close'] to numeric (if not already specified in dtypes)...
09:24:16 [DEBUG] [gold_ai2025.load_data]    [Data Quality] Checking for invalid prices (<= 0)...
09:24:16 [DEBUG] [gold_ai2025.load_data]    [Data Quality] Checking High >= Low consistency...
09:24:16 [INFO] [gold_ai2025.load_data]    [Data Quality] ตรวจสอบ % NaN ในคอลัมน์ราคา...
09:24:16 [INFO] [gold_ai2025.load_data]       NaN Percentage:
Open     0.0
High     0.0
Low      0.0
Close    0.0
dtype: float64
09:24:16 [INFO] [gold_ai2025.load_data]    [Data Quality] ตรวจสอบ Duplicates (Date & Timestamp)...
09:24:16 [DEBUG] [gold_ai2025.load_data]       ไม่พบ Duplicates (Date & Timestamp).
09:24:16 [INFO] [gold_ai2025.load_data]    [Data Quality] ตรวจสอบ Price Jumps (Threshold > 10.0%)...
09:24:16 [WARNING] [gold_ai2025.load_data]    (Warning) พบ 1 แท่งที่มีการเปลี่ยนแปลงราคา Close เกิน 10.0%:
09:24:16 [WARNING] [gold_ai2025.load_data]       ตัวอย่าง Index และ % Change:
2    0.25
09:24:16 [INFO] [gold_ai2025.load_data] (Success) โหลดและตรวจสอบข้อมูล  สำเร็จ: 3 แถว
PASSED                                                                   [ 19%]
test_gold_ai.py::TestEdgeCases::test_log_library_version_none_and_missing 
-------------------------------- live log call ---------------------------------
09:24:16 [WARNING] [gold_ai2025.log_library_version] Library DUMMY_NONE is None (likely not imported or import failed).
09:24:16 [DEBUG] [gold_ai2025.log_library_version] [DEBUG] Version attribute for library DUMMY_MISSING is 'N/A' or None.
PASSED                                                                   [ 20%]
test_gold_ai.py::TestEdgeCases::test_macd_manual_fallback PASSED         [ 20%]
test_gold_ai.py::TestEdgeCases::test_prepare_datetime_all_nat 
-------------------------------- live log call ---------------------------------
09:24:16 [INFO] [gold_ai2025.prepare_datetime] (Processing) กำลังเตรียม Datetime Index (ALL_NAT_TEST)...
09:24:16 [WARNING] [gold_ai2025.prepare_datetime]    StrategyConfig not provided or missing 'max_nat_ratio_threshold'. Using default: 0.05
09:24:16 [INFO] [gold_ai2025.preview_datetime_format]    [Preview] First 5 Date + Timestamp format examples:
09:24:16 [INFO] [gold_ai2025.preview_datetime_format] 
0000 99:99:99
0000 99:99:99
0000 99:99:99
0000 99:99:99
0000 99:99:99
09:24:17 [INFO] [gold_ai2025.prepare_datetime]       [Converter] กำลังตรวจสอบและแปลงปี พ.ศ. เป็น ค.ศ. (ถ้าจำเป็น)...
09:24:17 [INFO] [gold_ai2025.prepare_datetime]       [Converter] ไม่พบปีที่น่าจะเป็น พ.ศ. (หรือข้อมูลน้อยเกินไป).
09:24:17 [DEBUG] [gold_ai2025.prepare_datetime]       Combining Date and Timestamp strings...
09:24:17 [INFO] [gold_ai2025.parse_datetime_safely]       [Parser] Attempting to parse date/time strings...
09:24:17 [DEBUG] [gold_ai2025.parse_datetime_safely]       [Parser] Trying format: '%Y%m%d %H:%M:%S' for 5 values...
09:24:17 [DEBUG] [gold_ai2025.parse_datetime_safely]       [Parser] Trying format: '%Y%m%d%H:%M:%S' for 5 values...
09:24:17 [DEBUG] [gold_ai2025.parse_datetime_safely]       [Parser] Trying format: '%Y-%m-%d %H:%M:%S' for 5 values...
09:24:17 [DEBUG] [gold_ai2025.parse_datetime_safely]       [Parser] Trying format: '%Y/%m/%d %H:%M:%S' for 5 values...
09:24:17 [DEBUG] [gold_ai2025.parse_datetime_safely]       [Parser] Trying format: '%Y.%m.%d %H:%M:%S' for 5 values...
09:24:17 [DEBUG] [gold_ai2025.parse_datetime_safely]       [Parser] Trying format: '%d/%m/%Y %H:%M:%S' for 5 values...
09:24:17 [DEBUG] [gold_ai2025.parse_datetime_safely]       [Parser] Trying format: '%m/%d/%Y %H:%M:%S' for 5 values...
09:24:17 [INFO] [gold_ai2025.parse_datetime_safely]       [Parser] Trying general parser for 5 remaining values...
09:24:17 [WARNING] [gold_ai2025.parse_datetime_safely]       [Parser] Could not parse 5 date/time strings.
09:24:17 [WARNING] [gold_ai2025.parse_datetime_safely]          Example failed strings:
0    0000 99:99:99
1    0000 99:99:99
2    0000 99:99:99
3    0000 99:99:99
4    0000 99:99:99
09:24:17 [INFO] [gold_ai2025.parse_datetime_safely]       [Parser] (Finished) Date/time parsing complete.
09:24:17 [WARNING] [gold_ai2025.prepare_datetime]    (Warning) พบค่า NaT 5 (100.0%) ใน ALL_NAT_TEST หลังการ parse.
09:24:17 [CRITICAL] [gold_ai2025.prepare_datetime]    (Error) พบค่า NaT 100% ใน ALL_NAT_TEST. ไม่สามารถดำเนินการต่อได้. ตัวอย่าง: 0000 99:99:99
PASSED                                                                   [ 21%]
test_gold_ai.py::TestEdgeCases::test_prepare_datetime_duplicate_index 
-------------------------------- live log call ---------------------------------
09:24:17 [INFO] [gold_ai2025.prepare_datetime] (Processing) กำลังเตรียม Datetime Index (DUP)...
09:24:17 [WARNING] [gold_ai2025.prepare_datetime]    StrategyConfig not provided or missing 'max_nat_ratio_threshold'. Using default: 0.05
09:24:17 [INFO] [gold_ai2025.preview_datetime_format]    [Preview] First 5 Date + Timestamp format examples:
09:24:17 [INFO] [gold_ai2025.preview_datetime_format] 
20240101 00:00:00
20240101 00:00:00
09:24:17 [INFO] [gold_ai2025.prepare_datetime]       [Converter] กำลังตรวจสอบและแปลงปี พ.ศ. เป็น ค.ศ. (ถ้าจำเป็น)...
09:24:17 [INFO] [gold_ai2025.prepare_datetime]       [Converter] ไม่พบปีที่น่าจะเป็น พ.ศ. (หรือข้อมูลน้อยเกินไป).
09:24:17 [DEBUG] [gold_ai2025.prepare_datetime]       Combining Date and Timestamp strings...
09:24:17 [INFO] [gold_ai2025.parse_datetime_safely]       [Parser] Attempting to parse date/time strings...
09:24:17 [DEBUG] [gold_ai2025.parse_datetime_safely]       [Parser] Trying format: '%Y%m%d %H:%M:%S' for 2 values...
09:24:17 [INFO] [gold_ai2025.parse_datetime_safely]       [Parser] (Success) Format '%Y%m%d %H:%M:%S' matched: 2. Remaining: 0
09:24:17 [DEBUG] [gold_ai2025.parse_datetime_safely]       [Parser] All strings parsed.
09:24:17 [INFO] [gold_ai2025.parse_datetime_safely]       [Parser] (Finished) Date/time parsing complete.
09:24:18 [DEBUG] [gold_ai2025.prepare_datetime]    ไม่พบค่า NaT ใน DUP หลังการ parse.
09:24:18 [WARNING] [gold_ai2025.prepare_datetime]    (Warning) พบ Index ซ้ำ 1 รายการ. กำลังลบรายการซ้ำ (เก็บรายการแรก)...
09:24:18 [INFO] [gold_ai2025.prepare_datetime]    แก้ไข index ซ้ำ: ลบ 1 แถว.
09:24:18 [DEBUG] [gold_ai2025.prepare_datetime]    Checking for non-monotonic index (time reversals)...
09:24:18 [DEBUG] [gold_ai2025.prepare_datetime]       Index is monotonic increasing.
09:24:18 [INFO] [gold_ai2025.prepare_datetime] (Success) เตรียม Datetime index (DUP) สำเร็จ. Shape: (1, 7)
PASSED                                                                   [ 21%]
test_gold_ai.py::TestEdgeCases::test_rsi_fallback_short_series PASSED    [ 22%]
test_gold_ai.py::TestEdgeCases::test_rsi_manual_fallback PASSED          [ 22%]
test_gold_ai.py::TestEdgeCases::test_rsi_manual_fallback_coverage 
-------------------------------- live log call ---------------------------------
09:24:18 [WARNING] [gold_ai2025.rsi] [Patch AI Studio v4.9.67+] ta.momentum.RSIIndicator not available; using manual calculation.
09:24:18 [WARNING] [gold_ai2025.rsi] [Patch AI Studio v4.9.73+] (Warning) RSI calculation fallback to default 50 (manual/series too short/all NaN); all values set to 50.
09:24:18 [INFO] [gold_ai2025.rsi] [Patch AI Studio v4.9.73+] [Patch] RSI fallback manual returned all 50 with correct index/dtype
PASSED                                                                   [ 23%]
test_gold_ai.py::TestEdgeCases::test_run_backtest_simulation_v34_minimal 
-------------------------------- live log call ---------------------------------
09:24:18 [DEBUG] [gold_ai2025.StrategyConfig] Initializing StrategyConfig with dict: {}
09:24:18 [INFO] [gold_ai2025.StrategyConfig] StrategyConfig initialized. Risk/Trade: 0.010, Max Hold: 24 bars, Kill DD: 20.00%
09:24:18 [DEBUG] [gold_ai2025.StrategyConfig]   Feature Eng Params: M15 EMA Fast=50, M1 Rolling Z Window=300
09:24:18 [DEBUG] [gold_ai2025.StrategyConfig]   Default Signal Thresh: GainZ=0.3, RSI Buy=50
09:24:18 [DEBUG] [gold_ai2025.StrategyConfig]   Dynamic TP2 Params: HighVolBoost=1.2, LotBoostMult=1.1
09:24:18 [INFO] [gold_ai2025.run_backtest_simulation_v34.Minimal.BUY] --- Starting Backtest Simulation (v4.9.23 - AI Studio Patch v4.9.1): Label='Minimal', Side='BUY', Fold=N/A ---
09:24:18 [WARNING] [gold_ai2025.run_backtest_simulation_v34.Minimal.BUY] [Minimal] RiskManager (risk_manager_obj) not provided. Initializing new one.
09:24:18 [INFO] [gold_ai2025.RiskManager] RiskManager initialized. Hard Kill DD: 20.00%, Soft Kill DD: 15.00%
09:24:18 [WARNING] [gold_ai2025.run_backtest_simulation_v34.Minimal.BUY] [Minimal] TradeManager (trade_manager_obj) not provided. Initializing new one.
09:24:18 [INFO] [gold_ai2025.TradeManager] TradeManager initialized. FE Cooldown: 240 min, FE Score: 1.0, FE Max Losses: 2
09:24:18 [INFO] [gold_ai2025.run_backtest_simulation_v34.Minimal.BUY] [Patch AI Studio v4.9.62+] Equity tracker history initialized as dict
09:24:18 [DEBUG] [gold_ai2025._predefine_result_columns_for_simulation] Predefining result columns in df_sim for label_suffix: _Minimal
09:24:18 [DEBUG] [gold_ai2025._predefine_result_columns_for_simulation] Finished predefining 44 columns for _Minimal.
09:24:18 [INFO] [gold_ai2025.run_backtest_simulation_v34.Minimal.BUY] [Minimal] Initializing simulation. Capital: $1000.00, Risk: 1.000%, MM Mode: balanced
09:24:18 [INFO] [gold_ai2025.run_backtest_simulation_v34.Minimal.BUY] [Minimal] Config: MaxHold=24, PTP En=True, ReEn=True, FE En=True
09:24:18 [INFO] [gold_ai2025.run_backtest_simulation_v34.Minimal.BUY] [Minimal] Initial KillSwitchState=False, InitialConsecLosses=0
09:24:18 [INFO] [gold_ai2025.run_backtest_simulation_v34.Minimal.BUY] Simulation loop finished for Minimal. Finalizing remaining orders...
09:24:18 [INFO] [gold_ai2025.run_backtest_simulation_v34.Minimal.BUY] Created trade log DataFrame for Minimal with 0 entries.
09:24:18 [INFO] [gold_ai2025.run_backtest_simulation_v34.Minimal.BUY]   (Finished) Minimal (BUY) simulation complete. Final Equity: $1000.00
09:24:18 [INFO] [gold_ai2025.run_backtest_simulation_v34.Minimal.BUY] [Patch AI Studio v4.9.62+] Fold summary: final equity=1000.00, len(history)=2, trade_log=0
PASSED                                                                   [ 23%]
test_gold_ai.py::TestEdgeCases::test_run_backtest_simulation_v34_return_tuple 
-------------------------------- live log call ---------------------------------
09:24:18 [DEBUG] [gold_ai2025.StrategyConfig] Initializing StrategyConfig with dict: {}
09:24:18 [INFO] [gold_ai2025.StrategyConfig] StrategyConfig initialized. Risk/Trade: 0.010, Max Hold: 24 bars, Kill DD: 20.00%
09:24:18 [DEBUG] [gold_ai2025.StrategyConfig]   Feature Eng Params: M15 EMA Fast=50, M1 Rolling Z Window=300
09:24:18 [DEBUG] [gold_ai2025.StrategyConfig]   Default Signal Thresh: GainZ=0.3, RSI Buy=50
09:24:18 [DEBUG] [gold_ai2025.StrategyConfig]   Dynamic TP2 Params: HighVolBoost=1.2, LotBoostMult=1.1
09:24:18 [INFO] [gold_ai2025.run_backtest_simulation_v34.Minimal.BUY] --- Starting Backtest Simulation (v4.9.23 - AI Studio Patch v4.9.1): Label='Minimal', Side='BUY', Fold=N/A ---
09:24:18 [WARNING] [gold_ai2025.run_backtest_simulation_v34.Minimal.BUY] [Minimal] RiskManager (risk_manager_obj) not provided. Initializing new one.
09:24:18 [INFO] [gold_ai2025.RiskManager] RiskManager initialized. Hard Kill DD: 20.00%, Soft Kill DD: 15.00%
09:24:18 [WARNING] [gold_ai2025.run_backtest_simulation_v34.Minimal.BUY] [Minimal] TradeManager (trade_manager_obj) not provided. Initializing new one.
09:24:18 [INFO] [gold_ai2025.TradeManager] TradeManager initialized. FE Cooldown: 240 min, FE Score: 1.0, FE Max Losses: 2
09:24:18 [INFO] [gold_ai2025.run_backtest_simulation_v34.Minimal.BUY] [Patch AI Studio v4.9.62+] Equity tracker history initialized as dict
09:24:18 [DEBUG] [gold_ai2025._predefine_result_columns_for_simulation] Predefining result columns in df_sim for label_suffix: _Minimal
09:24:18 [DEBUG] [gold_ai2025._predefine_result_columns_for_simulation] Finished predefining 44 columns for _Minimal.
09:24:18 [INFO] [gold_ai2025.run_backtest_simulation_v34.Minimal.BUY] [Minimal] Initializing simulation. Capital: $1000.00, Risk: 1.000%, MM Mode: balanced
09:24:18 [INFO] [gold_ai2025.run_backtest_simulation_v34.Minimal.BUY] [Minimal] Config: MaxHold=24, PTP En=True, ReEn=True, FE En=True
09:24:18 [INFO] [gold_ai2025.run_backtest_simulation_v34.Minimal.BUY] [Minimal] Initial KillSwitchState=False, InitialConsecLosses=0
09:24:18 [INFO] [gold_ai2025.run_backtest_simulation_v34.Minimal.BUY] Simulation loop finished for Minimal. Finalizing remaining orders...
09:24:18 [INFO] [gold_ai2025.run_backtest_simulation_v34.Minimal.BUY] Created trade log DataFrame for Minimal with 0 entries.
09:24:18 [INFO] [gold_ai2025.run_backtest_simulation_v34.Minimal.BUY]   (Finished) Minimal (BUY) simulation complete. Final Equity: $1000.00
09:24:18 [INFO] [gold_ai2025.run_backtest_simulation_v34.Minimal.BUY] [Patch AI Studio v4.9.62+] Fold summary: final equity=1000.00, len(history)=1, trade_log=0
PASSED                                                                   [ 24%]
test_gold_ai.py::TestEdgeCases::test_safe_load_csv_auto_empty_file 
-------------------------------- live log call ---------------------------------
09:24:18 [INFO] [gold_ai2025.safe_load_csv_auto] [Patch][QA v4.9.85] (safe_load) Attempting to load: empty.csv
09:24:18 [DEBUG] [gold_ai2025.safe_load_csv_auto] [Patch][QA v4.9.85] No .gz extension, using standard pd.read_csv.
09:24:18 [WARNING] [gold_ai2025.safe_load_csv_auto] [Patch][QA v4.9.85] (Warning) File is empty: empty.csv
PASSED                                                                   [ 24%]
test_gold_ai.py::TestEdgeCases::test_safe_load_csv_auto_gz_corrupt 
-------------------------------- live log call ---------------------------------
09:24:18 [INFO] [gold_ai2025.safe_load_csv_auto] [Patch][QA v4.9.85] (safe_load) Attempting to load: corrupt.csv.gz
09:24:18 [DEBUG] [gold_ai2025.safe_load_csv_auto] [Patch][QA v4.9.85] Detected .gz extension, using gzip for file 'corrupt.csv.gz'
09:24:18 [ERROR] [gold_ai2025.safe_load_csv_auto] [Patch][QA v4.9.85] (Error) Failed to load file 'corrupt.csv.gz': OSError('gzip error')
PASSED                                                                   [ 25%]
test_gold_ai.py::TestEdgeCases::test_safe_load_csv_auto_invalid_path_type 
-------------------------------- live log call ---------------------------------
09:24:18 [ERROR] [gold_ai2025.safe_load_csv_auto] [Patch][QA v4.9.100] (Error) Invalid file path provided to safe_load_csv_auto.
09:24:18 [ERROR] [gold_ai2025.safe_load_csv_auto] [Patch][QA v4.9.100] (Error) Invalid file path provided to safe_load_csv_auto.
PASSED                                                                   [ 25%]
test_gold_ai.py::TestEdgeCases::test_set_thai_font_fallback_no_match 
-------------------------------- live log call ---------------------------------
09:24:18 [DEBUG] [gold_ai2025.set_thai_font] [Patch][QA v4.9.91+] Font 'NoFont' not found: no font
09:24:18 [DEBUG] [gold_ai2025.set_thai_font] [Patch][QA v4.9.91+] Font 'TH Sarabun New' not found: no font
09:24:18 [DEBUG] [gold_ai2025.set_thai_font] [Patch][QA v4.9.91+] Font 'THSarabunNew' not found: no font
09:24:18 [DEBUG] [gold_ai2025.set_thai_font] [Patch][QA v4.9.91+] Font 'Garuda' not found: no font
09:24:18 [DEBUG] [gold_ai2025.set_thai_font] [Patch][QA v4.9.91+] Font 'Norasi' not found: no font
09:24:18 [DEBUG] [gold_ai2025.set_thai_font] [Patch][QA v4.9.91+] Font 'Kinnari' not found: no font
09:24:18 [DEBUG] [gold_ai2025.set_thai_font] [Patch][QA v4.9.91+] Font 'Waree' not found: no font
09:24:18 [DEBUG] [gold_ai2025.set_thai_font] [Patch][QA v4.9.91+] Font 'Laksaman' not found: no font
09:24:18 [DEBUG] [gold_ai2025.set_thai_font] [Patch][QA v4.9.91+] Font 'Loma' not found: no font
09:24:18 [WARNING] [gold_ai2025.set_thai_font] [Patch][QA v4.9.91+] No Thai fonts found in: ['NoFont', 'TH Sarabun New', 'THSarabunNew', 'Garuda', 'Norasi', 'Kinnari', 'Waree', 'Laksaman', 'Loma']. Fallback to DejaVu Sans.
PASSED                                                                   [ 26%]
test_gold_ai.py::TestEdgeCases::test_setup_output_directory_permission_error 
-------------------------------- live log call ---------------------------------
09:24:18 [INFO] [gold_ai2025.setup_output_directory]    (Setup) กำลังตรวจสอบ/สร้าง Output Directory: /content/drive/MyDrive/new/unwritable
09:24:18 [ERROR] [gold_ai2025.setup_output_directory]    (Error) ไม่สามารถสร้างหรือเข้าถึง Output Directory '/content/drive/MyDrive/new/unwritable': Read-only file system
Traceback (most recent call last):
  File "/content/drive/MyDrive/new/gold_ai2025.py", line 1275, in setup_output_directory
    try:
        ^
  File "/usr/lib/python3.11/unittest/mock.py", line 1124, in __call__
    return self._mock_call(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.11/unittest/mock.py", line 1128, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.11/unittest/mock.py", line 1183, in _execute_mock_call
    raise effect
PermissionError: Read-only file system
PASSED                                                                   [ 27%]
test_gold_ai.py::TestEdgeCases::test_simple_converter_edge_cases 
-------------------------------- live log call ---------------------------------
09:24:18 [DEBUG] [gold_ai2025.simple_converter] Type <class 'set'> not directly serializable. Converting to string: '{1, 2}...'
09:24:18 [DEBUG] [gold_ai2025.simple_converter] Type <class 'complex'> not directly serializable. Converting to string: '(2+3j)...'
PASSED                                                                   [ 27%]
test_gold_ai.py::TestEdgeCases::test_simulate_trades_indicator_guard 
-------------------------------- live log call ---------------------------------
09:24:18 [DEBUG] [gold_ai2025.StrategyConfig] Initializing StrategyConfig with dict: {}
09:24:18 [INFO] [gold_ai2025.StrategyConfig] StrategyConfig initialized. Risk/Trade: 0.010, Max Hold: 24 bars, Kill DD: 20.00%
09:24:18 [DEBUG] [gold_ai2025.StrategyConfig]   Feature Eng Params: M15 EMA Fast=50, M1 Rolling Z Window=300
09:24:18 [DEBUG] [gold_ai2025.StrategyConfig]   Default Signal Thresh: GainZ=0.3, RSI Buy=50
09:24:18 [DEBUG] [gold_ai2025.StrategyConfig]   Dynamic TP2 Params: HighVolBoost=1.2, LotBoostMult=1.1
09:24:18 [INFO] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.26] simulate_trades start
09:24:18 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.70+] ATR undefined, using NaN fallback.
09:24:18 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.70+] MACD undefined, using NaN fallback.
09:24:18 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.70+] RSI undefined, using default 50.
09:24:18 [INFO] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.73+] [Patch] Forced Entry Audit: 0 forced entries logged: []
09:24:18 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.63+] Returning tuple for legacy/test compatibility
PASSED                                                                   [ 28%]
test_gold_ai.py::TestEdgeCases::test_simulate_trades_minimal 
-------------------------------- live log call ---------------------------------
09:24:18 [DEBUG] [gold_ai2025.StrategyConfig] Initializing StrategyConfig with dict: {'risk_per_trade': 0.01}
09:24:18 [INFO] [gold_ai2025.StrategyConfig] StrategyConfig initialized. Risk/Trade: 0.010, Max Hold: 24 bars, Kill DD: 20.00%
09:24:18 [DEBUG] [gold_ai2025.StrategyConfig]   Feature Eng Params: M15 EMA Fast=50, M1 Rolling Z Window=300
09:24:18 [DEBUG] [gold_ai2025.StrategyConfig]   Default Signal Thresh: GainZ=0.3, RSI Buy=50
09:24:18 [DEBUG] [gold_ai2025.StrategyConfig]   Dynamic TP2 Params: HighVolBoost=1.2, LotBoostMult=1.1
09:24:18 [INFO] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.26] simulate_trades start
09:24:18 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.70+] ATR undefined, using NaN fallback.
09:24:18 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.70+] MACD undefined, using NaN fallback.
09:24:18 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.70+] RSI undefined, using default 50.
09:24:18 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.28] Triggered BE-SL: OrderIdx:0, Side:BUY, Entry:1800.0, Exit:1795.0, PNL:0.0
09:24:18 [INFO] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.73+] [Patch] Forced Entry Audit: 0 forced entries logged: []
09:24:18 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.63+] Returning tuple for legacy/test compatibility
PASSED                                                                   [ 28%]
test_gold_ai.py::TestEdgeCases::test_simulate_trades_tp1_sl 
-------------------------------- live log call ---------------------------------
09:24:18 [DEBUG] [gold_ai2025.StrategyConfig] Initializing StrategyConfig with dict: {'risk_per_trade': 0.01}
09:24:18 [INFO] [gold_ai2025.StrategyConfig] StrategyConfig initialized. Risk/Trade: 0.010, Max Hold: 24 bars, Kill DD: 20.00%
09:24:18 [DEBUG] [gold_ai2025.StrategyConfig]   Feature Eng Params: M15 EMA Fast=50, M1 Rolling Z Window=300
09:24:18 [DEBUG] [gold_ai2025.StrategyConfig]   Default Signal Thresh: GainZ=0.3, RSI Buy=50
09:24:18 [DEBUG] [gold_ai2025.StrategyConfig]   Dynamic TP2 Params: HighVolBoost=1.2, LotBoostMult=1.1
09:24:18 [INFO] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.26] simulate_trades start
09:24:18 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.70+] ATR undefined, using NaN fallback.
09:24:18 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.70+] MACD undefined, using NaN fallback.
09:24:18 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.70+] RSI undefined, using default 50.
09:24:18 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.28] Triggered BE-SL: OrderIdx:0, Side:BUY, Entry:1000.0, Exit:999.0, PNL:0.0
09:24:18 [INFO] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.73+] [Patch] Forced Entry Audit: 0 forced entries logged: []
09:24:18 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.63+] Returning tuple for legacy/test compatibility
PASSED                                                                   [ 29%]
test_gold_ai.py::TestEdgeCases::test_simulate_trades_tsl_behavior 
-------------------------------- live log call ---------------------------------
09:24:18 [DEBUG] [gold_ai2025.StrategyConfig] Initializing StrategyConfig with dict: {'risk_per_trade': 0.01, 'use_tsl': True, 'trailing_sl_distance': 1.5}
09:24:18 [INFO] [gold_ai2025.StrategyConfig] StrategyConfig initialized. Risk/Trade: 0.010, Max Hold: 24 bars, Kill DD: 20.00%
09:24:18 [DEBUG] [gold_ai2025.StrategyConfig]   Feature Eng Params: M15 EMA Fast=50, M1 Rolling Z Window=300
09:24:18 [DEBUG] [gold_ai2025.StrategyConfig]   Default Signal Thresh: GainZ=0.3, RSI Buy=50
09:24:18 [DEBUG] [gold_ai2025.StrategyConfig]   Dynamic TP2 Params: HighVolBoost=1.2, LotBoostMult=1.1
09:24:18 [INFO] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.26] simulate_trades start
09:24:18 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.70+] ATR undefined, using NaN fallback.
09:24:18 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.70+] MACD undefined, using NaN fallback.
09:24:18 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.70+] RSI undefined, using default 50.
09:24:18 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.28] Triggered BE-SL: OrderIdx:0, Side:BUY, Entry:1000.0, Exit:999, PNL:0.0
09:24:18 [INFO] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.73+] [Patch] Forced Entry Audit: 0 forced entries logged: []
09:24:18 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.63+] Returning tuple for legacy/test compatibility
PASSED                                                                   [ 29%]
test_gold_ai.py::TestEdgeCases::test_strategy_config_custom_values 
-------------------------------- live log call ---------------------------------
09:24:18 [DEBUG] [gold_ai2025.StrategyConfig] Initializing StrategyConfig with dict: {'risk_per_trade': 0.02, 'max_lot': 10.0, 'kill_switch_dd': 0.25, 'enable_spike_guard': False}
09:24:18 [INFO] [gold_ai2025.StrategyConfig] StrategyConfig initialized. Risk/Trade: 0.020, Max Hold: 24 bars, Kill DD: 25.00%
09:24:18 [DEBUG] [gold_ai2025.StrategyConfig]   Feature Eng Params: M15 EMA Fast=50, M1 Rolling Z Window=300
09:24:18 [DEBUG] [gold_ai2025.StrategyConfig]   Default Signal Thresh: GainZ=0.3, RSI Buy=50
09:24:18 [DEBUG] [gold_ai2025.StrategyConfig]   Dynamic TP2 Params: HighVolBoost=1.2, LotBoostMult=1.1
PASSED                                                                   [ 30%]
test_gold_ai.py::TestEdgeCases::test_try_import_install_success_no_version 
-------------------------------- live log call ---------------------------------
09:24:18 [WARNING] [gold_ai2025.try_import_with_install] ไม่พบ Library: NOVERS. กำลังพยายามติดตั้ง...
09:24:18 [INFO] [gold_ai2025.try_import_with_install]    ติดตั้ง NOVERS สำเร็จ (pip stdout): <MagicMock name='run().stdout.__getitem__()' id='140237139385296'>...
09:24:18 [INFO] [gold_ai2025.try_import_with_install] [Patch] Successfully installed and imported NOVERS.
PASSED                                                                   [ 30%]
test_gold_ai.py::TestWFVandLotSizing::test_calculate_lot_by_fund_mode_bounds 
-------------------------------- live log setup --------------------------------
09:24:18 [INFO] [gold_ai2025.Part2_DeprecatedParams] Part 2: Core Parameters & Strategy Settings (DEPRECATED - Parameters now in StrategyConfig from YAML).
09:24:18 [WARNING] [gold_ai2025.Part2_DeprecatedParams] Part 2: Is DEPRECATED. All tunable strategy parameters should be managed by StrategyConfig.
09:24:18 [INFO] [gold_ai2025.Part2_DeprecatedParams] Any true constants (e.g., for feature engineering) will be defined in their relevant sections or Part 1.
09:24:18 [INFO] [gold_ai2025.MLHelpers] Loading Machine Learning Configuration & Helpers (v4.9.13 - Refined Model Switcher)...
09:24:18 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_CLASSIFIER (L1 Filter): True
09:24:18 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_META_CLASSIFIER (L2 Filter): False
09:24:18 [INFO] [gold_ai2025.MLHelpers]   Initial Optuna Hyperparameter Tuning Enabled: False
09:24:18 [INFO] [gold_ai2025.MLHelpers]   Initial Auto Threshold Tuning Enabled: False
09:24:18 [INFO] [gold_ai2025.MT5Connector] Loading Part 12: MT5 Connector (Placeholder)...
09:24:18 [INFO] [gold_ai2025.MT5Connector] Part 12: MT5 Connector (Placeholder) Loaded.
09:24:18 [DEBUG] [gold_ai2025.Part14_FutureAdditions] Part 14: Placeholder for Future Additions reached.
09:24:18 [INFO] [gold_ai2025.Part15_EndOfScript] Reached End of Part 15 (Definitive End of Script Marker). Gold AI script processing complete.
-------------------------------- live log call ---------------------------------
09:24:18 [DEBUG] [gold_ai2025.StrategyConfig] Initializing StrategyConfig with dict: {'min_lot': 0.01, 'max_lot': 0.1, 'point_value': 0.1}
09:24:18 [INFO] [gold_ai2025.StrategyConfig] StrategyConfig initialized. Risk/Trade: 0.010, Max Hold: 24 bars, Kill DD: 20.00%
09:24:18 [DEBUG] [gold_ai2025.StrategyConfig]   Feature Eng Params: M15 EMA Fast=50, M1 Rolling Z Window=300
09:24:18 [DEBUG] [gold_ai2025.StrategyConfig]   Default Signal Thresh: GainZ=0.3, RSI Buy=50
09:24:18 [DEBUG] [gold_ai2025.StrategyConfig]   Dynamic TP2 Params: HighVolBoost=1.2, LotBoostMult=1.1
09:24:18 [DEBUG] [gold_ai2025.calculate_lot_by_fund_mode] Calculating lot: MM Mode='balanced', Risk%=0.0200, Equity=$50000.00, ATR=1.00000, SL Delta Price=1.00000
09:24:18 [DEBUG] [gold_ai2025.calculate_lot_by_fund_mode]    Risk USD for trade: $1000.00
09:24:18 [DEBUG] [gold_ai2025.calculate_lot_by_fund_mode]    Total risk in USD for one min_lot (0.01) with SL $1.00: $0.10000
09:24:18 [DEBUG] [gold_ai2025.calculate_lot_by_fund_mode]    Raw lot size calculated (num_min_lots * min_lot): 100.0000
09:24:18 [DEBUG] [gold_ai2025.calculate_lot_by_fund_mode]    Adjusted lot (balanced, no change from raw): 100.0000
09:24:18 [DEBUG] [gold_ai2025.calculate_lot_by_fund_mode]    Lot after rounding down to min_lot multiple: 100.0000
09:24:18 [DEBUG] [gold_ai2025.calculate_lot_by_fund_mode]    Lot after min/max capping: 0.1000
09:24:18 [INFO] [gold_ai2025.calculate_lot_by_fund_mode]    [LotCalc] Final Lot Size: 0.10 (MM Mode: 'balanced', Risk: 2.00%, Equity: $50000)
09:24:18 [DEBUG] [gold_ai2025.calculate_lot_by_fund_mode] Calculating lot: MM Mode='balanced', Risk%=0.0200, Equity=$0.00, ATR=1.00000, SL Delta Price=1.00000
09:24:18 [WARNING] [gold_ai2025.calculate_lot_by_fund_mode] Equity is zero or negative. Returning min_lot.
09:24:18 [DEBUG] [gold_ai2025.calculate_lot_by_fund_mode] Calculating lot: MM Mode='balanced', Risk%=0.0200, Equity=$1000.00, ATR=1.00000, SL Delta Price=0.00000
09:24:18 [WARNING] [gold_ai2025.calculate_lot_by_fund_mode] SL delta price is near zero (0.00000). Returning min_lot.
PASSED                                                                   [ 31%]
test_gold_ai.py::TestWFVandLotSizing::test_run_all_folds_with_threshold_mocked 
-------------------------------- live log call ---------------------------------
09:24:18 [DEBUG] [gold_ai2025.StrategyConfig] Initializing StrategyConfig with dict: {'n_walk_forward_splits': 2, 'initial_capital': 100.0}
09:24:18 [INFO] [gold_ai2025.StrategyConfig] StrategyConfig initialized. Risk/Trade: 0.010, Max Hold: 24 bars, Kill DD: 20.00%
09:24:18 [DEBUG] [gold_ai2025.StrategyConfig]   Feature Eng Params: M15 EMA Fast=50, M1 Rolling Z Window=300
09:24:18 [DEBUG] [gold_ai2025.StrategyConfig]   Default Signal Thresh: GainZ=0.3, RSI Buy=50
09:24:18 [DEBUG] [gold_ai2025.StrategyConfig]   Dynamic TP2 Params: HighVolBoost=1.2, LotBoostMult=1.1
09:24:18 [INFO] [gold_ai2025.RiskManager] RiskManager initialized. Hard Kill DD: 20.00%, Soft Kill DD: 15.00%
09:24:18 [INFO] [gold_ai2025.TradeManager] TradeManager initialized. FE Cooldown: 240 min, FE Score: 1.0, FE Max Losses: 2
09:24:18 [INFO] [gold_ai2025.run_all_folds_with_threshold]       [Runner (Prep Data - Fund: FALLBACK_FUND)] Starting Full WF Sim (L1_Th=0.55) for 2 folds.
09:24:18 [INFO] [gold_ai2025.run_all_folds_with_threshold]    RiskManager and TradeManager states reset for WFV execution of Fund: FALLBACK_FUND
09:24:18 [INFO] [gold_ai2025.run_all_folds_with_threshold] 
--- Processing Fold_1_FALLBACK_FUND (Train size: 2, Test size: 1) ---
09:24:18 [INFO] [gold_ai2025.run_all_folds_with_threshold]    Using Gain_Z Threshold for Fold_1_FALLBACK_FUND: 0.300
09:24:18 [INFO] [gold_ai2025.run_all_folds_with_threshold]    Calculating entry signals for Fold_1_FALLBACK_FUND using its specific fold_config...
09:24:18 [DEBUG] [gold_ai2025.run_all_folds_with_threshold]    Test data for Fold_1_FALLBACK_FUND after signal calculation: (1, 13)
09:24:18 [INFO] [gold_ai2025.run_all_folds_with_threshold]    Simulating BUY for Fold_1_FALLBACK_FUND...
09:24:18 [INFO] [gold_ai2025.calculate_metrics.Fold_1_FALLBACK_FUND BUY]   (Metrics) Calculating full metrics for: 'Fold_1_FALLBACK_FUND BUY'...
09:24:18 [INFO] [gold_ai2025.calculate_metrics.Fold_1_FALLBACK_FUND BUY]   (Metrics) Finished calculating full metrics for: 'Fold_1_FALLBACK_FUND BUY'.
09:24:18 [INFO] [gold_ai2025.run_all_folds_with_threshold]    Finished BUY for Fold_1_FALLBACK_FUND. Final Equity: $101.00, Trades: 1
09:24:18 [INFO] [gold_ai2025.run_all_folds_with_threshold]    Simulating SELL for Fold_1_FALLBACK_FUND...
09:24:18 [INFO] [gold_ai2025.calculate_metrics.Fold_1_FALLBACK_FUND SELL]   (Metrics) Calculating full metrics for: 'Fold_1_FALLBACK_FUND SELL'...
09:24:18 [INFO] [gold_ai2025.calculate_metrics.Fold_1_FALLBACK_FUND SELL]   (Metrics) Finished calculating full metrics for: 'Fold_1_FALLBACK_FUND SELL'.
09:24:18 [INFO] [gold_ai2025.run_all_folds_with_threshold]    Finished SELL for Fold_1_FALLBACK_FUND. Final Equity: $101.00, Trades: 1
09:24:18 [INFO] [gold_ai2025.run_all_folds_with_threshold] 
--- Processing Fold_2_FALLBACK_FUND (Train size: 3, Test size: 1) ---
09:24:18 [INFO] [gold_ai2025.run_all_folds_with_threshold]    Using Gain_Z Threshold for Fold_2_FALLBACK_FUND: 0.300
09:24:18 [INFO] [gold_ai2025.run_all_folds_with_threshold]    Calculating entry signals for Fold_2_FALLBACK_FUND using its specific fold_config...
09:24:18 [DEBUG] [gold_ai2025.run_all_folds_with_threshold]    Test data for Fold_2_FALLBACK_FUND after signal calculation: (1, 13)
09:24:18 [INFO] [gold_ai2025.run_all_folds_with_threshold]    Simulating BUY for Fold_2_FALLBACK_FUND...
09:24:18 [INFO] [gold_ai2025.calculate_metrics.Fold_2_FALLBACK_FUND BUY]   (Metrics) Calculating full metrics for: 'Fold_2_FALLBACK_FUND BUY'...
09:24:18 [INFO] [gold_ai2025.calculate_metrics.Fold_2_FALLBACK_FUND BUY]   (Metrics) Finished calculating full metrics for: 'Fold_2_FALLBACK_FUND BUY'.
09:24:18 [INFO] [gold_ai2025.run_all_folds_with_threshold]    Finished BUY for Fold_2_FALLBACK_FUND. Final Equity: $102.00, Trades: 1
09:24:18 [INFO] [gold_ai2025.run_all_folds_with_threshold]    Simulating SELL for Fold_2_FALLBACK_FUND...
09:24:18 [INFO] [gold_ai2025.calculate_metrics.Fold_2_FALLBACK_FUND SELL]   (Metrics) Calculating full metrics for: 'Fold_2_FALLBACK_FUND SELL'...
09:24:19 [INFO] [gold_ai2025.calculate_metrics.Fold_2_FALLBACK_FUND SELL]   (Metrics) Finished calculating full metrics for: 'Fold_2_FALLBACK_FUND SELL'.
09:24:19 [INFO] [gold_ai2025.run_all_folds_with_threshold]    Finished SELL for Fold_2_FALLBACK_FUND. Final Equity: $102.00, Trades: 1
09:24:19 [INFO] [gold_ai2025.run_all_folds_with_threshold] 
--- Completed All 2 Folds for Fund: FALLBACK_FUND ---
09:24:19 [INFO] [gold_ai2025.calculate_metrics.Overall WF Buy (FALLBACK_FUND)]   (Metrics) Calculating full metrics for: 'Overall WF Buy (FALLBACK_FUND)'...
09:24:19 [INFO] [gold_ai2025.calculate_metrics.Overall WF Buy (FALLBACK_FUND)]   (Metrics) Finished calculating full metrics for: 'Overall WF Buy (FALLBACK_FUND)'.
09:24:19 [INFO] [gold_ai2025.calculate_metrics.Overall WF Sell (FALLBACK_FUND)]   (Metrics) Calculating full metrics for: 'Overall WF Sell (FALLBACK_FUND)'...
09:24:19 [INFO] [gold_ai2025.calculate_metrics.Overall WF Sell (FALLBACK_FUND)]   (Metrics) Finished calculating full metrics for: 'Overall WF Sell (FALLBACK_FUND)'.
09:24:19 [INFO] [gold_ai2025.run_all_folds_with_threshold] --- Finished WFV Simulation for Fund: FALLBACK_FUND ---
PASSED                                                                   [ 31%]
test_gold_ai.py::TestWFVandLotSizing::test_run_wfv_multi_fold_plot_backend 
-------------------------------- live log call ---------------------------------
09:24:19 [DEBUG] [gold_ai2025.StrategyConfig] Initializing StrategyConfig with dict: {}
09:24:19 [INFO] [gold_ai2025.StrategyConfig] StrategyConfig initialized. Risk/Trade: 0.010, Max Hold: 24 bars, Kill DD: 20.00%
09:24:19 [DEBUG] [gold_ai2025.StrategyConfig]   Feature Eng Params: M15 EMA Fast=50, M1 Rolling Z Window=300
09:24:19 [DEBUG] [gold_ai2025.StrategyConfig]   Default Signal Thresh: GainZ=0.3, RSI Buy=50
09:24:19 [DEBUG] [gold_ai2025.StrategyConfig]   Dynamic TP2 Params: HighVolBoost=1.2, LotBoostMult=1.1
09:24:19 [INFO] [gold_ai2025.plot_equity_curve.demo] 
--- (Plotting) Plotting Equity Curve: Unit Test ---
PASSED                                                                   [ 32%]
test_gold_ai.py::TestWFVandLotSizing::test_simulate_trades_multi_order_with_reentry 
-------------------------------- live log call ---------------------------------
09:24:19 [DEBUG] [gold_ai2025.StrategyConfig] Initializing StrategyConfig with dict: {'use_reentry': True, 'reentry_cooldown_bars': 0, 'reentry_cooldown_after_tp_minutes': 0, 'initial_capital': 100.0}
09:24:19 [INFO] [gold_ai2025.StrategyConfig] StrategyConfig initialized. Risk/Trade: 0.010, Max Hold: 24 bars, Kill DD: 20.00%
09:24:19 [DEBUG] [gold_ai2025.StrategyConfig]   Feature Eng Params: M15 EMA Fast=50, M1 Rolling Z Window=300
09:24:19 [DEBUG] [gold_ai2025.StrategyConfig]   Default Signal Thresh: GainZ=0.3, RSI Buy=50
09:24:19 [DEBUG] [gold_ai2025.StrategyConfig]   Dynamic TP2 Params: HighVolBoost=1.2, LotBoostMult=1.1
09:24:19 [INFO] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.26] simulate_trades start
09:24:19 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.70+] ATR undefined, using NaN fallback.
09:24:19 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.70+] MACD undefined, using NaN fallback.
09:24:19 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.70+] RSI undefined, using default 50.
09:24:19 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.28] Triggered BE-SL: OrderIdx:0, Side:BUY, Entry:1000.0, Exit:1000.0, PNL:0.0
09:24:19 [INFO] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.73+] [Patch] Forced Entry Audit: 0 forced entries logged: []
09:24:19 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.63+] Returning tuple for legacy/test compatibility
PASSED                                                                   [ 32%]
test_gold_ai.py::TestTP2AndBESL::test_besl_trigger 
-------------------------------- live log setup --------------------------------
09:24:19 [INFO] [gold_ai2025.Part2_DeprecatedParams] Part 2: Core Parameters & Strategy Settings (DEPRECATED - Parameters now in StrategyConfig from YAML).
09:24:19 [WARNING] [gold_ai2025.Part2_DeprecatedParams] Part 2: Is DEPRECATED. All tunable strategy parameters should be managed by StrategyConfig.
09:24:19 [INFO] [gold_ai2025.Part2_DeprecatedParams] Any true constants (e.g., for feature engineering) will be defined in their relevant sections or Part 1.
09:24:19 [INFO] [gold_ai2025.MLHelpers] Loading Machine Learning Configuration & Helpers (v4.9.13 - Refined Model Switcher)...
09:24:19 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_CLASSIFIER (L1 Filter): True
09:24:19 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_META_CLASSIFIER (L2 Filter): False
09:24:19 [INFO] [gold_ai2025.MLHelpers]   Initial Optuna Hyperparameter Tuning Enabled: False
09:24:19 [INFO] [gold_ai2025.MLHelpers]   Initial Auto Threshold Tuning Enabled: False
09:24:19 [INFO] [gold_ai2025.MT5Connector] Loading Part 12: MT5 Connector (Placeholder)...
09:24:19 [INFO] [gold_ai2025.MT5Connector] Part 12: MT5 Connector (Placeholder) Loaded.
09:24:19 [DEBUG] [gold_ai2025.Part14_FutureAdditions] Part 14: Placeholder for Future Additions reached.
09:24:19 [INFO] [gold_ai2025.Part15_EndOfScript] Reached End of Part 15 (Definitive End of Script Marker). Gold AI script processing complete.
-------------------------------- live log call ---------------------------------
09:24:19 [DEBUG] [gold_ai2025.StrategyConfig] Initializing StrategyConfig with dict: {'risk_per_trade': 0.01, 'base_tp_multiplier': 1.5, 'base_be_sl_r_threshold': 1.0, 'default_sl_multiplier': 1.0, 'enable_be_sl': True, 'enable_partial_tp': False}
09:24:19 [INFO] [gold_ai2025.StrategyConfig] StrategyConfig initialized. Risk/Trade: 0.010, Max Hold: 24 bars, Kill DD: 20.00%
09:24:19 [DEBUG] [gold_ai2025.StrategyConfig]   Feature Eng Params: M15 EMA Fast=50, M1 Rolling Z Window=300
09:24:19 [DEBUG] [gold_ai2025.StrategyConfig]   Default Signal Thresh: GainZ=0.3, RSI Buy=50
09:24:19 [DEBUG] [gold_ai2025.StrategyConfig]   Dynamic TP2 Params: HighVolBoost=1.2, LotBoostMult=1.1
09:24:19 [INFO] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.26] simulate_trades start
09:24:19 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.70+] ATR undefined, using NaN fallback.
09:24:19 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.70+] MACD undefined, using NaN fallback.
09:24:19 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.70+] RSI undefined, using default 50.
09:24:19 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.28] Triggered BE-SL: OrderIdx:0, Side:BUY, Entry:1000.0, Exit:995, PNL:0.0
09:24:19 [INFO] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.73+] [Patch] Forced Entry Audit: 0 forced entries logged: []
09:24:19 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.63+] Returning tuple for legacy/test compatibility
PASSED                                                                   [ 33%]
test_gold_ai.py::TestTP2AndBESL::test_load_trade_log_success_and_missing 
-------------------------------- live log call ---------------------------------
09:24:19 [INFO] [gold_ai2025.load_trade_log]    (Log Analysis) Attempting to load trade log: /tmp/tl.csv
09:24:19 [INFO] [gold_ai2025.load_trade_log]       Successfully loaded trade log with 2 entries.
09:24:19 [INFO] [gold_ai2025.load_trade_log]    (Log Analysis) Attempting to load trade log: /tmp/tl.csv
09:24:19 [WARNING] [gold_ai2025.load_trade_log]       Trade log file not found.
PASSED                                                                   [ 34%]
test_gold_ai.py::TestTP2AndBESL::test_partial_tp2_trigger 
-------------------------------- live log call ---------------------------------
09:24:19 [DEBUG] [gold_ai2025.StrategyConfig] Initializing StrategyConfig with dict: {'risk_per_trade': 0.01, 'enable_partial_tp': True, 'partial_tp_levels': [{'r_multiple': 0.8, 'close_pct': 0.5}, {'r_multiple': 1.2, 'close_pct': 0.5}], 'partial_tp_move_sl_to_entry': False, 'base_tp_multiplier': 2.0, 'default_sl_multiplier': 1.0}
09:24:19 [INFO] [gold_ai2025.StrategyConfig] StrategyConfig initialized. Risk/Trade: 0.010, Max Hold: 24 bars, Kill DD: 20.00%
09:24:19 [DEBUG] [gold_ai2025.StrategyConfig]   Feature Eng Params: M15 EMA Fast=50, M1 Rolling Z Window=300
09:24:19 [DEBUG] [gold_ai2025.StrategyConfig]   Default Signal Thresh: GainZ=0.3, RSI Buy=50
09:24:19 [DEBUG] [gold_ai2025.StrategyConfig]   Dynamic TP2 Params: HighVolBoost=1.2, LotBoostMult=1.1
09:24:19 [INFO] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.26] simulate_trades start
09:24:19 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.70+] ATR undefined, using NaN fallback.
09:24:19 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.70+] MACD undefined, using NaN fallback.
09:24:19 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.70+] RSI undefined, using default 50.
09:24:19 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.28] Triggered BE-SL: OrderIdx:0, Side:BUY, Entry:1000.0, Exit:999, PNL:0.0
09:24:19 [INFO] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.73+] [Patch] Forced Entry Audit: 0 forced entries logged: []
09:24:19 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.63+] Returning tuple for legacy/test compatibility
PASSED                                                                   [ 34%]
test_gold_ai.py::TestTP2AndBESL::test_simulate_trades_tsl_tp_be_sl 
-------------------------------- live log call ---------------------------------
09:24:19 [DEBUG] [gold_ai2025.StrategyConfig] Initializing StrategyConfig with dict: {'risk_per_trade': 0.01, 'use_tsl': True, 'trailing_sl_distance': 1.5, 'base_tp_multiplier': 1.5, 'default_sl_multiplier': 1.0, 'base_be_sl_r_threshold': 1.0, 'enable_partial_tp': True, 'partial_tp_levels': [{'r_multiple': 0.5, 'close_pct': 0.5}], 'partial_tp_move_sl_to_entry': True}
09:24:19 [INFO] [gold_ai2025.StrategyConfig] StrategyConfig initialized. Risk/Trade: 0.010, Max Hold: 24 bars, Kill DD: 20.00%
09:24:19 [DEBUG] [gold_ai2025.StrategyConfig]   Feature Eng Params: M15 EMA Fast=50, M1 Rolling Z Window=300
09:24:19 [DEBUG] [gold_ai2025.StrategyConfig]   Default Signal Thresh: GainZ=0.3, RSI Buy=50
09:24:19 [DEBUG] [gold_ai2025.StrategyConfig]   Dynamic TP2 Params: HighVolBoost=1.2, LotBoostMult=1.1
09:24:19 [INFO] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.26] simulate_trades start
09:24:19 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.70+] ATR undefined, using NaN fallback.
09:24:19 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.70+] MACD undefined, using NaN fallback.
09:24:19 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.70+] RSI undefined, using default 50.
09:24:19 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.28] Triggered BE-SL: OrderIdx:0, Side:BUY, Entry:1000.0, Exit:999, PNL:0.0
09:24:19 [INFO] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.73+] [Patch] Forced Entry Audit: 0 forced entries logged: []
09:24:19 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.63+] Returning tuple for legacy/test compatibility
PASSED                                                                   [ 35%]
test_gold_ai.py::TestTP2AndBESL::test_simulate_trades_with_kill_switch_activation 
-------------------------------- live log call ---------------------------------
09:24:19 [DEBUG] [gold_ai2025.StrategyConfig] Initializing StrategyConfig with dict: {'risk_per_trade': 0.5, 'initial_capital': 10.0, 'kill_switch_dd': 0.1, 'kill_switch_consecutive_losses': 1, 'recovery_mode_consecutive_losses': 1}
09:24:19 [INFO] [gold_ai2025.StrategyConfig] StrategyConfig initialized. Risk/Trade: 0.500, Max Hold: 24 bars, Kill DD: 10.00%
09:24:19 [DEBUG] [gold_ai2025.StrategyConfig]   Feature Eng Params: M15 EMA Fast=50, M1 Rolling Z Window=300
09:24:19 [DEBUG] [gold_ai2025.StrategyConfig]   Default Signal Thresh: GainZ=0.3, RSI Buy=50
09:24:19 [DEBUG] [gold_ai2025.StrategyConfig]   Dynamic TP2 Params: HighVolBoost=1.2, LotBoostMult=1.1
09:24:19 [INFO] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.26] simulate_trades start
09:24:19 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.70+] ATR undefined, using NaN fallback.
09:24:19 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.70+] MACD undefined, using NaN fallback.
09:24:19 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.70+] RSI undefined, using default 50.
09:24:19 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.26] Triggered SL: {'entry_idx': 0, 'entry_time': Timestamp('2023-01-01 00:00:00'), 'entry_price': 1000.0, 'stop_loss': 998.5, 'take_profit': 1002.7, 'side': 'BUY', 'Trade_Reason': 'test', '_forced_entry_flag': False, 'exit_price': 998.5, 'exit_reason': 'SL', 'exit_idx': 0, 'exit_time': Timestamp('2023-01-01 00:00:00'), 'pnl_usd_net': -1.5}
09:24:19 [INFO] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.26] Kill switch activated at bar 0
09:24:19 [INFO] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.73+] [Patch] Forced Entry Audit: 0 forced entries logged: []
09:24:19 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.63+] Returning tuple for legacy/test compatibility
PASSED                                                                   [ 35%]
test_gold_ai.py::TestWFVandLotSizingFix::test_multi_order_reentry_succeeds 
-------------------------------- live log setup --------------------------------
09:24:19 [INFO] [gold_ai2025.Part2_DeprecatedParams] Part 2: Core Parameters & Strategy Settings (DEPRECATED - Parameters now in StrategyConfig from YAML).
09:24:19 [WARNING] [gold_ai2025.Part2_DeprecatedParams] Part 2: Is DEPRECATED. All tunable strategy parameters should be managed by StrategyConfig.
09:24:19 [INFO] [gold_ai2025.Part2_DeprecatedParams] Any true constants (e.g., for feature engineering) will be defined in their relevant sections or Part 1.
09:24:19 [INFO] [gold_ai2025.MLHelpers] Loading Machine Learning Configuration & Helpers (v4.9.13 - Refined Model Switcher)...
09:24:19 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_CLASSIFIER (L1 Filter): True
09:24:19 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_META_CLASSIFIER (L2 Filter): False
09:24:19 [INFO] [gold_ai2025.MLHelpers]   Initial Optuna Hyperparameter Tuning Enabled: False
09:24:19 [INFO] [gold_ai2025.MLHelpers]   Initial Auto Threshold Tuning Enabled: False
09:24:19 [INFO] [gold_ai2025.MT5Connector] Loading Part 12: MT5 Connector (Placeholder)...
09:24:19 [INFO] [gold_ai2025.MT5Connector] Part 12: MT5 Connector (Placeholder) Loaded.
09:24:19 [DEBUG] [gold_ai2025.Part14_FutureAdditions] Part 14: Placeholder for Future Additions reached.
09:24:19 [INFO] [gold_ai2025.Part15_EndOfScript] Reached End of Part 15 (Definitive End of Script Marker). Gold AI script processing complete.
-------------------------------- live log call ---------------------------------
09:24:19 [DEBUG] [gold_ai2025.StrategyConfig] Initializing StrategyConfig with dict: {'use_reentry': True, 'reentry_cooldown_bars': 0, 'reentry_cooldown_after_tp_minutes': 0, 'initial_capital': 100.0, 'risk_per_trade': 0.01}
09:24:19 [INFO] [gold_ai2025.StrategyConfig] StrategyConfig initialized. Risk/Trade: 0.010, Max Hold: 24 bars, Kill DD: 20.00%
09:24:19 [DEBUG] [gold_ai2025.StrategyConfig]   Feature Eng Params: M15 EMA Fast=50, M1 Rolling Z Window=300
09:24:19 [DEBUG] [gold_ai2025.StrategyConfig]   Default Signal Thresh: GainZ=0.3, RSI Buy=50
09:24:19 [DEBUG] [gold_ai2025.StrategyConfig]   Dynamic TP2 Params: HighVolBoost=1.2, LotBoostMult=1.1
09:24:19 [INFO] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.26] simulate_trades start
09:24:19 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.70+] ATR undefined, using NaN fallback.
09:24:19 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.70+] MACD undefined, using NaN fallback.
09:24:19 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.70+] RSI undefined, using default 50.
09:24:19 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.28] Triggered BE-SL: OrderIdx:0, Side:BUY, Entry:1000.0, Exit:999.0, PNL:0.0
09:24:19 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.28] Triggered BE-SL: OrderIdx:2, Side:BUY, Entry:1003.0, Exit:1000.0, PNL:0.0
09:24:19 [INFO] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.73+] [Patch] Forced Entry Audit: 0 forced entries logged: []
09:24:19 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.63+] Returning tuple for legacy/test compatibility
PASSED                                                                   [ 36%]
test_gold_ai.py::TestWFVandLotSizingFix::test_simulate_trades_BE_SL_multi 
-------------------------------- live log call ---------------------------------
09:24:19 [DEBUG] [gold_ai2025.StrategyConfig] Initializing StrategyConfig with dict: {'use_reentry': True, 'reentry_cooldown_bars': 0, 'reentry_cooldown_after_tp_minutes': 0, 'initial_capital': 100.0, 'risk_per_trade': 0.01}
09:24:19 [INFO] [gold_ai2025.StrategyConfig] StrategyConfig initialized. Risk/Trade: 0.010, Max Hold: 24 bars, Kill DD: 20.00%
09:24:19 [DEBUG] [gold_ai2025.StrategyConfig]   Feature Eng Params: M15 EMA Fast=50, M1 Rolling Z Window=300
09:24:19 [DEBUG] [gold_ai2025.StrategyConfig]   Default Signal Thresh: GainZ=0.3, RSI Buy=50
09:24:19 [DEBUG] [gold_ai2025.StrategyConfig]   Dynamic TP2 Params: HighVolBoost=1.2, LotBoostMult=1.1
09:24:19 [INFO] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.26] simulate_trades start
09:24:19 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.70+] ATR undefined, using NaN fallback.
09:24:19 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.70+] MACD undefined, using NaN fallback.
09:24:19 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.70+] RSI undefined, using default 50.
09:24:19 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.28] Triggered BE-SL: OrderIdx:0, Side:BUY, Entry:1000.0, Exit:999, PNL:0.0
09:24:19 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.28] Triggered BE-SL: OrderIdx:1, Side:BUY, Entry:1002.0, Exit:1001, PNL:0.0
09:24:19 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.28] Triggered BE-SL: OrderIdx:2, Side:BUY, Entry:1004.0, Exit:1003, PNL:0.0
09:24:19 [INFO] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.73+] [Patch] Forced Entry Audit: 0 forced entries logged: []
09:24:19 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.63+] Returning tuple for legacy/test compatibility
PASSED                                                                   [ 36%]
test_gold_ai.py::TestWFVandLotSizingFix::test_simulate_trades_multi_order_strict 
-------------------------------- live log call ---------------------------------
09:24:19 [DEBUG] [gold_ai2025.StrategyConfig] Initializing StrategyConfig with dict: {'use_reentry': True, 'reentry_cooldown_bars': 0, 'reentry_cooldown_after_tp_minutes': 0, 'initial_capital': 100.0, 'risk_per_trade': 0.01}
09:24:19 [INFO] [gold_ai2025.StrategyConfig] StrategyConfig initialized. Risk/Trade: 0.010, Max Hold: 24 bars, Kill DD: 20.00%
09:24:19 [DEBUG] [gold_ai2025.StrategyConfig]   Feature Eng Params: M15 EMA Fast=50, M1 Rolling Z Window=300
09:24:19 [DEBUG] [gold_ai2025.StrategyConfig]   Default Signal Thresh: GainZ=0.3, RSI Buy=50
09:24:19 [DEBUG] [gold_ai2025.StrategyConfig]   Dynamic TP2 Params: HighVolBoost=1.2, LotBoostMult=1.1
09:24:19 [INFO] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.26] simulate_trades start
09:24:19 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.70+] ATR undefined, using NaN fallback.
09:24:19 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.70+] MACD undefined, using NaN fallback.
09:24:19 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.70+] RSI undefined, using default 50.
09:24:19 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.28] Triggered BE-SL: OrderIdx:0, Side:BUY, Entry:1000.0, Exit:999, PNL:0.0
09:24:19 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.28] Triggered BE-SL: OrderIdx:1, Side:BUY, Entry:1001.0, Exit:1000, PNL:0.0
09:24:19 [INFO] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.73+] [Patch] Forced Entry Audit: 0 forced entries logged: []
09:24:19 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.63+] Returning tuple for legacy/test compatibility
PASSED                                                                   [ 37%]
test_gold_ai.py::TestWFVandLotSizingFix::test_simulate_trades_multi_order_with_reentry_fixed 
-------------------------------- live log call ---------------------------------
09:24:19 [DEBUG] [gold_ai2025.StrategyConfig] Initializing StrategyConfig with dict: {'use_reentry': True, 'reentry_cooldown_bars': 0, 'reentry_cooldown_after_tp_minutes': 0, 'initial_capital': 100.0}
09:24:19 [INFO] [gold_ai2025.StrategyConfig] StrategyConfig initialized. Risk/Trade: 0.010, Max Hold: 24 bars, Kill DD: 20.00%
09:24:19 [DEBUG] [gold_ai2025.StrategyConfig]   Feature Eng Params: M15 EMA Fast=50, M1 Rolling Z Window=300
09:24:19 [DEBUG] [gold_ai2025.StrategyConfig]   Default Signal Thresh: GainZ=0.3, RSI Buy=50
09:24:19 [DEBUG] [gold_ai2025.StrategyConfig]   Dynamic TP2 Params: HighVolBoost=1.2, LotBoostMult=1.1
09:24:19 [INFO] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.26] simulate_trades start
09:24:19 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.70+] ATR undefined, using NaN fallback.
09:24:19 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.70+] MACD undefined, using NaN fallback.
09:24:19 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.70+] RSI undefined, using default 50.
09:24:19 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.28] Triggered BE-SL: OrderIdx:0, Side:BUY, Entry:1000.0, Exit:1000.0, PNL:0.0
09:24:19 [INFO] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.73+] [Patch] Forced Entry Audit: 0 forced entries logged: []
09:24:19 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.63+] Returning tuple for legacy/test compatibility
09:24:19 [INFO] [gold_ai2025.is_reentry_allowed.BUY] Re-entry ALLOWED for side BUY at 2023-01-01 00:01:00.
PASSED                                                                   [ 37%]
test_gold_ai.py::TestWFVandLotSizingFix::test_simulate_trades_reentry_strict 
-------------------------------- live log call ---------------------------------
09:24:19 [DEBUG] [gold_ai2025.StrategyConfig] Initializing StrategyConfig with dict: {'use_reentry': True, 'reentry_cooldown_bars': 0, 'reentry_cooldown_after_tp_minutes': 0, 'initial_capital': 100.0, 'risk_per_trade': 0.01}
09:24:19 [INFO] [gold_ai2025.StrategyConfig] StrategyConfig initialized. Risk/Trade: 0.010, Max Hold: 24 bars, Kill DD: 20.00%
09:24:19 [DEBUG] [gold_ai2025.StrategyConfig]   Feature Eng Params: M15 EMA Fast=50, M1 Rolling Z Window=300
09:24:19 [DEBUG] [gold_ai2025.StrategyConfig]   Default Signal Thresh: GainZ=0.3, RSI Buy=50
09:24:19 [DEBUG] [gold_ai2025.StrategyConfig]   Dynamic TP2 Params: HighVolBoost=1.2, LotBoostMult=1.1
09:24:19 [INFO] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.26] simulate_trades start
09:24:19 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.70+] ATR undefined, using NaN fallback.
09:24:19 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.70+] MACD undefined, using NaN fallback.
09:24:19 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.70+] RSI undefined, using default 50.
09:24:19 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.28] Triggered BE-SL: OrderIdx:0, Side:BUY, Entry:1000.0, Exit:999, PNL:0.0
09:24:19 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.28] Triggered BE-SL: OrderIdx:2, Side:BUY, Entry:1004.0, Exit:1003, PNL:0.0
09:24:19 [INFO] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.73+] [Patch] Forced Entry Audit: 0 forced entries logged: []
09:24:19 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.63+] Returning tuple for legacy/test compatibility
PASSED                                                                   [ 38%]
test_gold_ai.py::TestWarningEdgeCases::test_safe_load_csv_auto_corrupt_encoding 
-------------------------------- live log setup --------------------------------
09:24:19 [INFO] [gold_ai2025.Part2_DeprecatedParams] Part 2: Core Parameters & Strategy Settings (DEPRECATED - Parameters now in StrategyConfig from YAML).
09:24:19 [WARNING] [gold_ai2025.Part2_DeprecatedParams] Part 2: Is DEPRECATED. All tunable strategy parameters should be managed by StrategyConfig.
09:24:19 [INFO] [gold_ai2025.Part2_DeprecatedParams] Any true constants (e.g., for feature engineering) will be defined in their relevant sections or Part 1.
09:24:19 [INFO] [gold_ai2025.MLHelpers] Loading Machine Learning Configuration & Helpers (v4.9.13 - Refined Model Switcher)...
09:24:19 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_CLASSIFIER (L1 Filter): True
09:24:19 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_META_CLASSIFIER (L2 Filter): False
09:24:19 [INFO] [gold_ai2025.MLHelpers]   Initial Optuna Hyperparameter Tuning Enabled: False
09:24:19 [INFO] [gold_ai2025.MLHelpers]   Initial Auto Threshold Tuning Enabled: False
09:24:19 [INFO] [gold_ai2025.MT5Connector] Loading Part 12: MT5 Connector (Placeholder)...
09:24:19 [INFO] [gold_ai2025.MT5Connector] Part 12: MT5 Connector (Placeholder) Loaded.
09:24:19 [DEBUG] [gold_ai2025.Part14_FutureAdditions] Part 14: Placeholder for Future Additions reached.
09:24:19 [INFO] [gold_ai2025.Part15_EndOfScript] Reached End of Part 15 (Definitive End of Script Marker). Gold AI script processing complete.
-------------------------------- live log call ---------------------------------
09:24:19 [INFO] [gold_ai2025.safe_load_csv_auto] [Patch][QA v4.9.85] (safe_load) Attempting to load: bad_encoding.csv
09:24:19 [DEBUG] [gold_ai2025.safe_load_csv_auto] [Patch][QA v4.9.85] No .gz extension, using standard pd.read_csv.
09:24:19 [WARNING] [gold_ai2025.safe_load_csv_auto] [Patch][QA v4.9.85] UTF-8 decode failed, trying latin1 for file 'bad_encoding.csv' (UnicodeDecodeError('utf-8', b'\xff', 0, 1, 'invalid start byte'))
09:24:19 [ERROR] [gold_ai2025.safe_load_csv_auto] [Patch][QA v4.9.85] (Error) Failed to load file 'bad_encoding.csv': UnicodeDecodeError('utf-8', b'\xff', 0, 1, 'invalid start byte')
PASSED                                                                   [ 38%]
test_gold_ai.py::TestWarningEdgeCases::test_safe_load_csv_auto_generic_failure 
-------------------------------- live log call ---------------------------------
09:24:19 [INFO] [gold_ai2025.safe_load_csv_auto] [Patch][QA v4.9.85] (safe_load) Attempting to load: broken.csv
09:24:19 [DEBUG] [gold_ai2025.safe_load_csv_auto] [Patch][QA v4.9.85] No .gz extension, using standard pd.read_csv.
09:24:19 [ERROR] [gold_ai2025.safe_load_csv_auto] [Patch][QA v4.9.85] (Error) Failed to load file 'broken.csv': OSError('broken')
PASSED                                                                   [ 39%]
test_gold_ai.py::TestWarningEdgeCases::test_safe_load_csv_auto_gz_with_corrupt_content 
-------------------------------- live log call ---------------------------------
09:24:19 [INFO] [gold_ai2025.safe_load_csv_auto] [Patch][QA v4.9.85] (safe_load) Attempting to load: bad_file.csv.gz
09:24:19 [DEBUG] [gold_ai2025.safe_load_csv_auto] [Patch][QA v4.9.85] Detected .gz extension, using gzip for file 'bad_file.csv.gz'
09:24:19 [ERROR] [gold_ai2025.safe_load_csv_auto] [Patch][QA v4.9.85] (Error) Failed to load file 'bad_file.csv.gz': OSError('corrupt gzip')
PASSED                                                                   [ 40%]
test_gold_ai.py::TestWarningEdgeCases::test_safe_load_csv_auto_permission_denied 
-------------------------------- live log call ---------------------------------
09:24:19 [INFO] [gold_ai2025.setup_output_directory]    (Setup) กำลังตรวจสอบ/สร้าง Output Directory: /content/drive/MyDrive/new/denied
09:24:19 [INFO] [gold_ai2025.setup_output_directory]       -> Directory exists or was created.
09:24:19 [ERROR] [gold_ai2025.setup_output_directory]    (Error) ไม่สามารถสร้างหรือเข้าถึง Output Directory '/content/drive/MyDrive/new/denied': Permission denied
Traceback (most recent call last):
  File "/content/drive/MyDrive/new/gold_ai2025.py", line 1278, in setup_output_directory
    test_file_path = os.path.join(output_path, ".write_test")
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.11/unittest/mock.py", line 1124, in __call__
    return self._mock_call(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.11/unittest/mock.py", line 1128, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.11/unittest/mock.py", line 1183, in _execute_mock_call
    raise effect
PermissionError: Permission denied
PASSED                                                                   [ 40%]
test_gold_ai.py::TestWarningEdgeCases::test_safe_load_csv_auto_permission_error_read 
-------------------------------- live log call ---------------------------------
09:24:19 [INFO] [gold_ai2025.safe_load_csv_auto] [Patch][QA v4.9.85] (safe_load) Attempting to load: denied.csv
09:24:19 [DEBUG] [gold_ai2025.safe_load_csv_auto] [Patch][QA v4.9.85] No .gz extension, using standard pd.read_csv.
09:24:19 [ERROR] [gold_ai2025.safe_load_csv_auto] [Patch][QA v4.9.85] (Error) Failed to load file 'denied.csv': PermissionError('denied')
PASSED                                                                   [ 41%]
test_gold_ai.py::TestWarningEdgeCases::test_safe_load_csv_auto_utf8_bom_file 
-------------------------------- live log call ---------------------------------
09:24:19 [INFO] [gold_ai2025.safe_load_csv_auto] [Patch][QA v4.9.85] (safe_load) Attempting to load: bom_file.csv
09:24:19 [DEBUG] [gold_ai2025.safe_load_csv_auto] [Patch][QA v4.9.85] No .gz extension, using standard pd.read_csv.
09:24:19 [INFO] [gold_ai2025.safe_load_csv_auto] [Patch][QA v4.9.85] Loaded csv with default encoding.
PASSED                                                                   [ 41%]
test_gold_ai.py::TestWarningEdgeCases::test_set_thai_font_without_matplotlib 
-------------------------------- live log call ---------------------------------
09:24:19 [DEBUG] [gold_ai2025.set_thai_font] [Patch][QA v4.9.91+] Font 'Loma' not found: matplotlib not available
09:24:19 [DEBUG] [gold_ai2025.set_thai_font] [Patch][QA v4.9.91+] Font 'TH Sarabun New' not found: matplotlib not available
09:24:19 [DEBUG] [gold_ai2025.set_thai_font] [Patch][QA v4.9.91+] Font 'THSarabunNew' not found: matplotlib not available
09:24:19 [DEBUG] [gold_ai2025.set_thai_font] [Patch][QA v4.9.91+] Font 'Garuda' not found: matplotlib not available
09:24:19 [DEBUG] [gold_ai2025.set_thai_font] [Patch][QA v4.9.91+] Font 'Norasi' not found: matplotlib not available
09:24:19 [DEBUG] [gold_ai2025.set_thai_font] [Patch][QA v4.9.91+] Font 'Kinnari' not found: matplotlib not available
09:24:19 [DEBUG] [gold_ai2025.set_thai_font] [Patch][QA v4.9.91+] Font 'Waree' not found: matplotlib not available
09:24:19 [DEBUG] [gold_ai2025.set_thai_font] [Patch][QA v4.9.91+] Font 'Laksaman' not found: matplotlib not available
09:24:19 [WARNING] [gold_ai2025.set_thai_font] [Patch][QA v4.9.91+] No Thai fonts found in: ['Loma', 'TH Sarabun New', 'THSarabunNew', 'Garuda', 'Norasi', 'Kinnari', 'Waree', 'Laksaman']. Fallback to DejaVu Sans.
PASSED                                                                   [ 42%]
test_gold_ai.py::TestFeatureEngineeringCoverage::test_ema_normal 
-------------------------------- live log setup --------------------------------
09:24:19 [INFO] [gold_ai2025.Part2_DeprecatedParams] Part 2: Core Parameters & Strategy Settings (DEPRECATED - Parameters now in StrategyConfig from YAML).
09:24:19 [WARNING] [gold_ai2025.Part2_DeprecatedParams] Part 2: Is DEPRECATED. All tunable strategy parameters should be managed by StrategyConfig.
09:24:19 [INFO] [gold_ai2025.Part2_DeprecatedParams] Any true constants (e.g., for feature engineering) will be defined in their relevant sections or Part 1.
09:24:19 [INFO] [gold_ai2025.MLHelpers] Loading Machine Learning Configuration & Helpers (v4.9.13 - Refined Model Switcher)...
09:24:19 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_CLASSIFIER (L1 Filter): True
09:24:19 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_META_CLASSIFIER (L2 Filter): False
09:24:19 [INFO] [gold_ai2025.MLHelpers]   Initial Optuna Hyperparameter Tuning Enabled: False
09:24:19 [INFO] [gold_ai2025.MLHelpers]   Initial Auto Threshold Tuning Enabled: False
09:24:19 [INFO] [gold_ai2025.MT5Connector] Loading Part 12: MT5 Connector (Placeholder)...
09:24:19 [INFO] [gold_ai2025.MT5Connector] Part 12: MT5 Connector (Placeholder) Loaded.
09:24:19 [DEBUG] [gold_ai2025.Part14_FutureAdditions] Part 14: Placeholder for Future Additions reached.
09:24:19 [INFO] [gold_ai2025.Part15_EndOfScript] Reached End of Part 15 (Definitive End of Script Marker). Gold AI script processing complete.
09:24:19 [DEBUG] [gold_ai2025.StrategyConfig] Initializing StrategyConfig with dict: {}
09:24:19 [INFO] [gold_ai2025.StrategyConfig] StrategyConfig initialized. Risk/Trade: 0.010, Max Hold: 24 bars, Kill DD: 20.00%
09:24:19 [DEBUG] [gold_ai2025.StrategyConfig]   Feature Eng Params: M15 EMA Fast=50, M1 Rolling Z Window=300
09:24:19 [DEBUG] [gold_ai2025.StrategyConfig]   Default Signal Thresh: GainZ=0.3, RSI Buy=50
09:24:19 [DEBUG] [gold_ai2025.StrategyConfig]   Dynamic TP2 Params: HighVolBoost=1.2, LotBoostMult=1.1
PASSED                                                                   [ 42%]
test_gold_ai.py::TestFeatureEngineeringCoverage::test_ema_empty 
-------------------------------- live log setup --------------------------------
09:24:20 [INFO] [gold_ai2025.Part2_DeprecatedParams] Part 2: Core Parameters & Strategy Settings (DEPRECATED - Parameters now in StrategyConfig from YAML).
09:24:20 [WARNING] [gold_ai2025.Part2_DeprecatedParams] Part 2: Is DEPRECATED. All tunable strategy parameters should be managed by StrategyConfig.
09:24:20 [INFO] [gold_ai2025.Part2_DeprecatedParams] Any true constants (e.g., for feature engineering) will be defined in their relevant sections or Part 1.
09:24:20 [INFO] [gold_ai2025.MLHelpers] Loading Machine Learning Configuration & Helpers (v4.9.13 - Refined Model Switcher)...
09:24:20 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_CLASSIFIER (L1 Filter): True
09:24:20 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_META_CLASSIFIER (L2 Filter): False
09:24:20 [INFO] [gold_ai2025.MLHelpers]   Initial Optuna Hyperparameter Tuning Enabled: False
09:24:20 [INFO] [gold_ai2025.MLHelpers]   Initial Auto Threshold Tuning Enabled: False
09:24:20 [INFO] [gold_ai2025.MT5Connector] Loading Part 12: MT5 Connector (Placeholder)...
09:24:20 [INFO] [gold_ai2025.MT5Connector] Part 12: MT5 Connector (Placeholder) Loaded.
09:24:20 [DEBUG] [gold_ai2025.Part14_FutureAdditions] Part 14: Placeholder for Future Additions reached.
09:24:20 [INFO] [gold_ai2025.Part15_EndOfScript] Reached End of Part 15 (Definitive End of Script Marker). Gold AI script processing complete.
09:24:20 [DEBUG] [gold_ai2025.StrategyConfig] Initializing StrategyConfig with dict: {}
09:24:20 [INFO] [gold_ai2025.StrategyConfig] StrategyConfig initialized. Risk/Trade: 0.010, Max Hold: 24 bars, Kill DD: 20.00%
09:24:20 [DEBUG] [gold_ai2025.StrategyConfig]   Feature Eng Params: M15 EMA Fast=50, M1 Rolling Z Window=300
09:24:20 [DEBUG] [gold_ai2025.StrategyConfig]   Default Signal Thresh: GainZ=0.3, RSI Buy=50
09:24:20 [DEBUG] [gold_ai2025.StrategyConfig]   Dynamic TP2 Params: HighVolBoost=1.2, LotBoostMult=1.1
-------------------------------- live log call ---------------------------------
09:24:20 [DEBUG] [gold_ai2025.ema] [Patch AI Studio v4.9.26] Empty input detected in ema, returning empty pd.Series
PASSED                                                                   [ 43%]
test_gold_ai.py::TestFeatureEngineeringCoverage::test_sma_normal 
-------------------------------- live log setup --------------------------------
09:24:20 [INFO] [gold_ai2025.Part2_DeprecatedParams] Part 2: Core Parameters & Strategy Settings (DEPRECATED - Parameters now in StrategyConfig from YAML).
09:24:20 [WARNING] [gold_ai2025.Part2_DeprecatedParams] Part 2: Is DEPRECATED. All tunable strategy parameters should be managed by StrategyConfig.
09:24:20 [INFO] [gold_ai2025.Part2_DeprecatedParams] Any true constants (e.g., for feature engineering) will be defined in their relevant sections or Part 1.
09:24:20 [INFO] [gold_ai2025.MLHelpers] Loading Machine Learning Configuration & Helpers (v4.9.13 - Refined Model Switcher)...
09:24:20 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_CLASSIFIER (L1 Filter): True
09:24:20 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_META_CLASSIFIER (L2 Filter): False
09:24:20 [INFO] [gold_ai2025.MLHelpers]   Initial Optuna Hyperparameter Tuning Enabled: False
09:24:20 [INFO] [gold_ai2025.MLHelpers]   Initial Auto Threshold Tuning Enabled: False
09:24:20 [INFO] [gold_ai2025.MT5Connector] Loading Part 12: MT5 Connector (Placeholder)...
09:24:20 [INFO] [gold_ai2025.MT5Connector] Part 12: MT5 Connector (Placeholder) Loaded.
09:24:20 [DEBUG] [gold_ai2025.Part14_FutureAdditions] Part 14: Placeholder for Future Additions reached.
09:24:20 [INFO] [gold_ai2025.Part15_EndOfScript] Reached End of Part 15 (Definitive End of Script Marker). Gold AI script processing complete.
09:24:20 [DEBUG] [gold_ai2025.StrategyConfig] Initializing StrategyConfig with dict: {}
09:24:20 [INFO] [gold_ai2025.StrategyConfig] StrategyConfig initialized. Risk/Trade: 0.010, Max Hold: 24 bars, Kill DD: 20.00%
09:24:20 [DEBUG] [gold_ai2025.StrategyConfig]   Feature Eng Params: M15 EMA Fast=50, M1 Rolling Z Window=300
09:24:20 [DEBUG] [gold_ai2025.StrategyConfig]   Default Signal Thresh: GainZ=0.3, RSI Buy=50
09:24:20 [DEBUG] [gold_ai2025.StrategyConfig]   Dynamic TP2 Params: HighVolBoost=1.2, LotBoostMult=1.1
PASSED                                                                   [ 43%]
test_gold_ai.py::TestFeatureEngineeringCoverage::test_sma_invalid_period 
-------------------------------- live log setup --------------------------------
09:24:20 [INFO] [gold_ai2025.Part2_DeprecatedParams] Part 2: Core Parameters & Strategy Settings (DEPRECATED - Parameters now in StrategyConfig from YAML).
09:24:20 [WARNING] [gold_ai2025.Part2_DeprecatedParams] Part 2: Is DEPRECATED. All tunable strategy parameters should be managed by StrategyConfig.
09:24:20 [INFO] [gold_ai2025.Part2_DeprecatedParams] Any true constants (e.g., for feature engineering) will be defined in their relevant sections or Part 1.
09:24:20 [INFO] [gold_ai2025.MLHelpers] Loading Machine Learning Configuration & Helpers (v4.9.13 - Refined Model Switcher)...
09:24:20 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_CLASSIFIER (L1 Filter): True
09:24:20 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_META_CLASSIFIER (L2 Filter): False
09:24:20 [INFO] [gold_ai2025.MLHelpers]   Initial Optuna Hyperparameter Tuning Enabled: False
09:24:20 [INFO] [gold_ai2025.MLHelpers]   Initial Auto Threshold Tuning Enabled: False
09:24:20 [INFO] [gold_ai2025.MT5Connector] Loading Part 12: MT5 Connector (Placeholder)...
09:24:20 [INFO] [gold_ai2025.MT5Connector] Part 12: MT5 Connector (Placeholder) Loaded.
09:24:20 [DEBUG] [gold_ai2025.Part14_FutureAdditions] Part 14: Placeholder for Future Additions reached.
09:24:20 [INFO] [gold_ai2025.Part15_EndOfScript] Reached End of Part 15 (Definitive End of Script Marker). Gold AI script processing complete.
09:24:20 [DEBUG] [gold_ai2025.StrategyConfig] Initializing StrategyConfig with dict: {}
09:24:20 [INFO] [gold_ai2025.StrategyConfig] StrategyConfig initialized. Risk/Trade: 0.010, Max Hold: 24 bars, Kill DD: 20.00%
09:24:20 [DEBUG] [gold_ai2025.StrategyConfig]   Feature Eng Params: M15 EMA Fast=50, M1 Rolling Z Window=300
09:24:20 [DEBUG] [gold_ai2025.StrategyConfig]   Default Signal Thresh: GainZ=0.3, RSI Buy=50
09:24:20 [DEBUG] [gold_ai2025.StrategyConfig]   Dynamic TP2 Params: HighVolBoost=1.2, LotBoostMult=1.1
-------------------------------- live log call ---------------------------------
09:24:20 [ERROR] [gold_ai2025.sma] [Patch][QA] Invalid period (0). Must be a positive integer.
PASSED                                                                   [ 44%]
test_gold_ai.py::TestFeatureEngineeringCoverage::test_rsi_normal 
-------------------------------- live log setup --------------------------------
09:24:20 [INFO] [gold_ai2025.Part2_DeprecatedParams] Part 2: Core Parameters & Strategy Settings (DEPRECATED - Parameters now in StrategyConfig from YAML).
09:24:20 [WARNING] [gold_ai2025.Part2_DeprecatedParams] Part 2: Is DEPRECATED. All tunable strategy parameters should be managed by StrategyConfig.
09:24:20 [INFO] [gold_ai2025.Part2_DeprecatedParams] Any true constants (e.g., for feature engineering) will be defined in their relevant sections or Part 1.
09:24:20 [INFO] [gold_ai2025.MLHelpers] Loading Machine Learning Configuration & Helpers (v4.9.13 - Refined Model Switcher)...
09:24:20 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_CLASSIFIER (L1 Filter): True
09:24:20 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_META_CLASSIFIER (L2 Filter): False
09:24:20 [INFO] [gold_ai2025.MLHelpers]   Initial Optuna Hyperparameter Tuning Enabled: False
09:24:20 [INFO] [gold_ai2025.MLHelpers]   Initial Auto Threshold Tuning Enabled: False
09:24:20 [INFO] [gold_ai2025.MT5Connector] Loading Part 12: MT5 Connector (Placeholder)...
09:24:20 [INFO] [gold_ai2025.MT5Connector] Part 12: MT5 Connector (Placeholder) Loaded.
09:24:20 [DEBUG] [gold_ai2025.Part14_FutureAdditions] Part 14: Placeholder for Future Additions reached.
09:24:20 [INFO] [gold_ai2025.Part15_EndOfScript] Reached End of Part 15 (Definitive End of Script Marker). Gold AI script processing complete.
09:24:20 [DEBUG] [gold_ai2025.StrategyConfig] Initializing StrategyConfig with dict: {}
09:24:20 [INFO] [gold_ai2025.StrategyConfig] StrategyConfig initialized. Risk/Trade: 0.010, Max Hold: 24 bars, Kill DD: 20.00%
09:24:20 [DEBUG] [gold_ai2025.StrategyConfig]   Feature Eng Params: M15 EMA Fast=50, M1 Rolling Z Window=300
09:24:20 [DEBUG] [gold_ai2025.StrategyConfig]   Default Signal Thresh: GainZ=0.3, RSI Buy=50
09:24:20 [DEBUG] [gold_ai2025.StrategyConfig]   Dynamic TP2 Params: HighVolBoost=1.2, LotBoostMult=1.1
PASSED                                                                   [ 44%]
test_gold_ai.py::TestFeatureEngineeringCoverage::test_rsi_empty 
-------------------------------- live log setup --------------------------------
09:24:20 [INFO] [gold_ai2025.Part2_DeprecatedParams] Part 2: Core Parameters & Strategy Settings (DEPRECATED - Parameters now in StrategyConfig from YAML).
09:24:20 [WARNING] [gold_ai2025.Part2_DeprecatedParams] Part 2: Is DEPRECATED. All tunable strategy parameters should be managed by StrategyConfig.
09:24:20 [INFO] [gold_ai2025.Part2_DeprecatedParams] Any true constants (e.g., for feature engineering) will be defined in their relevant sections or Part 1.
09:24:20 [INFO] [gold_ai2025.MLHelpers] Loading Machine Learning Configuration & Helpers (v4.9.13 - Refined Model Switcher)...
09:24:20 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_CLASSIFIER (L1 Filter): True
09:24:20 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_META_CLASSIFIER (L2 Filter): False
09:24:20 [INFO] [gold_ai2025.MLHelpers]   Initial Optuna Hyperparameter Tuning Enabled: False
09:24:20 [INFO] [gold_ai2025.MLHelpers]   Initial Auto Threshold Tuning Enabled: False
09:24:20 [INFO] [gold_ai2025.MT5Connector] Loading Part 12: MT5 Connector (Placeholder)...
09:24:20 [INFO] [gold_ai2025.MT5Connector] Part 12: MT5 Connector (Placeholder) Loaded.
09:24:20 [DEBUG] [gold_ai2025.Part14_FutureAdditions] Part 14: Placeholder for Future Additions reached.
09:24:20 [INFO] [gold_ai2025.Part15_EndOfScript] Reached End of Part 15 (Definitive End of Script Marker). Gold AI script processing complete.
09:24:20 [DEBUG] [gold_ai2025.StrategyConfig] Initializing StrategyConfig with dict: {}
09:24:20 [INFO] [gold_ai2025.StrategyConfig] StrategyConfig initialized. Risk/Trade: 0.010, Max Hold: 24 bars, Kill DD: 20.00%
09:24:20 [DEBUG] [gold_ai2025.StrategyConfig]   Feature Eng Params: M15 EMA Fast=50, M1 Rolling Z Window=300
09:24:20 [DEBUG] [gold_ai2025.StrategyConfig]   Default Signal Thresh: GainZ=0.3, RSI Buy=50
09:24:20 [DEBUG] [gold_ai2025.StrategyConfig]   Dynamic TP2 Params: HighVolBoost=1.2, LotBoostMult=1.1
-------------------------------- live log call ---------------------------------
09:24:20 [DEBUG] [gold_ai2025.rsi] [Patch AI Studio v4.9.26] Empty input detected in rsi, returning empty pd.Series
PASSED                                                                   [ 45%]
test_gold_ai.py::TestFeatureEngineeringCoverage::test_atr_valid 
-------------------------------- live log setup --------------------------------
09:24:20 [INFO] [gold_ai2025.Part2_DeprecatedParams] Part 2: Core Parameters & Strategy Settings (DEPRECATED - Parameters now in StrategyConfig from YAML).
09:24:20 [WARNING] [gold_ai2025.Part2_DeprecatedParams] Part 2: Is DEPRECATED. All tunable strategy parameters should be managed by StrategyConfig.
09:24:20 [INFO] [gold_ai2025.Part2_DeprecatedParams] Any true constants (e.g., for feature engineering) will be defined in their relevant sections or Part 1.
09:24:20 [INFO] [gold_ai2025.MLHelpers] Loading Machine Learning Configuration & Helpers (v4.9.13 - Refined Model Switcher)...
09:24:20 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_CLASSIFIER (L1 Filter): True
09:24:20 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_META_CLASSIFIER (L2 Filter): False
09:24:20 [INFO] [gold_ai2025.MLHelpers]   Initial Optuna Hyperparameter Tuning Enabled: False
09:24:20 [INFO] [gold_ai2025.MLHelpers]   Initial Auto Threshold Tuning Enabled: False
09:24:20 [INFO] [gold_ai2025.MT5Connector] Loading Part 12: MT5 Connector (Placeholder)...
09:24:20 [INFO] [gold_ai2025.MT5Connector] Part 12: MT5 Connector (Placeholder) Loaded.
09:24:20 [DEBUG] [gold_ai2025.Part14_FutureAdditions] Part 14: Placeholder for Future Additions reached.
09:24:20 [INFO] [gold_ai2025.Part15_EndOfScript] Reached End of Part 15 (Definitive End of Script Marker). Gold AI script processing complete.
09:24:20 [DEBUG] [gold_ai2025.StrategyConfig] Initializing StrategyConfig with dict: {}
09:24:20 [INFO] [gold_ai2025.StrategyConfig] StrategyConfig initialized. Risk/Trade: 0.010, Max Hold: 24 bars, Kill DD: 20.00%
09:24:20 [DEBUG] [gold_ai2025.StrategyConfig]   Feature Eng Params: M15 EMA Fast=50, M1 Rolling Z Window=300
09:24:20 [DEBUG] [gold_ai2025.StrategyConfig]   Default Signal Thresh: GainZ=0.3, RSI Buy=50
09:24:20 [DEBUG] [gold_ai2025.StrategyConfig]   Dynamic TP2 Params: HighVolBoost=1.2, LotBoostMult=1.1
-------------------------------- live log call ---------------------------------
09:24:20 [WARNING] [gold_ai2025.atr]    (Warning) TA library ATR calculation failed: module 'ta.volatility' has no attribute 'AverageTrueRange'. Falling back to manual.
PASSED                                                                   [ 45%]
test_gold_ai.py::TestFeatureEngineeringCoverage::test_atr_missing_cols 
-------------------------------- live log setup --------------------------------
09:24:21 [INFO] [gold_ai2025.Part2_DeprecatedParams] Part 2: Core Parameters & Strategy Settings (DEPRECATED - Parameters now in StrategyConfig from YAML).
09:24:21 [WARNING] [gold_ai2025.Part2_DeprecatedParams] Part 2: Is DEPRECATED. All tunable strategy parameters should be managed by StrategyConfig.
09:24:21 [INFO] [gold_ai2025.Part2_DeprecatedParams] Any true constants (e.g., for feature engineering) will be defined in their relevant sections or Part 1.
09:24:21 [INFO] [gold_ai2025.MLHelpers] Loading Machine Learning Configuration & Helpers (v4.9.13 - Refined Model Switcher)...
09:24:21 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_CLASSIFIER (L1 Filter): True
09:24:21 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_META_CLASSIFIER (L2 Filter): False
09:24:21 [INFO] [gold_ai2025.MLHelpers]   Initial Optuna Hyperparameter Tuning Enabled: False
09:24:21 [INFO] [gold_ai2025.MLHelpers]   Initial Auto Threshold Tuning Enabled: False
09:24:21 [INFO] [gold_ai2025.MT5Connector] Loading Part 12: MT5 Connector (Placeholder)...
09:24:21 [INFO] [gold_ai2025.MT5Connector] Part 12: MT5 Connector (Placeholder) Loaded.
09:24:21 [DEBUG] [gold_ai2025.Part14_FutureAdditions] Part 14: Placeholder for Future Additions reached.
09:24:21 [INFO] [gold_ai2025.Part15_EndOfScript] Reached End of Part 15 (Definitive End of Script Marker). Gold AI script processing complete.
09:24:21 [DEBUG] [gold_ai2025.StrategyConfig] Initializing StrategyConfig with dict: {}
09:24:21 [INFO] [gold_ai2025.StrategyConfig] StrategyConfig initialized. Risk/Trade: 0.010, Max Hold: 24 bars, Kill DD: 20.00%
09:24:21 [DEBUG] [gold_ai2025.StrategyConfig]   Feature Eng Params: M15 EMA Fast=50, M1 Rolling Z Window=300
09:24:21 [DEBUG] [gold_ai2025.StrategyConfig]   Default Signal Thresh: GainZ=0.3, RSI Buy=50
09:24:21 [DEBUG] [gold_ai2025.StrategyConfig]   Dynamic TP2 Params: HighVolBoost=1.2, LotBoostMult=1.1
-------------------------------- live log call ---------------------------------
09:24:21 [WARNING] [gold_ai2025.atr]    (Warning) ATR calculation skipped: Missing columns ['High', 'Low', 'Close'].
PASSED                                                                   [ 46%]
test_gold_ai.py::TestFeatureEngineeringCoverage::test_macd_normal 
-------------------------------- live log setup --------------------------------
09:24:21 [INFO] [gold_ai2025.Part2_DeprecatedParams] Part 2: Core Parameters & Strategy Settings (DEPRECATED - Parameters now in StrategyConfig from YAML).
09:24:21 [WARNING] [gold_ai2025.Part2_DeprecatedParams] Part 2: Is DEPRECATED. All tunable strategy parameters should be managed by StrategyConfig.
09:24:21 [INFO] [gold_ai2025.Part2_DeprecatedParams] Any true constants (e.g., for feature engineering) will be defined in their relevant sections or Part 1.
09:24:21 [INFO] [gold_ai2025.MLHelpers] Loading Machine Learning Configuration & Helpers (v4.9.13 - Refined Model Switcher)...
09:24:21 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_CLASSIFIER (L1 Filter): True
09:24:21 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_META_CLASSIFIER (L2 Filter): False
09:24:21 [INFO] [gold_ai2025.MLHelpers]   Initial Optuna Hyperparameter Tuning Enabled: False
09:24:21 [INFO] [gold_ai2025.MLHelpers]   Initial Auto Threshold Tuning Enabled: False
09:24:21 [INFO] [gold_ai2025.MT5Connector] Loading Part 12: MT5 Connector (Placeholder)...
09:24:21 [INFO] [gold_ai2025.MT5Connector] Part 12: MT5 Connector (Placeholder) Loaded.
09:24:21 [DEBUG] [gold_ai2025.Part14_FutureAdditions] Part 14: Placeholder for Future Additions reached.
09:24:21 [INFO] [gold_ai2025.Part15_EndOfScript] Reached End of Part 15 (Definitive End of Script Marker). Gold AI script processing complete.
09:24:21 [DEBUG] [gold_ai2025.StrategyConfig] Initializing StrategyConfig with dict: {}
09:24:21 [INFO] [gold_ai2025.StrategyConfig] StrategyConfig initialized. Risk/Trade: 0.010, Max Hold: 24 bars, Kill DD: 20.00%
09:24:21 [DEBUG] [gold_ai2025.StrategyConfig]   Feature Eng Params: M15 EMA Fast=50, M1 Rolling Z Window=300
09:24:21 [DEBUG] [gold_ai2025.StrategyConfig]   Default Signal Thresh: GainZ=0.3, RSI Buy=50
09:24:21 [DEBUG] [gold_ai2025.StrategyConfig]   Dynamic TP2 Params: HighVolBoost=1.2, LotBoostMult=1.1
-------------------------------- live log call ---------------------------------
09:24:21 [WARNING] [gold_ai2025.macd]    (Warning) MACD calculation skipped: Not enough valid data points (5 < 26).
PASSED                                                                   [ 47%]
test_gold_ai.py::TestFeatureEngineeringCoverage::test_macd_empty 
-------------------------------- live log setup --------------------------------
09:24:21 [INFO] [gold_ai2025.Part2_DeprecatedParams] Part 2: Core Parameters & Strategy Settings (DEPRECATED - Parameters now in StrategyConfig from YAML).
09:24:21 [WARNING] [gold_ai2025.Part2_DeprecatedParams] Part 2: Is DEPRECATED. All tunable strategy parameters should be managed by StrategyConfig.
09:24:21 [INFO] [gold_ai2025.Part2_DeprecatedParams] Any true constants (e.g., for feature engineering) will be defined in their relevant sections or Part 1.
09:24:21 [INFO] [gold_ai2025.MLHelpers] Loading Machine Learning Configuration & Helpers (v4.9.13 - Refined Model Switcher)...
09:24:21 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_CLASSIFIER (L1 Filter): True
09:24:21 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_META_CLASSIFIER (L2 Filter): False
09:24:21 [INFO] [gold_ai2025.MLHelpers]   Initial Optuna Hyperparameter Tuning Enabled: False
09:24:21 [INFO] [gold_ai2025.MLHelpers]   Initial Auto Threshold Tuning Enabled: False
09:24:21 [INFO] [gold_ai2025.MT5Connector] Loading Part 12: MT5 Connector (Placeholder)...
09:24:21 [INFO] [gold_ai2025.MT5Connector] Part 12: MT5 Connector (Placeholder) Loaded.
09:24:21 [DEBUG] [gold_ai2025.Part14_FutureAdditions] Part 14: Placeholder for Future Additions reached.
09:24:21 [INFO] [gold_ai2025.Part15_EndOfScript] Reached End of Part 15 (Definitive End of Script Marker). Gold AI script processing complete.
09:24:21 [DEBUG] [gold_ai2025.StrategyConfig] Initializing StrategyConfig with dict: {}
09:24:21 [INFO] [gold_ai2025.StrategyConfig] StrategyConfig initialized. Risk/Trade: 0.010, Max Hold: 24 bars, Kill DD: 20.00%
09:24:21 [DEBUG] [gold_ai2025.StrategyConfig]   Feature Eng Params: M15 EMA Fast=50, M1 Rolling Z Window=300
09:24:21 [DEBUG] [gold_ai2025.StrategyConfig]   Default Signal Thresh: GainZ=0.3, RSI Buy=50
09:24:21 [DEBUG] [gold_ai2025.StrategyConfig]   Dynamic TP2 Params: HighVolBoost=1.2, LotBoostMult=1.1
-------------------------------- live log call ---------------------------------
09:24:21 [DEBUG] [gold_ai2025.macd] Input series is None or empty, returning empty series for MACD components.
PASSED                                                                   [ 47%]
test_gold_ai.py::TestFeatureEngineeringCoverage::test_rolling_zscore_short_series 
-------------------------------- live log setup --------------------------------
09:24:21 [INFO] [gold_ai2025.Part2_DeprecatedParams] Part 2: Core Parameters & Strategy Settings (DEPRECATED - Parameters now in StrategyConfig from YAML).
09:24:21 [WARNING] [gold_ai2025.Part2_DeprecatedParams] Part 2: Is DEPRECATED. All tunable strategy parameters should be managed by StrategyConfig.
09:24:21 [INFO] [gold_ai2025.Part2_DeprecatedParams] Any true constants (e.g., for feature engineering) will be defined in their relevant sections or Part 1.
09:24:21 [INFO] [gold_ai2025.MLHelpers] Loading Machine Learning Configuration & Helpers (v4.9.13 - Refined Model Switcher)...
09:24:21 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_CLASSIFIER (L1 Filter): True
09:24:21 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_META_CLASSIFIER (L2 Filter): False
09:24:21 [INFO] [gold_ai2025.MLHelpers]   Initial Optuna Hyperparameter Tuning Enabled: False
09:24:21 [INFO] [gold_ai2025.MLHelpers]   Initial Auto Threshold Tuning Enabled: False
09:24:21 [INFO] [gold_ai2025.MT5Connector] Loading Part 12: MT5 Connector (Placeholder)...
09:24:21 [INFO] [gold_ai2025.MT5Connector] Part 12: MT5 Connector (Placeholder) Loaded.
09:24:21 [DEBUG] [gold_ai2025.Part14_FutureAdditions] Part 14: Placeholder for Future Additions reached.
09:24:21 [INFO] [gold_ai2025.Part15_EndOfScript] Reached End of Part 15 (Definitive End of Script Marker). Gold AI script processing complete.
09:24:21 [DEBUG] [gold_ai2025.StrategyConfig] Initializing StrategyConfig with dict: {}
09:24:21 [INFO] [gold_ai2025.StrategyConfig] StrategyConfig initialized. Risk/Trade: 0.010, Max Hold: 24 bars, Kill DD: 20.00%
09:24:21 [DEBUG] [gold_ai2025.StrategyConfig]   Feature Eng Params: M15 EMA Fast=50, M1 Rolling Z Window=300
09:24:21 [DEBUG] [gold_ai2025.StrategyConfig]   Default Signal Thresh: GainZ=0.3, RSI Buy=50
09:24:21 [DEBUG] [gold_ai2025.StrategyConfig]   Dynamic TP2 Params: HighVolBoost=1.2, LotBoostMult=1.1
-------------------------------- live log call ---------------------------------
09:24:21 [DEBUG] [gold_ai2025.rolling_zscore] Input series too short (< 2), returning zeros.
PASSED                                                                   [ 48%]
test_gold_ai.py::TestFeatureEngineeringCoverage::test_tag_price_structure_patterns_missing_col 
-------------------------------- live log setup --------------------------------
09:24:21 [INFO] [gold_ai2025.Part2_DeprecatedParams] Part 2: Core Parameters & Strategy Settings (DEPRECATED - Parameters now in StrategyConfig from YAML).
09:24:21 [WARNING] [gold_ai2025.Part2_DeprecatedParams] Part 2: Is DEPRECATED. All tunable strategy parameters should be managed by StrategyConfig.
09:24:21 [INFO] [gold_ai2025.Part2_DeprecatedParams] Any true constants (e.g., for feature engineering) will be defined in their relevant sections or Part 1.
09:24:21 [INFO] [gold_ai2025.MLHelpers] Loading Machine Learning Configuration & Helpers (v4.9.13 - Refined Model Switcher)...
09:24:21 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_CLASSIFIER (L1 Filter): True
09:24:21 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_META_CLASSIFIER (L2 Filter): False
09:24:21 [INFO] [gold_ai2025.MLHelpers]   Initial Optuna Hyperparameter Tuning Enabled: False
09:24:21 [INFO] [gold_ai2025.MLHelpers]   Initial Auto Threshold Tuning Enabled: False
09:24:21 [INFO] [gold_ai2025.MT5Connector] Loading Part 12: MT5 Connector (Placeholder)...
09:24:21 [INFO] [gold_ai2025.MT5Connector] Part 12: MT5 Connector (Placeholder) Loaded.
09:24:21 [DEBUG] [gold_ai2025.Part14_FutureAdditions] Part 14: Placeholder for Future Additions reached.
09:24:21 [INFO] [gold_ai2025.Part15_EndOfScript] Reached End of Part 15 (Definitive End of Script Marker). Gold AI script processing complete.
09:24:21 [DEBUG] [gold_ai2025.StrategyConfig] Initializing StrategyConfig with dict: {}
09:24:21 [INFO] [gold_ai2025.StrategyConfig] StrategyConfig initialized. Risk/Trade: 0.010, Max Hold: 24 bars, Kill DD: 20.00%
09:24:21 [DEBUG] [gold_ai2025.StrategyConfig]   Feature Eng Params: M15 EMA Fast=50, M1 Rolling Z Window=300
09:24:21 [DEBUG] [gold_ai2025.StrategyConfig]   Default Signal Thresh: GainZ=0.3, RSI Buy=50
09:24:21 [DEBUG] [gold_ai2025.StrategyConfig]   Dynamic TP2 Params: HighVolBoost=1.2, LotBoostMult=1.1
PASSED                                                                   [ 48%]
test_gold_ai.py::TestFeatureEngineeringCoverage::test_calculate_m15_trend_zone_minimal 
-------------------------------- live log setup --------------------------------
09:24:21 [INFO] [gold_ai2025.Part2_DeprecatedParams] Part 2: Core Parameters & Strategy Settings (DEPRECATED - Parameters now in StrategyConfig from YAML).
09:24:21 [WARNING] [gold_ai2025.Part2_DeprecatedParams] Part 2: Is DEPRECATED. All tunable strategy parameters should be managed by StrategyConfig.
09:24:21 [INFO] [gold_ai2025.Part2_DeprecatedParams] Any true constants (e.g., for feature engineering) will be defined in their relevant sections or Part 1.
09:24:21 [INFO] [gold_ai2025.MLHelpers] Loading Machine Learning Configuration & Helpers (v4.9.13 - Refined Model Switcher)...
09:24:21 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_CLASSIFIER (L1 Filter): True
09:24:21 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_META_CLASSIFIER (L2 Filter): False
09:24:21 [INFO] [gold_ai2025.MLHelpers]   Initial Optuna Hyperparameter Tuning Enabled: False
09:24:21 [INFO] [gold_ai2025.MLHelpers]   Initial Auto Threshold Tuning Enabled: False
09:24:21 [INFO] [gold_ai2025.MT5Connector] Loading Part 12: MT5 Connector (Placeholder)...
09:24:21 [INFO] [gold_ai2025.MT5Connector] Part 12: MT5 Connector (Placeholder) Loaded.
09:24:21 [DEBUG] [gold_ai2025.Part14_FutureAdditions] Part 14: Placeholder for Future Additions reached.
09:24:21 [INFO] [gold_ai2025.Part15_EndOfScript] Reached End of Part 15 (Definitive End of Script Marker). Gold AI script processing complete.
09:24:21 [DEBUG] [gold_ai2025.StrategyConfig] Initializing StrategyConfig with dict: {}
09:24:21 [INFO] [gold_ai2025.StrategyConfig] StrategyConfig initialized. Risk/Trade: 0.010, Max Hold: 24 bars, Kill DD: 20.00%
09:24:21 [DEBUG] [gold_ai2025.StrategyConfig]   Feature Eng Params: M15 EMA Fast=50, M1 Rolling Z Window=300
09:24:21 [DEBUG] [gold_ai2025.StrategyConfig]   Default Signal Thresh: GainZ=0.3, RSI Buy=50
09:24:21 [DEBUG] [gold_ai2025.StrategyConfig]   Dynamic TP2 Params: HighVolBoost=1.2, LotBoostMult=1.1
PASSED                                                                   [ 49%]
test_gold_ai.py::TestFeatureEngineeringCoverage::test_get_session_tag_na 
-------------------------------- live log setup --------------------------------
09:24:22 [INFO] [gold_ai2025.Part2_DeprecatedParams] Part 2: Core Parameters & Strategy Settings (DEPRECATED - Parameters now in StrategyConfig from YAML).
09:24:22 [WARNING] [gold_ai2025.Part2_DeprecatedParams] Part 2: Is DEPRECATED. All tunable strategy parameters should be managed by StrategyConfig.
09:24:22 [INFO] [gold_ai2025.Part2_DeprecatedParams] Any true constants (e.g., for feature engineering) will be defined in their relevant sections or Part 1.
09:24:22 [INFO] [gold_ai2025.MLHelpers] Loading Machine Learning Configuration & Helpers (v4.9.13 - Refined Model Switcher)...
09:24:22 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_CLASSIFIER (L1 Filter): True
09:24:22 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_META_CLASSIFIER (L2 Filter): False
09:24:22 [INFO] [gold_ai2025.MLHelpers]   Initial Optuna Hyperparameter Tuning Enabled: False
09:24:22 [INFO] [gold_ai2025.MLHelpers]   Initial Auto Threshold Tuning Enabled: False
09:24:22 [INFO] [gold_ai2025.MT5Connector] Loading Part 12: MT5 Connector (Placeholder)...
09:24:22 [INFO] [gold_ai2025.MT5Connector] Part 12: MT5 Connector (Placeholder) Loaded.
09:24:22 [DEBUG] [gold_ai2025.Part14_FutureAdditions] Part 14: Placeholder for Future Additions reached.
09:24:22 [INFO] [gold_ai2025.Part15_EndOfScript] Reached End of Part 15 (Definitive End of Script Marker). Gold AI script processing complete.
09:24:22 [DEBUG] [gold_ai2025.StrategyConfig] Initializing StrategyConfig with dict: {}
09:24:22 [INFO] [gold_ai2025.StrategyConfig] StrategyConfig initialized. Risk/Trade: 0.010, Max Hold: 24 bars, Kill DD: 20.00%
09:24:22 [DEBUG] [gold_ai2025.StrategyConfig]   Feature Eng Params: M15 EMA Fast=50, M1 Rolling Z Window=300
09:24:22 [DEBUG] [gold_ai2025.StrategyConfig]   Default Signal Thresh: GainZ=0.3, RSI Buy=50
09:24:22 [DEBUG] [gold_ai2025.StrategyConfig]   Dynamic TP2 Params: HighVolBoost=1.2, LotBoostMult=1.1
PASSED                                                                   [ 49%]
test_gold_ai.py::TestFeatureEngineeringCoverage::test_get_session_tag_zones 
-------------------------------- live log setup --------------------------------
09:24:22 [INFO] [gold_ai2025.Part2_DeprecatedParams] Part 2: Core Parameters & Strategy Settings (DEPRECATED - Parameters now in StrategyConfig from YAML).
09:24:22 [WARNING] [gold_ai2025.Part2_DeprecatedParams] Part 2: Is DEPRECATED. All tunable strategy parameters should be managed by StrategyConfig.
09:24:22 [INFO] [gold_ai2025.Part2_DeprecatedParams] Any true constants (e.g., for feature engineering) will be defined in their relevant sections or Part 1.
09:24:22 [INFO] [gold_ai2025.MLHelpers] Loading Machine Learning Configuration & Helpers (v4.9.13 - Refined Model Switcher)...
09:24:22 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_CLASSIFIER (L1 Filter): True
09:24:22 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_META_CLASSIFIER (L2 Filter): False
09:24:22 [INFO] [gold_ai2025.MLHelpers]   Initial Optuna Hyperparameter Tuning Enabled: False
09:24:22 [INFO] [gold_ai2025.MLHelpers]   Initial Auto Threshold Tuning Enabled: False
09:24:22 [INFO] [gold_ai2025.MT5Connector] Loading Part 12: MT5 Connector (Placeholder)...
09:24:22 [INFO] [gold_ai2025.MT5Connector] Part 12: MT5 Connector (Placeholder) Loaded.
09:24:22 [DEBUG] [gold_ai2025.Part14_FutureAdditions] Part 14: Placeholder for Future Additions reached.
09:24:22 [INFO] [gold_ai2025.Part15_EndOfScript] Reached End of Part 15 (Definitive End of Script Marker). Gold AI script processing complete.
09:24:22 [DEBUG] [gold_ai2025.StrategyConfig] Initializing StrategyConfig with dict: {}
09:24:22 [INFO] [gold_ai2025.StrategyConfig] StrategyConfig initialized. Risk/Trade: 0.010, Max Hold: 24 bars, Kill DD: 20.00%
09:24:22 [DEBUG] [gold_ai2025.StrategyConfig]   Feature Eng Params: M15 EMA Fast=50, M1 Rolling Z Window=300
09:24:22 [DEBUG] [gold_ai2025.StrategyConfig]   Default Signal Thresh: GainZ=0.3, RSI Buy=50
09:24:22 [DEBUG] [gold_ai2025.StrategyConfig]   Dynamic TP2 Params: HighVolBoost=1.2, LotBoostMult=1.1
PASSED                                                                   [ 50%]
test_gold_ai.py::TestFeatureEngineeringCoverage::test_engineer_m1_features_empty 
-------------------------------- live log setup --------------------------------
09:24:22 [INFO] [gold_ai2025.Part2_DeprecatedParams] Part 2: Core Parameters & Strategy Settings (DEPRECATED - Parameters now in StrategyConfig from YAML).
09:24:22 [WARNING] [gold_ai2025.Part2_DeprecatedParams] Part 2: Is DEPRECATED. All tunable strategy parameters should be managed by StrategyConfig.
09:24:22 [INFO] [gold_ai2025.Part2_DeprecatedParams] Any true constants (e.g., for feature engineering) will be defined in their relevant sections or Part 1.
09:24:22 [INFO] [gold_ai2025.MLHelpers] Loading Machine Learning Configuration & Helpers (v4.9.13 - Refined Model Switcher)...
09:24:22 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_CLASSIFIER (L1 Filter): True
09:24:22 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_META_CLASSIFIER (L2 Filter): False
09:24:22 [INFO] [gold_ai2025.MLHelpers]   Initial Optuna Hyperparameter Tuning Enabled: False
09:24:22 [INFO] [gold_ai2025.MLHelpers]   Initial Auto Threshold Tuning Enabled: False
09:24:22 [INFO] [gold_ai2025.MT5Connector] Loading Part 12: MT5 Connector (Placeholder)...
09:24:22 [INFO] [gold_ai2025.MT5Connector] Part 12: MT5 Connector (Placeholder) Loaded.
09:24:22 [DEBUG] [gold_ai2025.Part14_FutureAdditions] Part 14: Placeholder for Future Additions reached.
09:24:22 [INFO] [gold_ai2025.Part15_EndOfScript] Reached End of Part 15 (Definitive End of Script Marker). Gold AI script processing complete.
09:24:22 [DEBUG] [gold_ai2025.StrategyConfig] Initializing StrategyConfig with dict: {}
09:24:22 [INFO] [gold_ai2025.StrategyConfig] StrategyConfig initialized. Risk/Trade: 0.010, Max Hold: 24 bars, Kill DD: 20.00%
09:24:22 [DEBUG] [gold_ai2025.StrategyConfig]   Feature Eng Params: M15 EMA Fast=50, M1 Rolling Z Window=300
09:24:22 [DEBUG] [gold_ai2025.StrategyConfig]   Default Signal Thresh: GainZ=0.3, RSI Buy=50
09:24:22 [DEBUG] [gold_ai2025.StrategyConfig]   Dynamic TP2 Params: HighVolBoost=1.2, LotBoostMult=1.1
-------------------------------- live log call ---------------------------------
09:24:22 [INFO] [gold_ai2025.engineer_m1_features] (Processing) กำลังสร้าง Features M1 (using StrategyConfig)...
09:24:22 [ERROR] [gold_ai2025.engineer_m1_features]    (Error) [Patch] ข้ามการสร้าง Features M1: DataFrame ว่างเปล่า.
PASSED                                                                   [ 50%]
test_gold_ai.py::TestFeatureEngineeringCoverage::test_clean_m1_data_empty 
-------------------------------- live log setup --------------------------------
09:24:22 [INFO] [gold_ai2025.Part2_DeprecatedParams] Part 2: Core Parameters & Strategy Settings (DEPRECATED - Parameters now in StrategyConfig from YAML).
09:24:22 [WARNING] [gold_ai2025.Part2_DeprecatedParams] Part 2: Is DEPRECATED. All tunable strategy parameters should be managed by StrategyConfig.
09:24:22 [INFO] [gold_ai2025.Part2_DeprecatedParams] Any true constants (e.g., for feature engineering) will be defined in their relevant sections or Part 1.
09:24:22 [INFO] [gold_ai2025.MLHelpers] Loading Machine Learning Configuration & Helpers (v4.9.13 - Refined Model Switcher)...
09:24:22 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_CLASSIFIER (L1 Filter): True
09:24:22 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_META_CLASSIFIER (L2 Filter): False
09:24:22 [INFO] [gold_ai2025.MLHelpers]   Initial Optuna Hyperparameter Tuning Enabled: False
09:24:22 [INFO] [gold_ai2025.MLHelpers]   Initial Auto Threshold Tuning Enabled: False
09:24:22 [INFO] [gold_ai2025.MT5Connector] Loading Part 12: MT5 Connector (Placeholder)...
09:24:22 [INFO] [gold_ai2025.MT5Connector] Part 12: MT5 Connector (Placeholder) Loaded.
09:24:22 [DEBUG] [gold_ai2025.Part14_FutureAdditions] Part 14: Placeholder for Future Additions reached.
09:24:22 [INFO] [gold_ai2025.Part15_EndOfScript] Reached End of Part 15 (Definitive End of Script Marker). Gold AI script processing complete.
09:24:22 [DEBUG] [gold_ai2025.StrategyConfig] Initializing StrategyConfig with dict: {}
09:24:22 [INFO] [gold_ai2025.StrategyConfig] StrategyConfig initialized. Risk/Trade: 0.010, Max Hold: 24 bars, Kill DD: 20.00%
09:24:22 [DEBUG] [gold_ai2025.StrategyConfig]   Feature Eng Params: M15 EMA Fast=50, M1 Rolling Z Window=300
09:24:22 [DEBUG] [gold_ai2025.StrategyConfig]   Default Signal Thresh: GainZ=0.3, RSI Buy=50
09:24:22 [DEBUG] [gold_ai2025.StrategyConfig]   Dynamic TP2 Params: HighVolBoost=1.2, LotBoostMult=1.1
-------------------------------- live log call ---------------------------------
09:24:22 [INFO] [gold_ai2025.clean_m1_data] (Processing) กำหนด Features M1 สำหรับ Drift และแปลงประเภท (using StrategyConfig)...
09:24:22 [WARNING] [gold_ai2025.clean_m1_data]    (Warning) ข้ามการทำความสะอาดข้อมูล M1: DataFrame ว่างเปล่า.
PASSED                                                                   [ 51%]
test_gold_ai.py::TestATRFallback::test_engineer_m1_features_atr_missing_fallback 
-------------------------------- live log call ---------------------------------
09:24:22 [INFO] [gold_ai2025.Part2_DeprecatedParams] Part 2: Core Parameters & Strategy Settings (DEPRECATED - Parameters now in StrategyConfig from YAML).
09:24:22 [WARNING] [gold_ai2025.Part2_DeprecatedParams] Part 2: Is DEPRECATED. All tunable strategy parameters should be managed by StrategyConfig.
09:24:22 [INFO] [gold_ai2025.Part2_DeprecatedParams] Any true constants (e.g., for feature engineering) will be defined in their relevant sections or Part 1.
09:24:22 [INFO] [gold_ai2025.MLHelpers] Loading Machine Learning Configuration & Helpers (v4.9.13 - Refined Model Switcher)...
09:24:22 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_CLASSIFIER (L1 Filter): True
09:24:22 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_META_CLASSIFIER (L2 Filter): False
09:24:22 [INFO] [gold_ai2025.MLHelpers]   Initial Optuna Hyperparameter Tuning Enabled: False
09:24:22 [INFO] [gold_ai2025.MLHelpers]   Initial Auto Threshold Tuning Enabled: False
09:24:22 [INFO] [gold_ai2025.MT5Connector] Loading Part 12: MT5 Connector (Placeholder)...
09:24:22 [INFO] [gold_ai2025.MT5Connector] Part 12: MT5 Connector (Placeholder) Loaded.
09:24:22 [DEBUG] [gold_ai2025.Part14_FutureAdditions] Part 14: Placeholder for Future Additions reached.
09:24:22 [INFO] [gold_ai2025.Part15_EndOfScript] Reached End of Part 15 (Definitive End of Script Marker). Gold AI script processing complete.
09:24:22 [DEBUG] [gold_ai2025.StrategyConfig] Initializing StrategyConfig with dict: {}
09:24:22 [INFO] [gold_ai2025.StrategyConfig] StrategyConfig initialized. Risk/Trade: 0.010, Max Hold: 24 bars, Kill DD: 20.00%
09:24:22 [DEBUG] [gold_ai2025.StrategyConfig]   Feature Eng Params: M15 EMA Fast=50, M1 Rolling Z Window=300
09:24:22 [DEBUG] [gold_ai2025.StrategyConfig]   Default Signal Thresh: GainZ=0.3, RSI Buy=50
09:24:22 [DEBUG] [gold_ai2025.StrategyConfig]   Dynamic TP2 Params: HighVolBoost=1.2, LotBoostMult=1.1
09:24:22 [ERROR] [root] [Patch][QA v4.9.90] engineer_m1_features: ATR_14 missing or all NaN, fallback to pd.Series([np.nan]*len(df)).
09:24:22 [INFO] [root] [Patch][QA v4.9.90] engineer_m1_features: Fallback applied, ATR_14 is all NaN as expected for missing.
09:24:22 [WARNING] [gold_ai2025.macd]    (Warning) MACD calculation skipped: Not enough valid data points (2 < 26).
09:24:22 [WARNING] [gold_ai2025.rsi] [Patch AI Studio v4.9.73+] (Warning) RSI calculation fallback to default 50 (manual/series too short/all NaN); all values set to 50.
09:24:22 [INFO] [gold_ai2025.rsi] [Patch AI Studio v4.9.73+] [Patch] RSI fallback manual returned all 50 with correct index/dtype
PASSED                                                                   [ 51%]
test_gold_ai.py::TestBranchAndErrorPathCoverage::test_ema_negative_period 
-------------------------------- live log call ---------------------------------
09:24:22 [INFO] [gold_ai2025.Part2_DeprecatedParams] Part 2: Core Parameters & Strategy Settings (DEPRECATED - Parameters now in StrategyConfig from YAML).
09:24:22 [WARNING] [gold_ai2025.Part2_DeprecatedParams] Part 2: Is DEPRECATED. All tunable strategy parameters should be managed by StrategyConfig.
09:24:22 [INFO] [gold_ai2025.Part2_DeprecatedParams] Any true constants (e.g., for feature engineering) will be defined in their relevant sections or Part 1.
09:24:22 [INFO] [gold_ai2025.MLHelpers] Loading Machine Learning Configuration & Helpers (v4.9.13 - Refined Model Switcher)...
09:24:22 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_CLASSIFIER (L1 Filter): True
09:24:22 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_META_CLASSIFIER (L2 Filter): False
09:24:22 [INFO] [gold_ai2025.MLHelpers]   Initial Optuna Hyperparameter Tuning Enabled: False
09:24:22 [INFO] [gold_ai2025.MLHelpers]   Initial Auto Threshold Tuning Enabled: False
09:24:22 [INFO] [gold_ai2025.MT5Connector] Loading Part 12: MT5 Connector (Placeholder)...
09:24:22 [INFO] [gold_ai2025.MT5Connector] Part 12: MT5 Connector (Placeholder) Loaded.
09:24:22 [DEBUG] [gold_ai2025.Part14_FutureAdditions] Part 14: Placeholder for Future Additions reached.
09:24:22 [INFO] [gold_ai2025.Part15_EndOfScript] Reached End of Part 15 (Definitive End of Script Marker). Gold AI script processing complete.
PASSED                                                                   [ 52%]
test_gold_ai.py::TestBranchAndErrorPathCoverage::test_sma_not_series 
-------------------------------- live log call ---------------------------------
09:24:23 [INFO] [gold_ai2025.Part2_DeprecatedParams] Part 2: Core Parameters & Strategy Settings (DEPRECATED - Parameters now in StrategyConfig from YAML).
09:24:23 [WARNING] [gold_ai2025.Part2_DeprecatedParams] Part 2: Is DEPRECATED. All tunable strategy parameters should be managed by StrategyConfig.
09:24:23 [INFO] [gold_ai2025.Part2_DeprecatedParams] Any true constants (e.g., for feature engineering) will be defined in their relevant sections or Part 1.
09:24:23 [INFO] [gold_ai2025.MLHelpers] Loading Machine Learning Configuration & Helpers (v4.9.13 - Refined Model Switcher)...
09:24:23 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_CLASSIFIER (L1 Filter): True
09:24:23 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_META_CLASSIFIER (L2 Filter): False
09:24:23 [INFO] [gold_ai2025.MLHelpers]   Initial Optuna Hyperparameter Tuning Enabled: False
09:24:23 [INFO] [gold_ai2025.MLHelpers]   Initial Auto Threshold Tuning Enabled: False
09:24:23 [INFO] [gold_ai2025.MT5Connector] Loading Part 12: MT5 Connector (Placeholder)...
09:24:23 [INFO] [gold_ai2025.MT5Connector] Part 12: MT5 Connector (Placeholder) Loaded.
09:24:23 [DEBUG] [gold_ai2025.Part14_FutureAdditions] Part 14: Placeholder for Future Additions reached.
09:24:23 [INFO] [gold_ai2025.Part15_EndOfScript] Reached End of Part 15 (Definitive End of Script Marker). Gold AI script processing complete.
09:24:23 [ERROR] [gold_ai2025.sma] Input must be a pandas Series, got <class 'list'>
PASSED                                                                   [ 52%]
test_gold_ai.py::TestBranchAndErrorPathCoverage::test_rsi_not_series 
-------------------------------- live log call ---------------------------------
09:24:23 [INFO] [gold_ai2025.Part2_DeprecatedParams] Part 2: Core Parameters & Strategy Settings (DEPRECATED - Parameters now in StrategyConfig from YAML).
09:24:23 [WARNING] [gold_ai2025.Part2_DeprecatedParams] Part 2: Is DEPRECATED. All tunable strategy parameters should be managed by StrategyConfig.
09:24:23 [INFO] [gold_ai2025.Part2_DeprecatedParams] Any true constants (e.g., for feature engineering) will be defined in their relevant sections or Part 1.
09:24:23 [INFO] [gold_ai2025.MLHelpers] Loading Machine Learning Configuration & Helpers (v4.9.13 - Refined Model Switcher)...
09:24:23 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_CLASSIFIER (L1 Filter): True
09:24:23 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_META_CLASSIFIER (L2 Filter): False
09:24:23 [INFO] [gold_ai2025.MLHelpers]   Initial Optuna Hyperparameter Tuning Enabled: False
09:24:23 [INFO] [gold_ai2025.MLHelpers]   Initial Auto Threshold Tuning Enabled: False
09:24:23 [INFO] [gold_ai2025.MT5Connector] Loading Part 12: MT5 Connector (Placeholder)...
09:24:23 [INFO] [gold_ai2025.MT5Connector] Part 12: MT5 Connector (Placeholder) Loaded.
09:24:23 [DEBUG] [gold_ai2025.Part14_FutureAdditions] Part 14: Placeholder for Future Additions reached.
09:24:23 [INFO] [gold_ai2025.Part15_EndOfScript] Reached End of Part 15 (Definitive End of Script Marker). Gold AI script processing complete.
09:24:23 [ERROR] [gold_ai2025.rsi] Input must be a pandas Series, got <class 'list'>
PASSED                                                                   [ 53%]
test_gold_ai.py::TestBranchAndErrorPathCoverage::test_atr_invalid_type 
-------------------------------- live log call ---------------------------------
09:24:23 [INFO] [gold_ai2025.Part2_DeprecatedParams] Part 2: Core Parameters & Strategy Settings (DEPRECATED - Parameters now in StrategyConfig from YAML).
09:24:23 [WARNING] [gold_ai2025.Part2_DeprecatedParams] Part 2: Is DEPRECATED. All tunable strategy parameters should be managed by StrategyConfig.
09:24:23 [INFO] [gold_ai2025.Part2_DeprecatedParams] Any true constants (e.g., for feature engineering) will be defined in their relevant sections or Part 1.
09:24:23 [INFO] [gold_ai2025.MLHelpers] Loading Machine Learning Configuration & Helpers (v4.9.13 - Refined Model Switcher)...
09:24:23 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_CLASSIFIER (L1 Filter): True
09:24:23 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_META_CLASSIFIER (L2 Filter): False
09:24:23 [INFO] [gold_ai2025.MLHelpers]   Initial Optuna Hyperparameter Tuning Enabled: False
09:24:23 [INFO] [gold_ai2025.MLHelpers]   Initial Auto Threshold Tuning Enabled: False
09:24:23 [INFO] [gold_ai2025.MT5Connector] Loading Part 12: MT5 Connector (Placeholder)...
09:24:23 [INFO] [gold_ai2025.MT5Connector] Part 12: MT5 Connector (Placeholder) Loaded.
09:24:23 [DEBUG] [gold_ai2025.Part14_FutureAdditions] Part 14: Placeholder for Future Additions reached.
09:24:23 [INFO] [gold_ai2025.Part15_EndOfScript] Reached End of Part 15 (Definitive End of Script Marker). Gold AI script processing complete.
09:24:23 [ERROR] [gold_ai2025.atr] Input must be a pandas DataFrame, got <class 'list'>
PASSED                                                                   [ 54%]
test_gold_ai.py::TestBranchAndErrorPathCoverage::test_macd_invalid_type 
-------------------------------- live log call ---------------------------------
09:24:23 [INFO] [gold_ai2025.Part2_DeprecatedParams] Part 2: Core Parameters & Strategy Settings (DEPRECATED - Parameters now in StrategyConfig from YAML).
09:24:23 [WARNING] [gold_ai2025.Part2_DeprecatedParams] Part 2: Is DEPRECATED. All tunable strategy parameters should be managed by StrategyConfig.
09:24:23 [INFO] [gold_ai2025.Part2_DeprecatedParams] Any true constants (e.g., for feature engineering) will be defined in their relevant sections or Part 1.
09:24:23 [INFO] [gold_ai2025.MLHelpers] Loading Machine Learning Configuration & Helpers (v4.9.13 - Refined Model Switcher)...
09:24:23 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_CLASSIFIER (L1 Filter): True
09:24:23 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_META_CLASSIFIER (L2 Filter): False
09:24:23 [INFO] [gold_ai2025.MLHelpers]   Initial Optuna Hyperparameter Tuning Enabled: False
09:24:23 [INFO] [gold_ai2025.MLHelpers]   Initial Auto Threshold Tuning Enabled: False
09:24:23 [INFO] [gold_ai2025.MT5Connector] Loading Part 12: MT5 Connector (Placeholder)...
09:24:23 [INFO] [gold_ai2025.MT5Connector] Part 12: MT5 Connector (Placeholder) Loaded.
09:24:23 [DEBUG] [gold_ai2025.Part14_FutureAdditions] Part 14: Placeholder for Future Additions reached.
09:24:23 [INFO] [gold_ai2025.Part15_EndOfScript] Reached End of Part 15 (Definitive End of Script Marker). Gold AI script processing complete.
09:24:23 [ERROR] [gold_ai2025.macd] Input must be a pandas Series, got <class 'list'>
PASSED                                                                   [ 54%]
test_gold_ai.py::TestBranchAndErrorPathCoverage::test_rolling_zscore_nan 
-------------------------------- live log call ---------------------------------
09:24:23 [INFO] [gold_ai2025.Part2_DeprecatedParams] Part 2: Core Parameters & Strategy Settings (DEPRECATED - Parameters now in StrategyConfig from YAML).
09:24:23 [WARNING] [gold_ai2025.Part2_DeprecatedParams] Part 2: Is DEPRECATED. All tunable strategy parameters should be managed by StrategyConfig.
09:24:23 [INFO] [gold_ai2025.Part2_DeprecatedParams] Any true constants (e.g., for feature engineering) will be defined in their relevant sections or Part 1.
09:24:23 [INFO] [gold_ai2025.MLHelpers] Loading Machine Learning Configuration & Helpers (v4.9.13 - Refined Model Switcher)...
09:24:23 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_CLASSIFIER (L1 Filter): True
09:24:23 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_META_CLASSIFIER (L2 Filter): False
09:24:23 [INFO] [gold_ai2025.MLHelpers]   Initial Optuna Hyperparameter Tuning Enabled: False
09:24:23 [INFO] [gold_ai2025.MLHelpers]   Initial Auto Threshold Tuning Enabled: False
09:24:23 [INFO] [gold_ai2025.MT5Connector] Loading Part 12: MT5 Connector (Placeholder)...
09:24:23 [INFO] [gold_ai2025.MT5Connector] Part 12: MT5 Connector (Placeholder) Loaded.
09:24:23 [DEBUG] [gold_ai2025.Part14_FutureAdditions] Part 14: Placeholder for Future Additions reached.
09:24:23 [INFO] [gold_ai2025.Part15_EndOfScript] Reached End of Part 15 (Definitive End of Script Marker). Gold AI script processing complete.
PASSED                                                                   [ 55%]
test_gold_ai.py::TestBranchAndErrorPathCoverage::test_tag_price_structure_patterns_empty 
-------------------------------- live log call ---------------------------------
09:24:23 [INFO] [gold_ai2025.Part2_DeprecatedParams] Part 2: Core Parameters & Strategy Settings (DEPRECATED - Parameters now in StrategyConfig from YAML).
09:24:23 [WARNING] [gold_ai2025.Part2_DeprecatedParams] Part 2: Is DEPRECATED. All tunable strategy parameters should be managed by StrategyConfig.
09:24:23 [INFO] [gold_ai2025.Part2_DeprecatedParams] Any true constants (e.g., for feature engineering) will be defined in their relevant sections or Part 1.
09:24:23 [INFO] [gold_ai2025.MLHelpers] Loading Machine Learning Configuration & Helpers (v4.9.13 - Refined Model Switcher)...
09:24:23 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_CLASSIFIER (L1 Filter): True
09:24:23 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_META_CLASSIFIER (L2 Filter): False
09:24:23 [INFO] [gold_ai2025.MLHelpers]   Initial Optuna Hyperparameter Tuning Enabled: False
09:24:23 [INFO] [gold_ai2025.MLHelpers]   Initial Auto Threshold Tuning Enabled: False
09:24:23 [INFO] [gold_ai2025.MT5Connector] Loading Part 12: MT5 Connector (Placeholder)...
09:24:23 [INFO] [gold_ai2025.MT5Connector] Part 12: MT5 Connector (Placeholder) Loaded.
09:24:23 [DEBUG] [gold_ai2025.Part14_FutureAdditions] Part 14: Placeholder for Future Additions reached.
09:24:23 [INFO] [gold_ai2025.Part15_EndOfScript] Reached End of Part 15 (Definitive End of Script Marker). Gold AI script processing complete.
09:24:23 [DEBUG] [gold_ai2025.StrategyConfig] Initializing StrategyConfig with dict: {}
09:24:23 [INFO] [gold_ai2025.StrategyConfig] StrategyConfig initialized. Risk/Trade: 0.010, Max Hold: 24 bars, Kill DD: 20.00%
09:24:23 [DEBUG] [gold_ai2025.StrategyConfig]   Feature Eng Params: M15 EMA Fast=50, M1 Rolling Z Window=300
09:24:23 [DEBUG] [gold_ai2025.StrategyConfig]   Default Signal Thresh: GainZ=0.3, RSI Buy=50
09:24:23 [DEBUG] [gold_ai2025.StrategyConfig]   Dynamic TP2 Params: HighVolBoost=1.2, LotBoostMult=1.1
09:24:23 [ERROR] [root] [Patch AI Studio v4.9.33] tag_price_structure_patterns: Input is not of expected DataFrame type or empty. Returning DataFrame with only ['Pattern_Label'] column for test compatibility.
PASSED                                                                   [ 55%]
test_gold_ai.py::TestBranchAndErrorPathCoverage::test_calculate_m15_trend_zone_empty 
-------------------------------- live log call ---------------------------------
09:24:23 [INFO] [gold_ai2025.Part2_DeprecatedParams] Part 2: Core Parameters & Strategy Settings (DEPRECATED - Parameters now in StrategyConfig from YAML).
09:24:23 [WARNING] [gold_ai2025.Part2_DeprecatedParams] Part 2: Is DEPRECATED. All tunable strategy parameters should be managed by StrategyConfig.
09:24:23 [INFO] [gold_ai2025.Part2_DeprecatedParams] Any true constants (e.g., for feature engineering) will be defined in their relevant sections or Part 1.
09:24:23 [INFO] [gold_ai2025.MLHelpers] Loading Machine Learning Configuration & Helpers (v4.9.13 - Refined Model Switcher)...
09:24:23 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_CLASSIFIER (L1 Filter): True
09:24:23 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_META_CLASSIFIER (L2 Filter): False
09:24:23 [INFO] [gold_ai2025.MLHelpers]   Initial Optuna Hyperparameter Tuning Enabled: False
09:24:23 [INFO] [gold_ai2025.MLHelpers]   Initial Auto Threshold Tuning Enabled: False
09:24:23 [INFO] [gold_ai2025.MT5Connector] Loading Part 12: MT5 Connector (Placeholder)...
09:24:23 [INFO] [gold_ai2025.MT5Connector] Part 12: MT5 Connector (Placeholder) Loaded.
09:24:23 [DEBUG] [gold_ai2025.Part14_FutureAdditions] Part 14: Placeholder for Future Additions reached.
09:24:23 [INFO] [gold_ai2025.Part15_EndOfScript] Reached End of Part 15 (Definitive End of Script Marker). Gold AI script processing complete.
09:24:24 [DEBUG] [gold_ai2025.StrategyConfig] Initializing StrategyConfig with dict: {}
09:24:24 [INFO] [gold_ai2025.StrategyConfig] StrategyConfig initialized. Risk/Trade: 0.010, Max Hold: 24 bars, Kill DD: 20.00%
09:24:24 [DEBUG] [gold_ai2025.StrategyConfig]   Feature Eng Params: M15 EMA Fast=50, M1 Rolling Z Window=300
09:24:24 [DEBUG] [gold_ai2025.StrategyConfig]   Default Signal Thresh: GainZ=0.3, RSI Buy=50
09:24:24 [DEBUG] [gold_ai2025.StrategyConfig]   Dynamic TP2 Params: HighVolBoost=1.2, LotBoostMult=1.1
09:24:24 [ERROR] [root] [Patch AI Studio v4.9.33] calculate_m15_trend_zone: Input is not of expected DataFrame type or empty. Returning DataFrame with only ['Trend_Zone'] column for test compatibility.
PASSED                                                                   [ 56%]
test_gold_ai.py::TestBranchAndErrorPathCoverage::test_tag_price_structure_patterns_empty_df 
-------------------------------- live log call ---------------------------------
09:24:24 [INFO] [gold_ai2025.Part2_DeprecatedParams] Part 2: Core Parameters & Strategy Settings (DEPRECATED - Parameters now in StrategyConfig from YAML).
09:24:24 [WARNING] [gold_ai2025.Part2_DeprecatedParams] Part 2: Is DEPRECATED. All tunable strategy parameters should be managed by StrategyConfig.
09:24:24 [INFO] [gold_ai2025.Part2_DeprecatedParams] Any true constants (e.g., for feature engineering) will be defined in their relevant sections or Part 1.
09:24:24 [INFO] [gold_ai2025.MLHelpers] Loading Machine Learning Configuration & Helpers (v4.9.13 - Refined Model Switcher)...
09:24:24 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_CLASSIFIER (L1 Filter): True
09:24:24 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_META_CLASSIFIER (L2 Filter): False
09:24:24 [INFO] [gold_ai2025.MLHelpers]   Initial Optuna Hyperparameter Tuning Enabled: False
09:24:24 [INFO] [gold_ai2025.MLHelpers]   Initial Auto Threshold Tuning Enabled: False
09:24:24 [INFO] [gold_ai2025.MT5Connector] Loading Part 12: MT5 Connector (Placeholder)...
09:24:24 [INFO] [gold_ai2025.MT5Connector] Part 12: MT5 Connector (Placeholder) Loaded.
09:24:24 [DEBUG] [gold_ai2025.Part14_FutureAdditions] Part 14: Placeholder for Future Additions reached.
09:24:24 [INFO] [gold_ai2025.Part15_EndOfScript] Reached End of Part 15 (Definitive End of Script Marker). Gold AI script processing complete.
09:24:24 [DEBUG] [gold_ai2025.StrategyConfig] Initializing StrategyConfig with dict: {}
09:24:24 [INFO] [gold_ai2025.StrategyConfig] StrategyConfig initialized. Risk/Trade: 0.010, Max Hold: 24 bars, Kill DD: 20.00%
09:24:24 [DEBUG] [gold_ai2025.StrategyConfig]   Feature Eng Params: M15 EMA Fast=50, M1 Rolling Z Window=300
09:24:24 [DEBUG] [gold_ai2025.StrategyConfig]   Default Signal Thresh: GainZ=0.3, RSI Buy=50
09:24:24 [DEBUG] [gold_ai2025.StrategyConfig]   Dynamic TP2 Params: HighVolBoost=1.2, LotBoostMult=1.1
09:24:24 [ERROR] [root] [Patch AI Studio v4.9.33] tag_price_structure_patterns: Input is not of expected DataFrame type or empty. Returning DataFrame with only ['Pattern_Label'] column for test compatibility.
PASSED                                                                   [ 56%]
test_gold_ai.py::TestBranchAndErrorPathCoverage::test_calculate_m15_trend_zone_empty_df 
-------------------------------- live log call ---------------------------------
09:24:24 [INFO] [gold_ai2025.Part2_DeprecatedParams] Part 2: Core Parameters & Strategy Settings (DEPRECATED - Parameters now in StrategyConfig from YAML).
09:24:24 [WARNING] [gold_ai2025.Part2_DeprecatedParams] Part 2: Is DEPRECATED. All tunable strategy parameters should be managed by StrategyConfig.
09:24:24 [INFO] [gold_ai2025.Part2_DeprecatedParams] Any true constants (e.g., for feature engineering) will be defined in their relevant sections or Part 1.
09:24:24 [INFO] [gold_ai2025.MLHelpers] Loading Machine Learning Configuration & Helpers (v4.9.13 - Refined Model Switcher)...
09:24:24 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_CLASSIFIER (L1 Filter): True
09:24:24 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_META_CLASSIFIER (L2 Filter): False
09:24:24 [INFO] [gold_ai2025.MLHelpers]   Initial Optuna Hyperparameter Tuning Enabled: False
09:24:24 [INFO] [gold_ai2025.MLHelpers]   Initial Auto Threshold Tuning Enabled: False
09:24:24 [INFO] [gold_ai2025.MT5Connector] Loading Part 12: MT5 Connector (Placeholder)...
09:24:24 [INFO] [gold_ai2025.MT5Connector] Part 12: MT5 Connector (Placeholder) Loaded.
09:24:24 [DEBUG] [gold_ai2025.Part14_FutureAdditions] Part 14: Placeholder for Future Additions reached.
09:24:24 [INFO] [gold_ai2025.Part15_EndOfScript] Reached End of Part 15 (Definitive End of Script Marker). Gold AI script processing complete.
09:24:24 [DEBUG] [gold_ai2025.StrategyConfig] Initializing StrategyConfig with dict: {}
09:24:24 [INFO] [gold_ai2025.StrategyConfig] StrategyConfig initialized. Risk/Trade: 0.010, Max Hold: 24 bars, Kill DD: 20.00%
09:24:24 [DEBUG] [gold_ai2025.StrategyConfig]   Feature Eng Params: M15 EMA Fast=50, M1 Rolling Z Window=300
09:24:24 [DEBUG] [gold_ai2025.StrategyConfig]   Default Signal Thresh: GainZ=0.3, RSI Buy=50
09:24:24 [DEBUG] [gold_ai2025.StrategyConfig]   Dynamic TP2 Params: HighVolBoost=1.2, LotBoostMult=1.1
09:24:24 [ERROR] [root] [Patch AI Studio v4.9.33] calculate_m15_trend_zone: Input is not of expected DataFrame type or empty. Returning DataFrame with only ['Trend_Zone'] column for test compatibility.
PASSED                                                                   [ 57%]
test_gold_ai.py::TestBranchAndErrorPathCoverage::test_tag_price_structure_patterns_type_guard 
-------------------------------- live log call ---------------------------------
09:24:24 [INFO] [gold_ai2025.Part2_DeprecatedParams] Part 2: Core Parameters & Strategy Settings (DEPRECATED - Parameters now in StrategyConfig from YAML).
09:24:24 [WARNING] [gold_ai2025.Part2_DeprecatedParams] Part 2: Is DEPRECATED. All tunable strategy parameters should be managed by StrategyConfig.
09:24:24 [INFO] [gold_ai2025.Part2_DeprecatedParams] Any true constants (e.g., for feature engineering) will be defined in their relevant sections or Part 1.
09:24:24 [INFO] [gold_ai2025.MLHelpers] Loading Machine Learning Configuration & Helpers (v4.9.13 - Refined Model Switcher)...
09:24:24 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_CLASSIFIER (L1 Filter): True
09:24:24 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_META_CLASSIFIER (L2 Filter): False
09:24:24 [INFO] [gold_ai2025.MLHelpers]   Initial Optuna Hyperparameter Tuning Enabled: False
09:24:24 [INFO] [gold_ai2025.MLHelpers]   Initial Auto Threshold Tuning Enabled: False
09:24:24 [INFO] [gold_ai2025.MT5Connector] Loading Part 12: MT5 Connector (Placeholder)...
09:24:24 [INFO] [gold_ai2025.MT5Connector] Part 12: MT5 Connector (Placeholder) Loaded.
09:24:24 [DEBUG] [gold_ai2025.Part14_FutureAdditions] Part 14: Placeholder for Future Additions reached.
09:24:24 [INFO] [gold_ai2025.Part15_EndOfScript] Reached End of Part 15 (Definitive End of Script Marker). Gold AI script processing complete.
09:24:24 [DEBUG] [gold_ai2025.StrategyConfig] Initializing StrategyConfig with dict: {}
09:24:24 [INFO] [gold_ai2025.StrategyConfig] StrategyConfig initialized. Risk/Trade: 0.010, Max Hold: 24 bars, Kill DD: 20.00%
09:24:24 [DEBUG] [gold_ai2025.StrategyConfig]   Feature Eng Params: M15 EMA Fast=50, M1 Rolling Z Window=300
09:24:24 [DEBUG] [gold_ai2025.StrategyConfig]   Default Signal Thresh: GainZ=0.3, RSI Buy=50
09:24:24 [DEBUG] [gold_ai2025.StrategyConfig]   Dynamic TP2 Params: HighVolBoost=1.2, LotBoostMult=1.1
09:24:24 [ERROR] [root] [Patch AI Studio v4.9.33] tag_price_structure_patterns: Input is not of expected DataFrame type or empty. Returning DataFrame with only ['Pattern_Label'] column for test compatibility.
PASSED                                                                   [ 57%]
test_gold_ai.py::TestBranchAndErrorPathCoverage::test_tag_price_structure_patterns_expected_type_guard 
-------------------------------- live log call ---------------------------------
09:24:24 [INFO] [gold_ai2025.Part2_DeprecatedParams] Part 2: Core Parameters & Strategy Settings (DEPRECATED - Parameters now in StrategyConfig from YAML).
09:24:24 [WARNING] [gold_ai2025.Part2_DeprecatedParams] Part 2: Is DEPRECATED. All tunable strategy parameters should be managed by StrategyConfig.
09:24:24 [INFO] [gold_ai2025.Part2_DeprecatedParams] Any true constants (e.g., for feature engineering) will be defined in their relevant sections or Part 1.
09:24:24 [INFO] [gold_ai2025.MLHelpers] Loading Machine Learning Configuration & Helpers (v4.9.13 - Refined Model Switcher)...
09:24:24 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_CLASSIFIER (L1 Filter): True
09:24:24 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_META_CLASSIFIER (L2 Filter): False
09:24:24 [INFO] [gold_ai2025.MLHelpers]   Initial Optuna Hyperparameter Tuning Enabled: False
09:24:24 [INFO] [gold_ai2025.MLHelpers]   Initial Auto Threshold Tuning Enabled: False
09:24:24 [INFO] [gold_ai2025.MT5Connector] Loading Part 12: MT5 Connector (Placeholder)...
09:24:24 [INFO] [gold_ai2025.MT5Connector] Part 12: MT5 Connector (Placeholder) Loaded.
09:24:24 [DEBUG] [gold_ai2025.Part14_FutureAdditions] Part 14: Placeholder for Future Additions reached.
09:24:24 [INFO] [gold_ai2025.Part15_EndOfScript] Reached End of Part 15 (Definitive End of Script Marker). Gold AI script processing complete.
09:24:24 [DEBUG] [gold_ai2025.StrategyConfig] Initializing StrategyConfig with dict: {}
09:24:24 [INFO] [gold_ai2025.StrategyConfig] StrategyConfig initialized. Risk/Trade: 0.010, Max Hold: 24 bars, Kill DD: 20.00%
09:24:24 [DEBUG] [gold_ai2025.StrategyConfig]   Feature Eng Params: M15 EMA Fast=50, M1 Rolling Z Window=300
09:24:24 [DEBUG] [gold_ai2025.StrategyConfig]   Default Signal Thresh: GainZ=0.3, RSI Buy=50
09:24:24 [DEBUG] [gold_ai2025.StrategyConfig]   Dynamic TP2 Params: HighVolBoost=1.2, LotBoostMult=1.1
09:24:24 [ERROR] [root] [Patch AI Studio v4.9.33] tag_price_structure_patterns: Input is not of expected DataFrame type or empty. Returning DataFrame with only ['Pattern_Label'] column for test compatibility.
09:24:24 [ERROR] [root] [Patch AI Studio v4.9.33] tag_price_structure_patterns: Input is not of expected DataFrame type or empty. Returning DataFrame with only ['Pattern_Label'] column for test compatibility.
PASSED                                                                   [ 58%]
test_gold_ai.py::TestBranchAndErrorPathCoverage::test_calculate_m15_trend_zone_empty_guard 
-------------------------------- live log call ---------------------------------
09:24:24 [INFO] [gold_ai2025.Part2_DeprecatedParams] Part 2: Core Parameters & Strategy Settings (DEPRECATED - Parameters now in StrategyConfig from YAML).
09:24:24 [WARNING] [gold_ai2025.Part2_DeprecatedParams] Part 2: Is DEPRECATED. All tunable strategy parameters should be managed by StrategyConfig.
09:24:24 [INFO] [gold_ai2025.Part2_DeprecatedParams] Any true constants (e.g., for feature engineering) will be defined in their relevant sections or Part 1.
09:24:24 [INFO] [gold_ai2025.MLHelpers] Loading Machine Learning Configuration & Helpers (v4.9.13 - Refined Model Switcher)...
09:24:24 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_CLASSIFIER (L1 Filter): True
09:24:24 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_META_CLASSIFIER (L2 Filter): False
09:24:24 [INFO] [gold_ai2025.MLHelpers]   Initial Optuna Hyperparameter Tuning Enabled: False
09:24:24 [INFO] [gold_ai2025.MLHelpers]   Initial Auto Threshold Tuning Enabled: False
09:24:25 [INFO] [gold_ai2025.MT5Connector] Loading Part 12: MT5 Connector (Placeholder)...
09:24:25 [INFO] [gold_ai2025.MT5Connector] Part 12: MT5 Connector (Placeholder) Loaded.
09:24:25 [DEBUG] [gold_ai2025.Part14_FutureAdditions] Part 14: Placeholder for Future Additions reached.
09:24:25 [INFO] [gold_ai2025.Part15_EndOfScript] Reached End of Part 15 (Definitive End of Script Marker). Gold AI script processing complete.
09:24:25 [DEBUG] [gold_ai2025.StrategyConfig] Initializing StrategyConfig with dict: {}
09:24:25 [INFO] [gold_ai2025.StrategyConfig] StrategyConfig initialized. Risk/Trade: 0.010, Max Hold: 24 bars, Kill DD: 20.00%
09:24:25 [DEBUG] [gold_ai2025.StrategyConfig]   Feature Eng Params: M15 EMA Fast=50, M1 Rolling Z Window=300
09:24:25 [DEBUG] [gold_ai2025.StrategyConfig]   Default Signal Thresh: GainZ=0.3, RSI Buy=50
09:24:25 [DEBUG] [gold_ai2025.StrategyConfig]   Dynamic TP2 Params: HighVolBoost=1.2, LotBoostMult=1.1
09:24:25 [ERROR] [root] [Patch AI Studio v4.9.33] calculate_m15_trend_zone: Input is not of expected DataFrame type or empty. Returning DataFrame with only ['Trend_Zone'] column for test compatibility.
PASSED                                                                   [ 58%]
test_gold_ai.py::TestBranchAndErrorPathCoverage::test_calculate_m15_trend_zone_expected_type_guard 
-------------------------------- live log call ---------------------------------
09:24:25 [INFO] [gold_ai2025.Part2_DeprecatedParams] Part 2: Core Parameters & Strategy Settings (DEPRECATED - Parameters now in StrategyConfig from YAML).
09:24:25 [WARNING] [gold_ai2025.Part2_DeprecatedParams] Part 2: Is DEPRECATED. All tunable strategy parameters should be managed by StrategyConfig.
09:24:25 [INFO] [gold_ai2025.Part2_DeprecatedParams] Any true constants (e.g., for feature engineering) will be defined in their relevant sections or Part 1.
09:24:25 [INFO] [gold_ai2025.MLHelpers] Loading Machine Learning Configuration & Helpers (v4.9.13 - Refined Model Switcher)...
09:24:25 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_CLASSIFIER (L1 Filter): True
09:24:25 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_META_CLASSIFIER (L2 Filter): False
09:24:25 [INFO] [gold_ai2025.MLHelpers]   Initial Optuna Hyperparameter Tuning Enabled: False
09:24:25 [INFO] [gold_ai2025.MLHelpers]   Initial Auto Threshold Tuning Enabled: False
09:24:25 [INFO] [gold_ai2025.MT5Connector] Loading Part 12: MT5 Connector (Placeholder)...
09:24:25 [INFO] [gold_ai2025.MT5Connector] Part 12: MT5 Connector (Placeholder) Loaded.
09:24:25 [DEBUG] [gold_ai2025.Part14_FutureAdditions] Part 14: Placeholder for Future Additions reached.
09:24:25 [INFO] [gold_ai2025.Part15_EndOfScript] Reached End of Part 15 (Definitive End of Script Marker). Gold AI script processing complete.
09:24:25 [DEBUG] [gold_ai2025.StrategyConfig] Initializing StrategyConfig with dict: {}
09:24:25 [INFO] [gold_ai2025.StrategyConfig] StrategyConfig initialized. Risk/Trade: 0.010, Max Hold: 24 bars, Kill DD: 20.00%
09:24:25 [DEBUG] [gold_ai2025.StrategyConfig]   Feature Eng Params: M15 EMA Fast=50, M1 Rolling Z Window=300
09:24:25 [DEBUG] [gold_ai2025.StrategyConfig]   Default Signal Thresh: GainZ=0.3, RSI Buy=50
09:24:25 [DEBUG] [gold_ai2025.StrategyConfig]   Dynamic TP2 Params: HighVolBoost=1.2, LotBoostMult=1.1
09:24:25 [ERROR] [root] [Patch AI Studio v4.9.33] calculate_m15_trend_zone: Input is not of expected DataFrame type or empty. Returning DataFrame with only ['Trend_Zone'] column for test compatibility.
PASSED                                                                   [ 59%]
test_gold_ai.py::test_trade_manager_update_methods 
-------------------------------- live log call ---------------------------------
09:24:25 [INFO] [gold_ai2025.Part2_DeprecatedParams] Part 2: Core Parameters & Strategy Settings (DEPRECATED - Parameters now in StrategyConfig from YAML).
09:24:25 [WARNING] [gold_ai2025.Part2_DeprecatedParams] Part 2: Is DEPRECATED. All tunable strategy parameters should be managed by StrategyConfig.
09:24:25 [INFO] [gold_ai2025.Part2_DeprecatedParams] Any true constants (e.g., for feature engineering) will be defined in their relevant sections or Part 1.
09:24:25 [INFO] [gold_ai2025.MLHelpers] Loading Machine Learning Configuration & Helpers (v4.9.13 - Refined Model Switcher)...
09:24:25 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_CLASSIFIER (L1 Filter): True
09:24:25 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_META_CLASSIFIER (L2 Filter): False
09:24:25 [INFO] [gold_ai2025.MLHelpers]   Initial Optuna Hyperparameter Tuning Enabled: False
09:24:25 [INFO] [gold_ai2025.MLHelpers]   Initial Auto Threshold Tuning Enabled: False
09:24:25 [INFO] [gold_ai2025.MT5Connector] Loading Part 12: MT5 Connector (Placeholder)...
09:24:25 [INFO] [gold_ai2025.MT5Connector] Part 12: MT5 Connector (Placeholder) Loaded.
09:24:25 [DEBUG] [gold_ai2025.Part14_FutureAdditions] Part 14: Placeholder for Future Additions reached.
09:24:25 [INFO] [gold_ai2025.Part15_EndOfScript] Reached End of Part 15 (Definitive End of Script Marker). Gold AI script processing complete.
09:24:25 [DEBUG] [gold_ai2025.StrategyConfig] Initializing StrategyConfig with dict: {}
09:24:25 [INFO] [gold_ai2025.StrategyConfig] StrategyConfig initialized. Risk/Trade: 0.010, Max Hold: 24 bars, Kill DD: 20.00%
09:24:25 [DEBUG] [gold_ai2025.StrategyConfig]   Feature Eng Params: M15 EMA Fast=50, M1 Rolling Z Window=300
09:24:25 [DEBUG] [gold_ai2025.StrategyConfig]   Default Signal Thresh: GainZ=0.3, RSI Buy=50
09:24:25 [DEBUG] [gold_ai2025.StrategyConfig]   Dynamic TP2 Params: HighVolBoost=1.2, LotBoostMult=1.1
09:24:25 [INFO] [gold_ai2025.RiskManager] RiskManager initialized. Hard Kill DD: 20.00%, Soft Kill DD: 15.00%
09:24:25 [INFO] [gold_ai2025.TradeManager] TradeManager initialized. FE Cooldown: 240 min, FE Score: 1.0, FE Max Losses: 2
09:24:25 [INFO] [root] [Patch AI Studio v4.9.40] Updated last_trade_time: 2023-01-01 00:00:00
09:24:25 [WARNING] [root] [Patch AI Studio v4.9.40] Attempted to update last_trade_time with None.
09:24:25 [WARNING] [root] [Patch AI Studio v4.9.40] Invalid trade_time (NaT/None/Type): NaT
09:24:25 [INFO] [root] [Patch AI Studio v4.9.40] Updated last_trade_time: 2023-01-02 00:00:00
09:24:25 [WARNING] [root] [Patch AI Studio v4.9.40] Invalid trade_time (NaT/None/Type): nan
PASSED                                                                   [ 60%]
test_gold_ai.py::test_run_backtest_simulation_minimal 
-------------------------------- live log call ---------------------------------
09:24:25 [INFO] [gold_ai2025.Part2_DeprecatedParams] Part 2: Core Parameters & Strategy Settings (DEPRECATED - Parameters now in StrategyConfig from YAML).
09:24:25 [WARNING] [gold_ai2025.Part2_DeprecatedParams] Part 2: Is DEPRECATED. All tunable strategy parameters should be managed by StrategyConfig.
09:24:25 [INFO] [gold_ai2025.Part2_DeprecatedParams] Any true constants (e.g., for feature engineering) will be defined in their relevant sections or Part 1.
09:24:25 [INFO] [gold_ai2025.MLHelpers] Loading Machine Learning Configuration & Helpers (v4.9.13 - Refined Model Switcher)...
09:24:25 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_CLASSIFIER (L1 Filter): True
09:24:25 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_META_CLASSIFIER (L2 Filter): False
09:24:25 [INFO] [gold_ai2025.MLHelpers]   Initial Optuna Hyperparameter Tuning Enabled: False
09:24:25 [INFO] [gold_ai2025.MLHelpers]   Initial Auto Threshold Tuning Enabled: False
09:24:25 [INFO] [gold_ai2025.MT5Connector] Loading Part 12: MT5 Connector (Placeholder)...
09:24:25 [INFO] [gold_ai2025.MT5Connector] Part 12: MT5 Connector (Placeholder) Loaded.
09:24:25 [DEBUG] [gold_ai2025.Part14_FutureAdditions] Part 14: Placeholder for Future Additions reached.
09:24:25 [INFO] [gold_ai2025.Part15_EndOfScript] Reached End of Part 15 (Definitive End of Script Marker). Gold AI script processing complete.
09:24:25 [DEBUG] [gold_ai2025.StrategyConfig] Initializing StrategyConfig with dict: {}
09:24:25 [INFO] [gold_ai2025.StrategyConfig] StrategyConfig initialized. Risk/Trade: 0.010, Max Hold: 24 bars, Kill DD: 20.00%
09:24:25 [DEBUG] [gold_ai2025.StrategyConfig]   Feature Eng Params: M15 EMA Fast=50, M1 Rolling Z Window=300
09:24:25 [DEBUG] [gold_ai2025.StrategyConfig]   Default Signal Thresh: GainZ=0.3, RSI Buy=50
09:24:25 [DEBUG] [gold_ai2025.StrategyConfig]   Dynamic TP2 Params: HighVolBoost=1.2, LotBoostMult=1.1
09:24:25 [INFO] [gold_ai2025.run_backtest_simulation_v34.Test.BUY] --- Starting Backtest Simulation (v4.9.23 - AI Studio Patch v4.9.1): Label='Test', Side='BUY', Fold=N/A ---
09:24:25 [WARNING] [gold_ai2025.run_backtest_simulation_v34.Test.BUY] [Test] RiskManager (risk_manager_obj) not provided. Initializing new one.
09:24:25 [INFO] [gold_ai2025.RiskManager] RiskManager initialized. Hard Kill DD: 20.00%, Soft Kill DD: 15.00%
09:24:25 [WARNING] [gold_ai2025.run_backtest_simulation_v34.Test.BUY] [Test] TradeManager (trade_manager_obj) not provided. Initializing new one.
09:24:25 [INFO] [gold_ai2025.TradeManager] TradeManager initialized. FE Cooldown: 240 min, FE Score: 1.0, FE Max Losses: 2
09:24:25 [INFO] [gold_ai2025.run_backtest_simulation_v34.Test.BUY] [Patch AI Studio v4.9.62+] Equity tracker history initialized as dict
09:24:25 [DEBUG] [gold_ai2025._predefine_result_columns_for_simulation] Predefining result columns in df_sim for label_suffix: _Test
09:24:25 [DEBUG] [gold_ai2025._predefine_result_columns_for_simulation] Finished predefining 44 columns for _Test.
09:24:25 [INFO] [gold_ai2025.run_backtest_simulation_v34.Test.BUY] [Test] Initializing simulation. Capital: $1000.00, Risk: 1.000%, MM Mode: balanced
09:24:25 [INFO] [gold_ai2025.run_backtest_simulation_v34.Test.BUY] [Test] Config: MaxHold=24, PTP En=True, ReEn=True, FE En=True
09:24:25 [INFO] [gold_ai2025.run_backtest_simulation_v34.Test.BUY] [Test] Initial KillSwitchState=False, InitialConsecLosses=0
09:24:25 [INFO] [gold_ai2025.run_backtest_simulation_v34.Test.BUY] Simulation loop finished for Test. Finalizing remaining orders...
09:24:25 [INFO] [gold_ai2025.run_backtest_simulation_v34.Test.BUY] Created trade log DataFrame for Test with 0 entries.
09:24:25 [INFO] [gold_ai2025.run_backtest_simulation_v34.Test.BUY]   (Finished) Test (BUY) simulation complete. Final Equity: $1000.00
09:24:25 [INFO] [gold_ai2025.run_backtest_simulation_v34.Test.BUY] [Patch AI Studio v4.9.62+] Fold summary: final equity=1000.00, len(history)=2, trade_log=0
PASSED                                                                   [ 60%]
test_gold_ai.py::test_calculate_metrics_minimal 
-------------------------------- live log call ---------------------------------
09:24:26 [INFO] [gold_ai2025.Part2_DeprecatedParams] Part 2: Core Parameters & Strategy Settings (DEPRECATED - Parameters now in StrategyConfig from YAML).
09:24:26 [WARNING] [gold_ai2025.Part2_DeprecatedParams] Part 2: Is DEPRECATED. All tunable strategy parameters should be managed by StrategyConfig.
09:24:26 [INFO] [gold_ai2025.Part2_DeprecatedParams] Any true constants (e.g., for feature engineering) will be defined in their relevant sections or Part 1.
09:24:26 [INFO] [gold_ai2025.MLHelpers] Loading Machine Learning Configuration & Helpers (v4.9.13 - Refined Model Switcher)...
09:24:26 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_CLASSIFIER (L1 Filter): True
09:24:26 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_META_CLASSIFIER (L2 Filter): False
09:24:26 [INFO] [gold_ai2025.MLHelpers]   Initial Optuna Hyperparameter Tuning Enabled: False
09:24:26 [INFO] [gold_ai2025.MLHelpers]   Initial Auto Threshold Tuning Enabled: False
09:24:26 [INFO] [gold_ai2025.MT5Connector] Loading Part 12: MT5 Connector (Placeholder)...
09:24:26 [INFO] [gold_ai2025.MT5Connector] Part 12: MT5 Connector (Placeholder) Loaded.
09:24:26 [DEBUG] [gold_ai2025.Part14_FutureAdditions] Part 14: Placeholder for Future Additions reached.
09:24:26 [INFO] [gold_ai2025.Part15_EndOfScript] Reached End of Part 15 (Definitive End of Script Marker). Gold AI script processing complete.
09:24:26 [DEBUG] [gold_ai2025.calculate_metrics_basic] Metrics calculated for fold 'minimal_test': {'fold_tag': 'minimal_test', 'num_trades': 1, 'num_tp': 1, 'num_sl': 0, 'num_be': 0, 'net_profit': 10.0}
PASSED                                                                   [ 61%]
test_gold_ai.py::test_calculate_metrics_with_string_entries 
-------------------------------- live log call ---------------------------------
09:24:26 [INFO] [gold_ai2025.Part2_DeprecatedParams] Part 2: Core Parameters & Strategy Settings (DEPRECATED - Parameters now in StrategyConfig from YAML).
09:24:26 [WARNING] [gold_ai2025.Part2_DeprecatedParams] Part 2: Is DEPRECATED. All tunable strategy parameters should be managed by StrategyConfig.
09:24:26 [INFO] [gold_ai2025.Part2_DeprecatedParams] Any true constants (e.g., for feature engineering) will be defined in their relevant sections or Part 1.
09:24:26 [INFO] [gold_ai2025.MLHelpers] Loading Machine Learning Configuration & Helpers (v4.9.13 - Refined Model Switcher)...
09:24:26 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_CLASSIFIER (L1 Filter): True
09:24:26 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_META_CLASSIFIER (L2 Filter): False
09:24:26 [INFO] [gold_ai2025.MLHelpers]   Initial Optuna Hyperparameter Tuning Enabled: False
09:24:26 [INFO] [gold_ai2025.MLHelpers]   Initial Auto Threshold Tuning Enabled: False
09:24:26 [INFO] [gold_ai2025.MT5Connector] Loading Part 12: MT5 Connector (Placeholder)...
09:24:26 [INFO] [gold_ai2025.MT5Connector] Part 12: MT5 Connector (Placeholder) Loaded.
09:24:26 [DEBUG] [gold_ai2025.Part14_FutureAdditions] Part 14: Placeholder for Future Additions reached.
09:24:26 [INFO] [gold_ai2025.Part15_EndOfScript] Reached End of Part 15 (Definitive End of Script Marker). Gold AI script processing complete.
09:24:26 [WARNING] [gold_ai2025.calculate_metrics_basic] [Patch AI Studio v4.9.66+] Ignoring non-dict trade_log entry at 2: 'invalid_entry'
09:24:26 [DEBUG] [gold_ai2025.calculate_metrics_basic] Metrics calculated for fold 'mixed': {'fold_tag': 'mixed', 'num_trades': 2, 'num_tp': 1, 'num_sl': 1, 'num_be': 0, 'net_profit': 10}
PASSED                                                                   [ 61%]
test_gold_ai.py::test_calculate_metrics_with_invalid_items 
-------------------------------- live log call ---------------------------------
09:24:26 [INFO] [gold_ai2025.Part2_DeprecatedParams] Part 2: Core Parameters & Strategy Settings (DEPRECATED - Parameters now in StrategyConfig from YAML).
09:24:26 [WARNING] [gold_ai2025.Part2_DeprecatedParams] Part 2: Is DEPRECATED. All tunable strategy parameters should be managed by StrategyConfig.
09:24:26 [INFO] [gold_ai2025.Part2_DeprecatedParams] Any true constants (e.g., for feature engineering) will be defined in their relevant sections or Part 1.
09:24:26 [INFO] [gold_ai2025.MLHelpers] Loading Machine Learning Configuration & Helpers (v4.9.13 - Refined Model Switcher)...
09:24:26 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_CLASSIFIER (L1 Filter): True
09:24:26 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_META_CLASSIFIER (L2 Filter): False
09:24:26 [INFO] [gold_ai2025.MLHelpers]   Initial Optuna Hyperparameter Tuning Enabled: False
09:24:26 [INFO] [gold_ai2025.MLHelpers]   Initial Auto Threshold Tuning Enabled: False
09:24:26 [INFO] [gold_ai2025.MT5Connector] Loading Part 12: MT5 Connector (Placeholder)...
09:24:26 [INFO] [gold_ai2025.MT5Connector] Part 12: MT5 Connector (Placeholder) Loaded.
09:24:26 [DEBUG] [gold_ai2025.Part14_FutureAdditions] Part 14: Placeholder for Future Additions reached.
09:24:26 [INFO] [gold_ai2025.Part15_EndOfScript] Reached End of Part 15 (Definitive End of Script Marker). Gold AI script processing complete.
09:24:26 [WARNING] [gold_ai2025.calculate_metrics_basic] [Patch AI Studio v4.9.66+] Ignoring non-dict trade_log entry at 0: 123
09:24:26 [WARNING] [gold_ai2025.calculate_metrics_basic] [Patch AI Studio v4.9.66+] Ignoring non-dict trade_log entry at 2: <object object at 0x7f8b8126e610>
09:24:26 [DEBUG] [gold_ai2025.calculate_metrics_basic] Metrics calculated for fold 'invalid': {'fold_tag': 'invalid', 'num_trades': 1, 'num_tp': 1, 'num_sl': 0, 'num_be': 0, 'net_profit': 5}
PASSED                                                                   [ 62%]
test_gold_ai.py::test_safe_load_csv_auto_nonexistent 
-------------------------------- live log call ---------------------------------
09:24:26 [INFO] [gold_ai2025.Part2_DeprecatedParams] Part 2: Core Parameters & Strategy Settings (DEPRECATED - Parameters now in StrategyConfig from YAML).
09:24:26 [WARNING] [gold_ai2025.Part2_DeprecatedParams] Part 2: Is DEPRECATED. All tunable strategy parameters should be managed by StrategyConfig.
09:24:26 [INFO] [gold_ai2025.Part2_DeprecatedParams] Any true constants (e.g., for feature engineering) will be defined in their relevant sections or Part 1.
09:24:26 [INFO] [gold_ai2025.MLHelpers] Loading Machine Learning Configuration & Helpers (v4.9.13 - Refined Model Switcher)...
09:24:26 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_CLASSIFIER (L1 Filter): True
09:24:26 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_META_CLASSIFIER (L2 Filter): False
09:24:26 [INFO] [gold_ai2025.MLHelpers]   Initial Optuna Hyperparameter Tuning Enabled: False
09:24:26 [INFO] [gold_ai2025.MLHelpers]   Initial Auto Threshold Tuning Enabled: False
09:24:26 [INFO] [gold_ai2025.MT5Connector] Loading Part 12: MT5 Connector (Placeholder)...
09:24:26 [INFO] [gold_ai2025.MT5Connector] Part 12: MT5 Connector (Placeholder) Loaded.
09:24:26 [DEBUG] [gold_ai2025.Part14_FutureAdditions] Part 14: Placeholder for Future Additions reached.
09:24:26 [INFO] [gold_ai2025.Part15_EndOfScript] Reached End of Part 15 (Definitive End of Script Marker). Gold AI script processing complete.
09:24:26 [INFO] [gold_ai2025.safe_load_csv_auto] [Patch][QA v4.9.85] (safe_load) Attempting to load: file_that_does_not_exist.csv
09:24:26 [WARNING] [gold_ai2025.safe_load_csv_auto] [Patch][QA v4.9.100] Could not create directory for CSV: FileNotFoundError(2, 'No such file or directory')
PASSED                                                                   [ 62%]
test_gold_ai.py::test_parse_datetime_safely_invalid_and_empty 
-------------------------------- live log call ---------------------------------
09:24:26 [INFO] [gold_ai2025.Part2_DeprecatedParams] Part 2: Core Parameters & Strategy Settings (DEPRECATED - Parameters now in StrategyConfig from YAML).
09:24:26 [WARNING] [gold_ai2025.Part2_DeprecatedParams] Part 2: Is DEPRECATED. All tunable strategy parameters should be managed by StrategyConfig.
09:24:26 [INFO] [gold_ai2025.Part2_DeprecatedParams] Any true constants (e.g., for feature engineering) will be defined in their relevant sections or Part 1.
09:24:26 [INFO] [gold_ai2025.MLHelpers] Loading Machine Learning Configuration & Helpers (v4.9.13 - Refined Model Switcher)...
09:24:26 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_CLASSIFIER (L1 Filter): True
09:24:26 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_META_CLASSIFIER (L2 Filter): False
09:24:26 [INFO] [gold_ai2025.MLHelpers]   Initial Optuna Hyperparameter Tuning Enabled: False
09:24:26 [INFO] [gold_ai2025.MLHelpers]   Initial Auto Threshold Tuning Enabled: False
09:24:26 [INFO] [gold_ai2025.MT5Connector] Loading Part 12: MT5 Connector (Placeholder)...
09:24:26 [INFO] [gold_ai2025.MT5Connector] Part 12: MT5 Connector (Placeholder) Loaded.
09:24:26 [DEBUG] [gold_ai2025.Part14_FutureAdditions] Part 14: Placeholder for Future Additions reached.
09:24:26 [INFO] [gold_ai2025.Part15_EndOfScript] Reached End of Part 15 (Definitive End of Script Marker). Gold AI script processing complete.
09:24:26 [ERROR] [gold_ai2025.parse_datetime_safely] Input must be a pandas Series.
09:24:26 [DEBUG] [gold_ai2025.parse_datetime_safely]       [Parser] Input series is empty, returning empty series.
PASSED                                                                   [ 63%]
test_gold_ai.py::test_parse_datetime_safely_unknown_format 
-------------------------------- live log call ---------------------------------
09:24:27 [INFO] [gold_ai2025.Part2_DeprecatedParams] Part 2: Core Parameters & Strategy Settings (DEPRECATED - Parameters now in StrategyConfig from YAML).
09:24:27 [WARNING] [gold_ai2025.Part2_DeprecatedParams] Part 2: Is DEPRECATED. All tunable strategy parameters should be managed by StrategyConfig.
09:24:27 [INFO] [gold_ai2025.Part2_DeprecatedParams] Any true constants (e.g., for feature engineering) will be defined in their relevant sections or Part 1.
09:24:27 [INFO] [gold_ai2025.MLHelpers] Loading Machine Learning Configuration & Helpers (v4.9.13 - Refined Model Switcher)...
09:24:27 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_CLASSIFIER (L1 Filter): True
09:24:27 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_META_CLASSIFIER (L2 Filter): False
09:24:27 [INFO] [gold_ai2025.MLHelpers]   Initial Optuna Hyperparameter Tuning Enabled: False
09:24:27 [INFO] [gold_ai2025.MLHelpers]   Initial Auto Threshold Tuning Enabled: False
09:24:27 [INFO] [gold_ai2025.MT5Connector] Loading Part 12: MT5 Connector (Placeholder)...
09:24:27 [INFO] [gold_ai2025.MT5Connector] Part 12: MT5 Connector (Placeholder) Loaded.
09:24:27 [DEBUG] [gold_ai2025.Part14_FutureAdditions] Part 14: Placeholder for Future Additions reached.
09:24:27 [INFO] [gold_ai2025.Part15_EndOfScript] Reached End of Part 15 (Definitive End of Script Marker). Gold AI script processing complete.
09:24:27 [INFO] [gold_ai2025.parse_datetime_safely]       [Parser] Attempting to parse date/time strings...
09:24:27 [DEBUG] [gold_ai2025.parse_datetime_safely]       [Parser] Trying format: '%Y%m%d %H:%M:%S' for 2 values...
09:24:27 [DEBUG] [gold_ai2025.parse_datetime_safely]       [Parser] Trying format: '%Y%m%d%H:%M:%S' for 2 values...
09:24:27 [DEBUG] [gold_ai2025.parse_datetime_safely]       [Parser] Trying format: '%Y-%m-%d %H:%M:%S' for 2 values...
09:24:27 [DEBUG] [gold_ai2025.parse_datetime_safely]       [Parser] Trying format: '%Y/%m/%d %H:%M:%S' for 2 values...
09:24:27 [INFO] [gold_ai2025.parse_datetime_safely]       [Parser] (Success) Format '%Y/%m/%d %H:%M:%S' matched: 1. Remaining: 1
09:24:27 [DEBUG] [gold_ai2025.parse_datetime_safely]       [Parser] Trying format: '%Y.%m.%d %H:%M:%S' for 1 values...
09:24:27 [DEBUG] [gold_ai2025.parse_datetime_safely]       [Parser] Trying format: '%d/%m/%Y %H:%M:%S' for 1 values...
09:24:28 [DEBUG] [gold_ai2025.parse_datetime_safely]       [Parser] Trying format: '%m/%d/%Y %H:%M:%S' for 1 values...
09:24:28 [INFO] [gold_ai2025.parse_datetime_safely]       [Parser] Trying general parser for 1 remaining values...
09:24:28 [INFO] [gold_ai2025.parse_datetime_safely]          -> (Success) General parser matched: 1. Remaining: 0
09:24:28 [INFO] [gold_ai2025.parse_datetime_safely]       [Parser] (Finished) Date/time parsing complete.
PASSED                                                                   [ 63%]
test_gold_ai.py::test_risk_manager_update_drawdown_edge_cases 
-------------------------------- live log call ---------------------------------
09:24:28 [INFO] [gold_ai2025.Part2_DeprecatedParams] Part 2: Core Parameters & Strategy Settings (DEPRECATED - Parameters now in StrategyConfig from YAML).
09:24:28 [WARNING] [gold_ai2025.Part2_DeprecatedParams] Part 2: Is DEPRECATED. All tunable strategy parameters should be managed by StrategyConfig.
09:24:28 [INFO] [gold_ai2025.Part2_DeprecatedParams] Any true constants (e.g., for feature engineering) will be defined in their relevant sections or Part 1.
09:24:28 [INFO] [gold_ai2025.MLHelpers] Loading Machine Learning Configuration & Helpers (v4.9.13 - Refined Model Switcher)...
09:24:28 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_CLASSIFIER (L1 Filter): True
09:24:28 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_META_CLASSIFIER (L2 Filter): False
09:24:28 [INFO] [gold_ai2025.MLHelpers]   Initial Optuna Hyperparameter Tuning Enabled: False
09:24:28 [INFO] [gold_ai2025.MLHelpers]   Initial Auto Threshold Tuning Enabled: False
09:24:28 [INFO] [gold_ai2025.MT5Connector] Loading Part 12: MT5 Connector (Placeholder)...
09:24:28 [INFO] [gold_ai2025.MT5Connector] Part 12: MT5 Connector (Placeholder) Loaded.
09:24:28 [DEBUG] [gold_ai2025.Part14_FutureAdditions] Part 14: Placeholder for Future Additions reached.
09:24:28 [INFO] [gold_ai2025.Part15_EndOfScript] Reached End of Part 15 (Definitive End of Script Marker). Gold AI script processing complete.
09:24:28 [DEBUG] [gold_ai2025.StrategyConfig] Initializing StrategyConfig with dict: {}
09:24:28 [INFO] [gold_ai2025.StrategyConfig] StrategyConfig initialized. Risk/Trade: 0.010, Max Hold: 24 bars, Kill DD: 20.00%
09:24:28 [DEBUG] [gold_ai2025.StrategyConfig]   Feature Eng Params: M15 EMA Fast=50, M1 Rolling Z Window=300
09:24:28 [DEBUG] [gold_ai2025.StrategyConfig]   Default Signal Thresh: GainZ=0.3, RSI Buy=50
09:24:28 [DEBUG] [gold_ai2025.StrategyConfig]   Dynamic TP2 Params: HighVolBoost=1.2, LotBoostMult=1.1
09:24:28 [INFO] [gold_ai2025.RiskManager] RiskManager initialized. Hard Kill DD: 20.00%, Soft Kill DD: 15.00%
09:24:28 [WARNING] [gold_ai2025.RiskManager] [Patch AI Studio v4.9.58+] current_equity is None/NaN in update_drawdown, forcing 0.0
09:24:28 [INFO] [gold_ai2025.RiskManager] [Patch AI Studio v4.9.58+] Drawdown peak initialized to 1.00
09:24:28 [INFO] [gold_ai2025.RiskManager] [Patch AI Studio v4.9.58+] Drawdown updated: Equity=0.00, Peak=1.00, DD=1.0000
09:24:28 [CRITICAL] [gold_ai2025.RiskManager] [Patch AI Studio v4.9.58+][RISK] Soft Kill ACTIVATED: DD=1.0000 >= 0.1500
09:24:28 [CRITICAL] [gold_ai2025.RiskManager] [Patch AI Studio v4.9.59+][Patch] [RISK - KILL SWITCH] Max Drawdown Triggered! EQ=0.00, Peak=1.00, DD=1.0000 >= 0.2000
09:24:28 [WARNING] [gold_ai2025.RiskManager] [Patch AI Studio v4.9.58+] current_equity is None/NaN in update_drawdown, forcing 0.0
09:24:28 [INFO] [gold_ai2025.RiskManager] [Patch AI Studio v4.9.58+] Drawdown updated: Equity=0.00, Peak=100.00, DD=1.0000
09:24:28 [CRITICAL] [gold_ai2025.RiskManager] [Patch AI Studio v4.9.59+][Patch] [RISK - KILL SWITCH] Max Drawdown Triggered! EQ=0.00, Peak=100.00, DD=1.0000 >= 0.2000
09:24:28 [INFO] [gold_ai2025.RiskManager] [Patch AI Studio v4.9.58+] Drawdown updated: Equity=900.00, Peak=1000.00, DD=0.1000
09:24:28 [CRITICAL] [gold_ai2025.RiskManager] [Patch AI Studio v4.9.58+][RISK] Soft Kill DEACTIVATED: DD=0.1000 < 0.1500
09:24:28 [WARNING] [gold_ai2025.RiskManager] [Patch AI Studio v4.9.58+] current_equity is negative! Forcing to 0.0
09:24:28 [INFO] [gold_ai2025.RiskManager] [Patch AI Studio v4.9.58+] Drawdown updated: Equity=0.00, Peak=1000.00, DD=1.0000
09:24:28 [CRITICAL] [gold_ai2025.RiskManager] [Patch AI Studio v4.9.58+][RISK] Soft Kill ACTIVATED: DD=1.0000 >= 0.1500
09:24:28 [CRITICAL] [gold_ai2025.RiskManager] [Patch AI Studio v4.9.59+][Patch] [RISK - KILL SWITCH] Max Drawdown Triggered! EQ=0.00, Peak=1000.00, DD=1.0000 >= 0.2000
PASSED                                                                   [ 64%]
test_gold_ai.py::TestRobustFormatAndTypeGuard::test_float_fmt_cases 
-------------------------------- live log call ---------------------------------
09:24:28 [INFO] [gold_ai2025.Part2_DeprecatedParams] Part 2: Core Parameters & Strategy Settings (DEPRECATED - Parameters now in StrategyConfig from YAML).
09:24:28 [WARNING] [gold_ai2025.Part2_DeprecatedParams] Part 2: Is DEPRECATED. All tunable strategy parameters should be managed by StrategyConfig.
09:24:28 [INFO] [gold_ai2025.Part2_DeprecatedParams] Any true constants (e.g., for feature engineering) will be defined in their relevant sections or Part 1.
09:24:28 [INFO] [gold_ai2025.MLHelpers] Loading Machine Learning Configuration & Helpers (v4.9.13 - Refined Model Switcher)...
09:24:28 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_CLASSIFIER (L1 Filter): True
09:24:28 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_META_CLASSIFIER (L2 Filter): False
09:24:28 [INFO] [gold_ai2025.MLHelpers]   Initial Optuna Hyperparameter Tuning Enabled: False
09:24:28 [INFO] [gold_ai2025.MLHelpers]   Initial Auto Threshold Tuning Enabled: False
09:24:28 [INFO] [gold_ai2025.MT5Connector] Loading Part 12: MT5 Connector (Placeholder)...
09:24:28 [INFO] [gold_ai2025.MT5Connector] Part 12: MT5 Connector (Placeholder) Loaded.
09:24:28 [DEBUG] [gold_ai2025.Part14_FutureAdditions] Part 14: Placeholder for Future Additions reached.
09:24:28 [INFO] [gold_ai2025.Part15_EndOfScript] Reached End of Part 15 (Definitive End of Script Marker). Gold AI script processing complete.
PASSED                                                                   [ 64%]
test_gold_ai.py::TestRobustFormatAndTypeGuard::test_isinstance_safe 
-------------------------------- live log call ---------------------------------
09:24:28 [INFO] [gold_ai2025.Part2_DeprecatedParams] Part 2: Core Parameters & Strategy Settings (DEPRECATED - Parameters now in StrategyConfig from YAML).
09:24:28 [WARNING] [gold_ai2025.Part2_DeprecatedParams] Part 2: Is DEPRECATED. All tunable strategy parameters should be managed by StrategyConfig.
09:24:28 [INFO] [gold_ai2025.Part2_DeprecatedParams] Any true constants (e.g., for feature engineering) will be defined in their relevant sections or Part 1.
09:24:28 [INFO] [gold_ai2025.MLHelpers] Loading Machine Learning Configuration & Helpers (v4.9.13 - Refined Model Switcher)...
09:24:28 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_CLASSIFIER (L1 Filter): True
09:24:28 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_META_CLASSIFIER (L2 Filter): False
09:24:28 [INFO] [gold_ai2025.MLHelpers]   Initial Optuna Hyperparameter Tuning Enabled: False
09:24:28 [INFO] [gold_ai2025.MLHelpers]   Initial Auto Threshold Tuning Enabled: False
09:24:28 [INFO] [gold_ai2025.MT5Connector] Loading Part 12: MT5 Connector (Placeholder)...
09:24:28 [INFO] [gold_ai2025.MT5Connector] Part 12: MT5 Connector (Placeholder) Loaded.
09:24:28 [DEBUG] [gold_ai2025.Part14_FutureAdditions] Part 14: Placeholder for Future Additions reached.
09:24:28 [INFO] [gold_ai2025.Part15_EndOfScript] Reached End of Part 15 (Definitive End of Script Marker). Gold AI script processing complete.
09:24:28 [ERROR] [root] [Patch AI Studio v4.9.40] _isinstance_safe: expected_type is not a valid type: 'str', returning False.
09:24:28 [ERROR] [root] [Patch AI Studio v4.9.40] _isinstance_safe: expected_type is MagicMock without DataFrame-like, returning False.
09:24:28 [ERROR] [root] [Patch AI Studio v4.9.40] _isinstance_safe: expected_type is not a valid type: (123, 'bad'), returning False.
09:24:28 [ERROR] [root] [Patch AI Studio v4.9.40] _isinstance_safe: expected_type is not a valid type: <test_gold_ai.TestRobustFormatAndTypeGuard.test_isinstance_safe.<locals>.DummyType object at 0x7f8b7f61ea50>, returning False.
PASSED                                                                   [ 65%]
test_gold_ai.py::TestRobustFormatAndTypeGuard::test_isinstance_safe_additional_types 
-------------------------------- live log call ---------------------------------
09:24:28 [INFO] [gold_ai2025.Part2_DeprecatedParams] Part 2: Core Parameters & Strategy Settings (DEPRECATED - Parameters now in StrategyConfig from YAML).
09:24:28 [WARNING] [gold_ai2025.Part2_DeprecatedParams] Part 2: Is DEPRECATED. All tunable strategy parameters should be managed by StrategyConfig.
09:24:28 [INFO] [gold_ai2025.Part2_DeprecatedParams] Any true constants (e.g., for feature engineering) will be defined in their relevant sections or Part 1.
09:24:28 [INFO] [gold_ai2025.MLHelpers] Loading Machine Learning Configuration & Helpers (v4.9.13 - Refined Model Switcher)...
09:24:28 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_CLASSIFIER (L1 Filter): True
09:24:28 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_META_CLASSIFIER (L2 Filter): False
09:24:28 [INFO] [gold_ai2025.MLHelpers]   Initial Optuna Hyperparameter Tuning Enabled: False
09:24:28 [INFO] [gold_ai2025.MLHelpers]   Initial Auto Threshold Tuning Enabled: False
09:24:29 [INFO] [gold_ai2025.MT5Connector] Loading Part 12: MT5 Connector (Placeholder)...
09:24:29 [INFO] [gold_ai2025.MT5Connector] Part 12: MT5 Connector (Placeholder) Loaded.
09:24:29 [DEBUG] [gold_ai2025.Part14_FutureAdditions] Part 14: Placeholder for Future Additions reached.
09:24:29 [INFO] [gold_ai2025.Part15_EndOfScript] Reached End of Part 15 (Definitive End of Script Marker). Gold AI script processing complete.
09:24:29 [ERROR] [root] [Patch AI Studio v4.9.40] _isinstance_safe: expected_type is not a valid type: [<class 'int'>, <class 'str'>], returning False.
09:24:29 [ERROR] [root] [Patch AI Studio v4.9.40] _isinstance_safe: expected_type is not a valid type: 3.14, returning False.
PASSED                                                                   [ 65%]
test_gold_ai.py::TestRobustFormatAndTypeGuard::test_trade_manager_update_last_trade_time 
-------------------------------- live log call ---------------------------------
09:24:29 [INFO] [gold_ai2025.Part2_DeprecatedParams] Part 2: Core Parameters & Strategy Settings (DEPRECATED - Parameters now in StrategyConfig from YAML).
09:24:29 [WARNING] [gold_ai2025.Part2_DeprecatedParams] Part 2: Is DEPRECATED. All tunable strategy parameters should be managed by StrategyConfig.
09:24:29 [INFO] [gold_ai2025.Part2_DeprecatedParams] Any true constants (e.g., for feature engineering) will be defined in their relevant sections or Part 1.
09:24:29 [INFO] [gold_ai2025.MLHelpers] Loading Machine Learning Configuration & Helpers (v4.9.13 - Refined Model Switcher)...
09:24:29 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_CLASSIFIER (L1 Filter): True
09:24:29 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_META_CLASSIFIER (L2 Filter): False
09:24:29 [INFO] [gold_ai2025.MLHelpers]   Initial Optuna Hyperparameter Tuning Enabled: False
09:24:29 [INFO] [gold_ai2025.MLHelpers]   Initial Auto Threshold Tuning Enabled: False
09:24:29 [INFO] [gold_ai2025.MT5Connector] Loading Part 12: MT5 Connector (Placeholder)...
09:24:29 [INFO] [gold_ai2025.MT5Connector] Part 12: MT5 Connector (Placeholder) Loaded.
09:24:29 [DEBUG] [gold_ai2025.Part14_FutureAdditions] Part 14: Placeholder for Future Additions reached.
09:24:29 [INFO] [gold_ai2025.Part15_EndOfScript] Reached End of Part 15 (Definitive End of Script Marker). Gold AI script processing complete.
09:24:29 [DEBUG] [gold_ai2025.StrategyConfig] Initializing StrategyConfig with dict: {}
09:24:29 [INFO] [gold_ai2025.StrategyConfig] StrategyConfig initialized. Risk/Trade: 0.010, Max Hold: 24 bars, Kill DD: 20.00%
09:24:29 [DEBUG] [gold_ai2025.StrategyConfig]   Feature Eng Params: M15 EMA Fast=50, M1 Rolling Z Window=300
09:24:29 [DEBUG] [gold_ai2025.StrategyConfig]   Default Signal Thresh: GainZ=0.3, RSI Buy=50
09:24:29 [DEBUG] [gold_ai2025.StrategyConfig]   Dynamic TP2 Params: HighVolBoost=1.2, LotBoostMult=1.1
09:24:29 [INFO] [gold_ai2025.RiskManager] RiskManager initialized. Hard Kill DD: 20.00%, Soft Kill DD: 15.00%
09:24:29 [INFO] [gold_ai2025.TradeManager] TradeManager initialized. FE Cooldown: 240 min, FE Score: 1.0, FE Max Losses: 2
09:24:29 [INFO] [root] [Patch AI Studio v4.9.40] Updated last_trade_time: 2023-01-01 00:00:00
09:24:29 [WARNING] [root] [Patch AI Studio v4.9.40] Attempted to update last_trade_time with None.
09:24:29 [INFO] [root] [Patch AI Studio v4.9.40] Updated last_trade_time: 2023-01-02 00:00:00
09:24:29 [INFO] [root] [Patch AI Studio v4.9.40] Updated last_trade_time: 2023-01-01 00:00:00
09:24:29 [WARNING] [root] [Patch AI Studio v4.9.40] Invalid trade_time (NaT/None/Type): nan
09:24:29 [WARNING] [root] [Patch AI Studio v4.9.40] Attempted to update last_trade_time with None.
09:24:29 [WARNING] [root] [Patch AI Studio v4.9.40] Invalid trade_time (NaT/None/Type): nan
09:24:29 [WARNING] [root] [Patch AI Studio v4.9.40] Could not parse trade_time: not-a-date
PASSED                                                                   [ 66%]
test_gold_ai.py::test_full_e2e_backtest_and_export 
-------------------------------- live log call ---------------------------------
09:24:29 [INFO] [gold_ai2025.Part2_DeprecatedParams] Part 2: Core Parameters & Strategy Settings (DEPRECATED - Parameters now in StrategyConfig from YAML).
09:24:29 [WARNING] [gold_ai2025.Part2_DeprecatedParams] Part 2: Is DEPRECATED. All tunable strategy parameters should be managed by StrategyConfig.
09:24:29 [INFO] [gold_ai2025.Part2_DeprecatedParams] Any true constants (e.g., for feature engineering) will be defined in their relevant sections or Part 1.
09:24:29 [INFO] [gold_ai2025.MLHelpers] Loading Machine Learning Configuration & Helpers (v4.9.13 - Refined Model Switcher)...
09:24:29 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_CLASSIFIER (L1 Filter): True
09:24:29 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_META_CLASSIFIER (L2 Filter): False
09:24:29 [INFO] [gold_ai2025.MLHelpers]   Initial Optuna Hyperparameter Tuning Enabled: False
09:24:29 [INFO] [gold_ai2025.MLHelpers]   Initial Auto Threshold Tuning Enabled: False
09:24:29 [INFO] [gold_ai2025.MT5Connector] Loading Part 12: MT5 Connector (Placeholder)...
09:24:29 [INFO] [gold_ai2025.MT5Connector] Part 12: MT5 Connector (Placeholder) Loaded.
09:24:29 [DEBUG] [gold_ai2025.Part14_FutureAdditions] Part 14: Placeholder for Future Additions reached.
09:24:29 [INFO] [gold_ai2025.Part15_EndOfScript] Reached End of Part 15 (Definitive End of Script Marker). Gold AI script processing complete.
09:24:29 [INFO] [gold_ai2025.load_data] (Loading) กำลังโหลดข้อมูล  จาก: /content/drive/MyDrive/new/random_gold.csv
09:24:29 [INFO] [gold_ai2025.load_data]    ไฟล์ข้อมูล: /content/drive/MyDrive/new/random_gold.csv
09:24:29 [DEBUG] [gold_ai2025.load_data]    Converting price columns ['Open', 'High', 'Low', 'Close'] to numeric (if not already specified in dtypes)...
09:24:29 [DEBUG] [gold_ai2025.load_data]    [Data Quality] Checking for invalid prices (<= 0)...
09:24:29 [DEBUG] [gold_ai2025.load_data]    [Data Quality] Checking High >= Low consistency...
09:24:29 [INFO] [gold_ai2025.load_data]    [Data Quality] ตรวจสอบ % NaN ในคอลัมน์ราคา...
09:24:29 [INFO] [gold_ai2025.load_data]       NaN Percentage:
Open     0.0
High     0.0
Low      0.0
Close    0.0
dtype: float64
09:24:29 [INFO] [gold_ai2025.load_data]    [Data Quality] ตรวจสอบ Duplicates (Date & Timestamp)...
09:24:29 [DEBUG] [gold_ai2025.load_data]       ไม่พบ Duplicates (Date & Timestamp).
09:24:29 [INFO] [gold_ai2025.load_data]    [Data Quality] ตรวจสอบ Price Jumps (Threshold > 10.0%)...
09:24:29 [DEBUG] [gold_ai2025.load_data]       ไม่พบ Price Jumps ที่ผิดปกติ.
09:24:29 [INFO] [gold_ai2025.load_data] (Success) โหลดและตรวจสอบข้อมูล  สำเร็จ: 50 แถว
09:24:29 [DEBUG] [gold_ai2025.StrategyConfig] Initializing StrategyConfig with dict: {}
09:24:29 [INFO] [gold_ai2025.StrategyConfig] StrategyConfig initialized. Risk/Trade: 0.010, Max Hold: 24 bars, Kill DD: 20.00%
09:24:29 [DEBUG] [gold_ai2025.StrategyConfig]   Feature Eng Params: M15 EMA Fast=50, M1 Rolling Z Window=300
09:24:29 [DEBUG] [gold_ai2025.StrategyConfig]   Default Signal Thresh: GainZ=0.3, RSI Buy=50
09:24:29 [DEBUG] [gold_ai2025.StrategyConfig]   Dynamic TP2 Params: HighVolBoost=1.2, LotBoostMult=1.1
09:24:29 [INFO] [gold_ai2025.engineer_m1_features] (Processing) กำลังสร้าง Features M1 (using StrategyConfig)...
09:24:29 [ERROR] [root] [Patch][QA v4.9.90] engineer_m1_features: ATR_14 missing or all NaN, fallback to pd.Series([np.nan]*len(df)).
09:24:29 [INFO] [root] [Patch][QA v4.9.90] engineer_m1_features: Fallback applied, ATR_14 is all NaN as expected for missing.
09:24:29 [WARNING] [gold_ai2025.atr]    (Warning) TA library ATR calculation failed: module 'ta.volatility' has no attribute 'AverageTrueRange'. Falling back to manual.
09:24:30 [WARNING] [gold_ai2025.engineer_m1_features] [Patch AI Studio v4.9.67+] ta.trend.ADXIndicator not available; using manual ADX.
09:24:30 [INFO] [gold_ai2025.engineer_m1_features]       Creating 'session' column using config.session_times_utc...
09:24:30 [WARNING] [gold_ai2025.engineer_m1_features]          (Warning) Original index is not a valid DatetimeIndex. Session tagging will result in 'Error_Tagging_Reindex_Fill'.
09:24:30 [INFO] [gold_ai2025.engineer_m1_features]          Session distribution:
session
Error_Tagging_Reindex_Fill    1.0
09:24:30 [INFO] [gold_ai2025.engineer_m1_features] (Success) สร้าง Features M1 (using StrategyConfig) เสร็จสิ้น.
09:24:30 [INFO] [gold_ai2025.prepare_datetime] (Processing) กำลังเตรียม Datetime Index ()...
09:24:30 [WARNING] [gold_ai2025.prepare_datetime]    StrategyConfig not provided or missing 'max_nat_ratio_threshold'. Using default: 0.05
09:24:30 [INFO] [gold_ai2025.preview_datetime_format]    [Preview] First 5 Date + Timestamp format examples:
09:24:30 [INFO] [gold_ai2025.preview_datetime_format] 
20230101 00:00:00
20230101 00:01:00
20230101 00:02:00
20230101 00:03:00
20230101 00:04:00
09:24:30 [INFO] [gold_ai2025.prepare_datetime]       [Converter] กำลังตรวจสอบและแปลงปี พ.ศ. เป็น ค.ศ. (ถ้าจำเป็น)...
09:24:30 [INFO] [gold_ai2025.prepare_datetime]       [Converter] ไม่พบปีที่น่าจะเป็น พ.ศ. (หรือข้อมูลน้อยเกินไป).
09:24:30 [DEBUG] [gold_ai2025.prepare_datetime]       Combining Date and Timestamp strings...
09:24:30 [INFO] [gold_ai2025.parse_datetime_safely]       [Parser] Attempting to parse date/time strings...
09:24:30 [DEBUG] [gold_ai2025.parse_datetime_safely]       [Parser] Trying format: '%Y%m%d %H:%M:%S' for 50 values...
09:24:30 [INFO] [gold_ai2025.parse_datetime_safely]       [Parser] (Success) Format '%Y%m%d %H:%M:%S' matched: 50. Remaining: 0
09:24:30 [DEBUG] [gold_ai2025.parse_datetime_safely]       [Parser] All strings parsed.
09:24:30 [INFO] [gold_ai2025.parse_datetime_safely]       [Parser] (Finished) Date/time parsing complete.
09:24:30 [DEBUG] [gold_ai2025.prepare_datetime]    ไม่พบค่า NaT ใน  หลังการ parse.
09:24:30 [DEBUG] [gold_ai2025.prepare_datetime]    Checking for non-monotonic index (time reversals)...
09:24:30 [DEBUG] [gold_ai2025.prepare_datetime]       Index is monotonic increasing.
09:24:30 [INFO] [gold_ai2025.prepare_datetime] (Success) เตรียม Datetime index () สำเร็จ. Shape: (50, 32)
09:24:30 [DEBUG] [gold_ai2025.StrategyConfig] Initializing StrategyConfig with dict: {'initial_capital': 1000, 'risk_per_trade': 0.01}
09:24:30 [INFO] [gold_ai2025.StrategyConfig] StrategyConfig initialized. Risk/Trade: 0.010, Max Hold: 24 bars, Kill DD: 20.00%
09:24:30 [DEBUG] [gold_ai2025.StrategyConfig]   Feature Eng Params: M15 EMA Fast=50, M1 Rolling Z Window=300
09:24:30 [DEBUG] [gold_ai2025.StrategyConfig]   Default Signal Thresh: GainZ=0.3, RSI Buy=50
09:24:30 [DEBUG] [gold_ai2025.StrategyConfig]   Dynamic TP2 Params: HighVolBoost=1.2, LotBoostMult=1.1
09:24:30 [INFO] [gold_ai2025.simulate_trades] [Patch v4.9.52] simulate_trades received 'side': BUY
09:24:30 [INFO] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.26] simulate_trades start
09:24:30 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.70+] ATR undefined, using NaN fallback.
09:24:30 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.70+] MACD undefined, using NaN fallback.
09:24:30 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.70+] RSI undefined, using default 50.
09:24:30 [INFO] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.73+] [Patch] Forced Entry Audit: 0 forced entries logged: []
09:24:30 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.65+] Initialized empty trade_log_df with exit_reason column
09:24:30 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.56+] Returning dict (default)
09:24:30 [WARNING] [gold_ai2025.calculate_metrics_basic] [Patch AI Studio v4.9.56+] Extra kwargs ignored in calculate_metrics: ['side']
09:24:30 [WARNING] [gold_ai2025.calculate_metrics_basic] [Patch AI Studio v4.9.66+] Ignoring non-dict trade_log entry at 0: 'exit_reason'
09:24:30 [DEBUG] [gold_ai2025.calculate_metrics_basic] Metrics calculated for fold 'e2e': {'fold_tag': 'e2e', 'num_trades': 0, 'num_tp': 0, 'num_sl': 0, 'num_be': 0, 'net_profit': 0}
09:24:30 [WARNING] [GoldAI_Export] [Patch AI Studio v4.9.58+] trade_log is empty or has no columns, exporting header only (or skipping export).
PASSED                                                                   [ 67%]
test_gold_ai.py::test_run_wfv_multi_fold 
-------------------------------- live log call ---------------------------------
09:24:30 [INFO] [gold_ai2025.Part2_DeprecatedParams] Part 2: Core Parameters & Strategy Settings (DEPRECATED - Parameters now in StrategyConfig from YAML).
09:24:30 [WARNING] [gold_ai2025.Part2_DeprecatedParams] Part 2: Is DEPRECATED. All tunable strategy parameters should be managed by StrategyConfig.
09:24:30 [INFO] [gold_ai2025.Part2_DeprecatedParams] Any true constants (e.g., for feature engineering) will be defined in their relevant sections or Part 1.
09:24:30 [INFO] [gold_ai2025.MLHelpers] Loading Machine Learning Configuration & Helpers (v4.9.13 - Refined Model Switcher)...
09:24:30 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_CLASSIFIER (L1 Filter): True
09:24:30 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_META_CLASSIFIER (L2 Filter): False
09:24:30 [INFO] [gold_ai2025.MLHelpers]   Initial Optuna Hyperparameter Tuning Enabled: False
09:24:30 [INFO] [gold_ai2025.MLHelpers]   Initial Auto Threshold Tuning Enabled: False
09:24:30 [INFO] [gold_ai2025.MT5Connector] Loading Part 12: MT5 Connector (Placeholder)...
09:24:30 [INFO] [gold_ai2025.MT5Connector] Part 12: MT5 Connector (Placeholder) Loaded.
09:24:30 [DEBUG] [gold_ai2025.Part14_FutureAdditions] Part 14: Placeholder for Future Additions reached.
09:24:30 [INFO] [gold_ai2025.Part15_EndOfScript] Reached End of Part 15 (Definitive End of Script Marker). Gold AI script processing complete.
09:24:30 [DEBUG] [gold_ai2025.StrategyConfig] Initializing StrategyConfig with dict: {'initial_capital': 1000, 'n_walk_forward_splits': 2, 'risk_per_trade': 0.01}
09:24:30 [INFO] [gold_ai2025.StrategyConfig] StrategyConfig initialized. Risk/Trade: 0.010, Max Hold: 24 bars, Kill DD: 20.00%
09:24:30 [DEBUG] [gold_ai2025.StrategyConfig]   Feature Eng Params: M15 EMA Fast=50, M1 Rolling Z Window=300
09:24:30 [DEBUG] [gold_ai2025.StrategyConfig]   Default Signal Thresh: GainZ=0.3, RSI Buy=50
09:24:30 [DEBUG] [gold_ai2025.StrategyConfig]   Dynamic TP2 Params: HighVolBoost=1.2, LotBoostMult=1.1
09:24:30 [INFO] [gold_ai2025.run_all_folds_with_threshold] Detected legacy argument order; adjusted parameters.
09:24:30 [WARNING] [gold_ai2025.run_all_folds_with_threshold] trade_manager_obj not provided; using dummy instance.
09:24:30 [INFO] [gold_ai2025.RiskManager] RiskManager initialized. Hard Kill DD: 20.00%, Soft Kill DD: 15.00%
09:24:30 [WARNING] [gold_ai2025.run_all_folds_with_threshold] risk_manager_obj not provided; initialized new RiskManager.
09:24:30 [WARNING] [gold_ai2025.run_all_folds_with_threshold] output_dir_for_wfv not provided; using '/content/drive/MyDrive/new'.
09:24:30 [INFO] [gold_ai2025.run_all_folds_with_threshold] [Patch][QA v4.9.87] Using /content/drive/MyDrive/new as the only valid test path.
09:24:30 [INFO] [gold_ai2025.run_all_folds_with_threshold]       [Runner (Prep Data - Fund: FALLBACK_FUND)] Starting Full WF Sim (L1_Th=0.30) for 2 folds.
09:24:30 [INFO] [gold_ai2025.run_all_folds_with_threshold]    RiskManager and TradeManager states reset for WFV execution of Fund: FALLBACK_FUND
09:24:30 [INFO] [gold_ai2025.run_all_folds_with_threshold] 
--- Completed All 2 Folds for Fund: FALLBACK_FUND ---
09:24:31 [INFO] [gold_ai2025.calculate_metrics.Overall WF Buy (FALLBACK_FUND)]   (Metrics) Calculating full metrics for: 'Overall WF Buy (FALLBACK_FUND)'...
09:24:31 [WARNING] [gold_ai2025.calculate_metrics.Overall WF Buy (FALLBACK_FUND)]     No trades logged for 'Overall WF Buy (FALLBACK_FUND)'.
09:24:31 [INFO] [gold_ai2025.calculate_metrics.Overall WF Buy (FALLBACK_FUND)]   (Metrics) Finished calculating full metrics for: 'Overall WF Buy (FALLBACK_FUND)'.
09:24:31 [INFO] [gold_ai2025.calculate_metrics.Overall WF Sell (FALLBACK_FUND)]   (Metrics) Calculating full metrics for: 'Overall WF Sell (FALLBACK_FUND)'...
09:24:31 [WARNING] [gold_ai2025.calculate_metrics.Overall WF Sell (FALLBACK_FUND)]     No trades logged for 'Overall WF Sell (FALLBACK_FUND)'.
09:24:31 [INFO] [gold_ai2025.calculate_metrics.Overall WF Sell (FALLBACK_FUND)]   (Metrics) Finished calculating full metrics for: 'Overall WF Sell (FALLBACK_FUND)'.
09:24:31 [INFO] [gold_ai2025.export_run_summary_to_json] [Patch AI Studio v4.9.59+] [Patch] run_summary exported successfully: /content/drive/MyDrive/new/run_summary_FALLBACK_FUND_WFV_ALL_SUMMARY_20250521_092431.json
09:24:31 [INFO] [gold_ai2025.run_all_folds_with_threshold] --- Finished WFV Simulation for Fund: FALLBACK_FUND ---
09:24:31 [DEBUG] [gold_ai2025.StrategyConfig] Initializing StrategyConfig with dict: {'initial_capital': 1000, 'n_walk_forward_splits': 3, 'risk_per_trade': 0.01}
09:24:31 [INFO] [gold_ai2025.StrategyConfig] StrategyConfig initialized. Risk/Trade: 0.010, Max Hold: 24 bars, Kill DD: 20.00%
09:24:31 [DEBUG] [gold_ai2025.StrategyConfig]   Feature Eng Params: M15 EMA Fast=50, M1 Rolling Z Window=300
09:24:31 [DEBUG] [gold_ai2025.StrategyConfig]   Default Signal Thresh: GainZ=0.3, RSI Buy=50
09:24:31 [DEBUG] [gold_ai2025.StrategyConfig]   Dynamic TP2 Params: HighVolBoost=1.2, LotBoostMult=1.1
09:24:31 [INFO] [gold_ai2025.run_all_folds_with_threshold] Detected legacy argument order; adjusted parameters.
09:24:31 [WARNING] [gold_ai2025.run_all_folds_with_threshold] trade_manager_obj not provided; using dummy instance.
09:24:31 [INFO] [gold_ai2025.RiskManager] RiskManager initialized. Hard Kill DD: 20.00%, Soft Kill DD: 15.00%
09:24:31 [WARNING] [gold_ai2025.run_all_folds_with_threshold] risk_manager_obj not provided; initialized new RiskManager.
09:24:31 [WARNING] [gold_ai2025.run_all_folds_with_threshold] output_dir_for_wfv not provided; using '/content/drive/MyDrive/new'.
09:24:31 [INFO] [gold_ai2025.run_all_folds_with_threshold] [Patch][QA v4.9.87] Using /content/drive/MyDrive/new as the only valid test path.
09:24:31 [INFO] [gold_ai2025.run_all_folds_with_threshold]       [Runner (Prep Data - Fund: FALLBACK_FUND)] Starting Full WF Sim (L1_Th=0.50) for 3 folds.
09:24:31 [INFO] [gold_ai2025.run_all_folds_with_threshold]    RiskManager and TradeManager states reset for WFV execution of Fund: FALLBACK_FUND
09:24:31 [INFO] [gold_ai2025.run_all_folds_with_threshold] 
--- Completed All 3 Folds for Fund: FALLBACK_FUND ---
09:24:31 [INFO] [gold_ai2025.calculate_metrics.Overall WF Buy (FALLBACK_FUND)]   (Metrics) Calculating full metrics for: 'Overall WF Buy (FALLBACK_FUND)'...
09:24:31 [WARNING] [gold_ai2025.calculate_metrics.Overall WF Buy (FALLBACK_FUND)]     No trades logged for 'Overall WF Buy (FALLBACK_FUND)'.
09:24:31 [INFO] [gold_ai2025.calculate_metrics.Overall WF Buy (FALLBACK_FUND)]   (Metrics) Finished calculating full metrics for: 'Overall WF Buy (FALLBACK_FUND)'.
09:24:31 [INFO] [gold_ai2025.calculate_metrics.Overall WF Sell (FALLBACK_FUND)]   (Metrics) Calculating full metrics for: 'Overall WF Sell (FALLBACK_FUND)'...
09:24:31 [WARNING] [gold_ai2025.calculate_metrics.Overall WF Sell (FALLBACK_FUND)]     No trades logged for 'Overall WF Sell (FALLBACK_FUND)'.
09:24:31 [INFO] [gold_ai2025.calculate_metrics.Overall WF Sell (FALLBACK_FUND)]   (Metrics) Finished calculating full metrics for: 'Overall WF Sell (FALLBACK_FUND)'.
09:24:31 [INFO] [gold_ai2025.export_run_summary_to_json] [Patch AI Studio v4.9.59+] [Patch] run_summary exported successfully: /content/drive/MyDrive/new/run_summary_FALLBACK_FUND_WFV_ALL_SUMMARY_20250521_092431.json
09:24:31 [INFO] [gold_ai2025.run_all_folds_with_threshold] --- Finished WFV Simulation for Fund: FALLBACK_FUND ---
09:24:31 [DEBUG] [gold_ai2025.StrategyConfig] Initializing StrategyConfig with dict: {'initial_capital': 1000, 'n_walk_forward_splits': 4, 'risk_per_trade': 0.01}
09:24:31 [INFO] [gold_ai2025.StrategyConfig] StrategyConfig initialized. Risk/Trade: 0.010, Max Hold: 24 bars, Kill DD: 20.00%
09:24:31 [DEBUG] [gold_ai2025.StrategyConfig]   Feature Eng Params: M15 EMA Fast=50, M1 Rolling Z Window=300
09:24:31 [DEBUG] [gold_ai2025.StrategyConfig]   Default Signal Thresh: GainZ=0.3, RSI Buy=50
09:24:31 [DEBUG] [gold_ai2025.StrategyConfig]   Dynamic TP2 Params: HighVolBoost=1.2, LotBoostMult=1.1
09:24:31 [INFO] [gold_ai2025.run_all_folds_with_threshold] Detected legacy argument order; adjusted parameters.
09:24:31 [WARNING] [gold_ai2025.run_all_folds_with_threshold] trade_manager_obj not provided; using dummy instance.
09:24:31 [INFO] [gold_ai2025.RiskManager] RiskManager initialized. Hard Kill DD: 20.00%, Soft Kill DD: 15.00%
09:24:31 [WARNING] [gold_ai2025.run_all_folds_with_threshold] risk_manager_obj not provided; initialized new RiskManager.
09:24:31 [WARNING] [gold_ai2025.run_all_folds_with_threshold] output_dir_for_wfv not provided; using '/content/drive/MyDrive/new'.
09:24:31 [INFO] [gold_ai2025.run_all_folds_with_threshold] [Patch][QA v4.9.87] Using /content/drive/MyDrive/new as the only valid test path.
09:24:31 [INFO] [gold_ai2025.run_all_folds_with_threshold]       [Runner (Prep Data - Fund: FALLBACK_FUND)] Starting Full WF Sim (L1_Th=0.70) for 4 folds.
09:24:31 [INFO] [gold_ai2025.run_all_folds_with_threshold]    RiskManager and TradeManager states reset for WFV execution of Fund: FALLBACK_FUND
09:24:31 [INFO] [gold_ai2025.run_all_folds_with_threshold] 
--- Completed All 4 Folds for Fund: FALLBACK_FUND ---
09:24:31 [INFO] [gold_ai2025.calculate_metrics.Overall WF Buy (FALLBACK_FUND)]   (Metrics) Calculating full metrics for: 'Overall WF Buy (FALLBACK_FUND)'...
09:24:31 [WARNING] [gold_ai2025.calculate_metrics.Overall WF Buy (FALLBACK_FUND)]     No trades logged for 'Overall WF Buy (FALLBACK_FUND)'.
09:24:31 [INFO] [gold_ai2025.calculate_metrics.Overall WF Buy (FALLBACK_FUND)]   (Metrics) Finished calculating full metrics for: 'Overall WF Buy (FALLBACK_FUND)'.
09:24:31 [INFO] [gold_ai2025.calculate_metrics.Overall WF Sell (FALLBACK_FUND)]   (Metrics) Calculating full metrics for: 'Overall WF Sell (FALLBACK_FUND)'...
09:24:31 [WARNING] [gold_ai2025.calculate_metrics.Overall WF Sell (FALLBACK_FUND)]     No trades logged for 'Overall WF Sell (FALLBACK_FUND)'.
09:24:31 [INFO] [gold_ai2025.calculate_metrics.Overall WF Sell (FALLBACK_FUND)]   (Metrics) Finished calculating full metrics for: 'Overall WF Sell (FALLBACK_FUND)'.
09:24:31 [INFO] [gold_ai2025.export_run_summary_to_json] [Patch AI Studio v4.9.59+] [Patch] run_summary exported successfully: /content/drive/MyDrive/new/run_summary_FALLBACK_FUND_WFV_ALL_SUMMARY_20250521_092431.json
09:24:31 [INFO] [gold_ai2025.run_all_folds_with_threshold] --- Finished WFV Simulation for Fund: FALLBACK_FUND ---
PASSED                                                                   [ 67%]
test_gold_ai.py::test_risk_trade_manager_forced_entry_spike 
-------------------------------- live log call ---------------------------------
09:24:31 [INFO] [gold_ai2025.Part2_DeprecatedParams] Part 2: Core Parameters & Strategy Settings (DEPRECATED - Parameters now in StrategyConfig from YAML).
09:24:31 [WARNING] [gold_ai2025.Part2_DeprecatedParams] Part 2: Is DEPRECATED. All tunable strategy parameters should be managed by StrategyConfig.
09:24:31 [INFO] [gold_ai2025.Part2_DeprecatedParams] Any true constants (e.g., for feature engineering) will be defined in their relevant sections or Part 1.
09:24:31 [INFO] [gold_ai2025.MLHelpers] Loading Machine Learning Configuration & Helpers (v4.9.13 - Refined Model Switcher)...
09:24:31 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_CLASSIFIER (L1 Filter): True
09:24:31 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_META_CLASSIFIER (L2 Filter): False
09:24:31 [INFO] [gold_ai2025.MLHelpers]   Initial Optuna Hyperparameter Tuning Enabled: False
09:24:31 [INFO] [gold_ai2025.MLHelpers]   Initial Auto Threshold Tuning Enabled: False
09:24:31 [INFO] [gold_ai2025.MT5Connector] Loading Part 12: MT5 Connector (Placeholder)...
09:24:31 [INFO] [gold_ai2025.MT5Connector] Part 12: MT5 Connector (Placeholder) Loaded.
09:24:31 [DEBUG] [gold_ai2025.Part14_FutureAdditions] Part 14: Placeholder for Future Additions reached.
09:24:31 [INFO] [gold_ai2025.Part15_EndOfScript] Reached End of Part 15 (Definitive End of Script Marker). Gold AI script processing complete.
09:24:31 [DEBUG] [gold_ai2025.StrategyConfig] Initializing StrategyConfig with dict: {}
09:24:31 [INFO] [gold_ai2025.StrategyConfig] StrategyConfig initialized. Risk/Trade: 0.010, Max Hold: 24 bars, Kill DD: 20.00%
09:24:31 [DEBUG] [gold_ai2025.StrategyConfig]   Feature Eng Params: M15 EMA Fast=50, M1 Rolling Z Window=300
09:24:31 [DEBUG] [gold_ai2025.StrategyConfig]   Default Signal Thresh: GainZ=0.3, RSI Buy=50
09:24:31 [DEBUG] [gold_ai2025.StrategyConfig]   Dynamic TP2 Params: HighVolBoost=1.2, LotBoostMult=1.1
09:24:31 [INFO] [gold_ai2025.engineer_m1_features] (Processing) กำลังสร้าง Features M1 (using StrategyConfig)...
09:24:31 [ERROR] [root] [Patch][QA v4.9.90] engineer_m1_features: ATR_14 missing or all NaN, fallback to pd.Series([np.nan]*len(df)).
09:24:31 [INFO] [root] [Patch][QA v4.9.90] engineer_m1_features: Fallback applied, ATR_14 is all NaN as expected for missing.
09:24:31 [WARNING] [gold_ai2025.atr]    (Warning) TA library ATR calculation failed: module 'ta.volatility' has no attribute 'AverageTrueRange'. Falling back to manual.
09:24:31 [WARNING] [gold_ai2025.engineer_m1_features] [Patch AI Studio v4.9.67+] ta.trend.ADXIndicator not available; using manual ADX.
09:24:31 [INFO] [gold_ai2025.engineer_m1_features]       Creating 'session' column using config.session_times_utc...
09:24:31 [WARNING] [gold_ai2025.engineer_m1_features]          (Warning) Original index is not a valid DatetimeIndex. Session tagging will result in 'Error_Tagging_Reindex_Fill'.
09:24:31 [INFO] [gold_ai2025.engineer_m1_features]          Session distribution:
session
Error_Tagging_Reindex_Fill    1.0
09:24:31 [INFO] [gold_ai2025.engineer_m1_features] (Success) สร้าง Features M1 (using StrategyConfig) เสร็จสิ้น.
09:24:31 [INFO] [gold_ai2025.prepare_datetime] (Processing) กำลังเตรียม Datetime Index ()...
09:24:31 [WARNING] [gold_ai2025.prepare_datetime]    StrategyConfig not provided or missing 'max_nat_ratio_threshold'. Using default: 0.05
09:24:31 [INFO] [gold_ai2025.preview_datetime_format]    [Preview] First 5 Date + Timestamp format examples:
09:24:31 [INFO] [gold_ai2025.preview_datetime_format] 
20230101 00:00:00
20230101 00:01:00
20230101 00:02:00
20230101 00:03:00
20230101 00:04:00
09:24:32 [INFO] [gold_ai2025.prepare_datetime]       [Converter] กำลังตรวจสอบและแปลงปี พ.ศ. เป็น ค.ศ. (ถ้าจำเป็น)...
09:24:32 [INFO] [gold_ai2025.prepare_datetime]       [Converter] ไม่พบปีที่น่าจะเป็น พ.ศ. (หรือข้อมูลน้อยเกินไป).
09:24:32 [DEBUG] [gold_ai2025.prepare_datetime]       Combining Date and Timestamp strings...
09:24:32 [INFO] [gold_ai2025.parse_datetime_safely]       [Parser] Attempting to parse date/time strings...
09:24:32 [DEBUG] [gold_ai2025.parse_datetime_safely]       [Parser] Trying format: '%Y%m%d %H:%M:%S' for 30 values...
09:24:32 [INFO] [gold_ai2025.parse_datetime_safely]       [Parser] (Success) Format '%Y%m%d %H:%M:%S' matched: 30. Remaining: 0
09:24:32 [DEBUG] [gold_ai2025.parse_datetime_safely]       [Parser] All strings parsed.
09:24:32 [INFO] [gold_ai2025.parse_datetime_safely]       [Parser] (Finished) Date/time parsing complete.
09:24:32 [DEBUG] [gold_ai2025.prepare_datetime]    ไม่พบค่า NaT ใน  หลังการ parse.
09:24:32 [DEBUG] [gold_ai2025.prepare_datetime]    Checking for non-monotonic index (time reversals)...
09:24:32 [DEBUG] [gold_ai2025.prepare_datetime]       Index is monotonic increasing.
09:24:32 [INFO] [gold_ai2025.prepare_datetime] (Success) เตรียม Datetime index () สำเร็จ. Shape: (30, 32)
09:24:32 [DEBUG] [gold_ai2025.StrategyConfig] Initializing StrategyConfig with dict: {'initial_capital': 1000, 'risk_per_trade': 0.1, 'force_entry_on_signal': True, 'enable_spike_guard': True, 'spike_guard_threshold': 0.5}
09:24:32 [INFO] [gold_ai2025.StrategyConfig] StrategyConfig initialized. Risk/Trade: 0.100, Max Hold: 24 bars, Kill DD: 20.00%
09:24:32 [DEBUG] [gold_ai2025.StrategyConfig]   Feature Eng Params: M15 EMA Fast=50, M1 Rolling Z Window=300
09:24:32 [DEBUG] [gold_ai2025.StrategyConfig]   Default Signal Thresh: GainZ=0.3, RSI Buy=50
09:24:32 [DEBUG] [gold_ai2025.StrategyConfig]   Dynamic TP2 Params: HighVolBoost=1.2, LotBoostMult=1.1
09:24:32 [INFO] [gold_ai2025.TradeManager] TradeManager initialized. FE Cooldown: 240 min, FE Score: 1.0, FE Max Losses: 2
09:24:32 [INFO] [gold_ai2025.RiskManager] RiskManager initialized. Hard Kill DD: 20.00%, Soft Kill DD: 15.00%
09:24:32 [INFO] [gold_ai2025.simulate_trades] [Patch v4.9.52] simulate_trades received 'side': BUY
09:24:32 [INFO] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.26] simulate_trades start
09:24:32 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.70+] ATR undefined, using NaN fallback.
09:24:32 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.70+] MACD undefined, using NaN fallback.
09:24:32 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.70+] RSI undefined, using default 50.
09:24:32 [DEBUG] [gold_ai2025.TradeManager] [Patch AI Studio v4.9.58+] No last trade time, cooldown met.
09:24:32 [DEBUG] [gold_ai2025.TradeManager] [Patch AI Studio v4.9.58+] Forced entry: score 0.0 < min 1.0
09:24:32 [DEBUG] [gold_ai2025.TradeManager] [Patch AI Studio v4.9.58+] No last trade time, cooldown met.
09:24:32 [DEBUG] [gold_ai2025.TradeManager] [Patch AI Studio v4.9.58+] Forced entry: score 0.0 < min 1.0
09:24:32 [DEBUG] [gold_ai2025.TradeManager] [Patch AI Studio v4.9.58+] No last trade time, cooldown met.
09:24:32 [DEBUG] [gold_ai2025.TradeManager] [Patch AI Studio v4.9.58+] Forced entry: score 0.0 < min 1.0
09:24:32 [DEBUG] [gold_ai2025.TradeManager] [Patch AI Studio v4.9.58+] No last trade time, cooldown met.
09:24:32 [DEBUG] [gold_ai2025.TradeManager] [Patch AI Studio v4.9.58+] Forced entry: score 0.0 < min 1.0
09:24:32 [DEBUG] [gold_ai2025.TradeManager] [Patch AI Studio v4.9.58+] No last trade time, cooldown met.
09:24:32 [DEBUG] [gold_ai2025.TradeManager] [Patch AI Studio v4.9.58+] Forced entry: score 0.0 < min 1.0
09:24:32 [DEBUG] [gold_ai2025.TradeManager] [Patch AI Studio v4.9.58+] No last trade time, cooldown met.
09:24:32 [DEBUG] [gold_ai2025.TradeManager] [Patch AI Studio v4.9.58+] Forced entry: score 0.0 < min 1.0
09:24:32 [DEBUG] [gold_ai2025.TradeManager] [Patch AI Studio v4.9.58+] No last trade time, cooldown met.
09:24:32 [DEBUG] [gold_ai2025.TradeManager] [Patch AI Studio v4.9.58+] Forced entry: score 0.0 < min 1.0
09:24:32 [DEBUG] [gold_ai2025.TradeManager] [Patch AI Studio v4.9.58+] No last trade time, cooldown met.
09:24:32 [DEBUG] [gold_ai2025.TradeManager] [Patch AI Studio v4.9.58+] Forced entry: score 0.0 < min 1.0
09:24:32 [DEBUG] [gold_ai2025.TradeManager] [Patch AI Studio v4.9.58+] No last trade time, cooldown met.
09:24:32 [DEBUG] [gold_ai2025.TradeManager] [Patch AI Studio v4.9.58+] Forced entry: score 0.0 < min 1.0
09:24:32 [DEBUG] [gold_ai2025.TradeManager] [Patch AI Studio v4.9.58+] No last trade time, cooldown met.
09:24:32 [DEBUG] [gold_ai2025.TradeManager] [Patch AI Studio v4.9.58+] Forced entry: score 0.0 < min 1.0
09:24:32 [DEBUG] [gold_ai2025.TradeManager] [Patch AI Studio v4.9.58+] No last trade time, cooldown met.
09:24:32 [DEBUG] [gold_ai2025.TradeManager] [Patch AI Studio v4.9.58+] Forced entry: score 0.0 < min 1.0
09:24:32 [DEBUG] [gold_ai2025.TradeManager] [Patch AI Studio v4.9.58+] No last trade time, cooldown met.
09:24:32 [DEBUG] [gold_ai2025.TradeManager] [Patch AI Studio v4.9.58+] Forced entry: score 0.0 < min 1.0
09:24:32 [DEBUG] [gold_ai2025.TradeManager] [Patch AI Studio v4.9.58+] No last trade time, cooldown met.
09:24:32 [DEBUG] [gold_ai2025.TradeManager] [Patch AI Studio v4.9.58+] Forced entry: score 0.0 < min 1.0
09:24:32 [DEBUG] [gold_ai2025.TradeManager] [Patch AI Studio v4.9.58+] No last trade time, cooldown met.
09:24:32 [DEBUG] [gold_ai2025.TradeManager] [Patch AI Studio v4.9.58+] Forced entry: score 0.0 < min 1.0
09:24:32 [DEBUG] [gold_ai2025.TradeManager] [Patch AI Studio v4.9.58+] No last trade time, cooldown met.
09:24:32 [DEBUG] [gold_ai2025.TradeManager] [Patch AI Studio v4.9.58+] Forced entry: score 0.0 < min 1.0
09:24:32 [DEBUG] [gold_ai2025.TradeManager] [Patch AI Studio v4.9.58+] No last trade time, cooldown met.
09:24:32 [DEBUG] [gold_ai2025.TradeManager] [Patch AI Studio v4.9.58+] Forced entry: score 0.0 < min 1.0
09:24:32 [DEBUG] [gold_ai2025.TradeManager] [Patch AI Studio v4.9.58+] No last trade time, cooldown met.
09:24:32 [DEBUG] [gold_ai2025.TradeManager] [Patch AI Studio v4.9.58+] Forced entry: score 0.0 < min 1.0
09:24:32 [DEBUG] [gold_ai2025.TradeManager] [Patch AI Studio v4.9.58+] No last trade time, cooldown met.
09:24:32 [DEBUG] [gold_ai2025.TradeManager] [Patch AI Studio v4.9.58+] Forced entry: score 0.0 < min 1.0
09:24:32 [DEBUG] [gold_ai2025.TradeManager] [Patch AI Studio v4.9.58+] No last trade time, cooldown met.
09:24:32 [DEBUG] [gold_ai2025.TradeManager] [Patch AI Studio v4.9.58+] Forced entry: score 0.0 < min 1.0
09:24:32 [DEBUG] [gold_ai2025.TradeManager] [Patch AI Studio v4.9.58+] No last trade time, cooldown met.
09:24:32 [DEBUG] [gold_ai2025.TradeManager] [Patch AI Studio v4.9.58+] Forced entry: score 0.0 < min 1.0
09:24:32 [DEBUG] [gold_ai2025.TradeManager] [Patch AI Studio v4.9.58+] No last trade time, cooldown met.
09:24:32 [DEBUG] [gold_ai2025.TradeManager] [Patch AI Studio v4.9.58+] Forced entry: score 0.0 < min 1.0
09:24:32 [DEBUG] [gold_ai2025.TradeManager] [Patch AI Studio v4.9.58+] No last trade time, cooldown met.
09:24:32 [DEBUG] [gold_ai2025.TradeManager] [Patch AI Studio v4.9.58+] Forced entry: score 0.0 < min 1.0
09:24:32 [DEBUG] [gold_ai2025.TradeManager] [Patch AI Studio v4.9.58+] No last trade time, cooldown met.
09:24:32 [DEBUG] [gold_ai2025.TradeManager] [Patch AI Studio v4.9.58+] Forced entry: score 0.0 < min 1.0
09:24:32 [DEBUG] [gold_ai2025.TradeManager] [Patch AI Studio v4.9.58+] No last trade time, cooldown met.
09:24:32 [DEBUG] [gold_ai2025.TradeManager] [Patch AI Studio v4.9.58+] Forced entry: score 0.0 < min 1.0
09:24:32 [DEBUG] [gold_ai2025.TradeManager] [Patch AI Studio v4.9.58+] No last trade time, cooldown met.
09:24:32 [DEBUG] [gold_ai2025.TradeManager] [Patch AI Studio v4.9.58+] Forced entry: score 0.0 < min 1.0
09:24:32 [DEBUG] [gold_ai2025.TradeManager] [Patch AI Studio v4.9.58+] No last trade time, cooldown met.
09:24:32 [DEBUG] [gold_ai2025.TradeManager] [Patch AI Studio v4.9.58+] Forced entry: score 0.0 < min 1.0
09:24:32 [DEBUG] [gold_ai2025.TradeManager] [Patch AI Studio v4.9.58+] No last trade time, cooldown met.
09:24:32 [DEBUG] [gold_ai2025.TradeManager] [Patch AI Studio v4.9.58+] Forced entry: score 0.0 < min 1.0
09:24:32 [DEBUG] [gold_ai2025.TradeManager] [Patch AI Studio v4.9.58+] No last trade time, cooldown met.
09:24:32 [DEBUG] [gold_ai2025.TradeManager] [Patch AI Studio v4.9.58+] Forced entry: score 0.0 < min 1.0
09:24:32 [DEBUG] [gold_ai2025.TradeManager] [Patch AI Studio v4.9.58+] No last trade time, cooldown met.
09:24:32 [DEBUG] [gold_ai2025.TradeManager] [Patch AI Studio v4.9.58+] Forced entry: score 0.0 < min 1.0
09:24:32 [DEBUG] [gold_ai2025.TradeManager] [Patch AI Studio v4.9.58+] No last trade time, cooldown met.
09:24:32 [DEBUG] [gold_ai2025.TradeManager] [Patch AI Studio v4.9.58+] Forced entry: score 0.0 < min 1.0
09:24:32 [INFO] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.73+] [Patch] Forced Entry Audit: 0 forced entries logged: []
09:24:32 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.65+] Initialized empty trade_log_df with exit_reason column
09:24:32 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.56+] Returning dict (default)
09:24:32 [INFO] [GoldAI_UnitTest] [Patch AI Studio v4.9.58+] Export trade_log shape: (0, 1)
09:24:32 [INFO] [GoldAI.SpikeGuard] [Patch AI Studio v4.9.58+] Checking spike guard: session=London, score=0.6, threshold=0.75, pattern=Breakout, allowed_patterns=['Breakout', 'StrongTrend']
09:24:32 [INFO] [GoldAI.SpikeGuard] [Patch AI Studio v4.9.58+] Spike guard allowed: session=London, score=0.6, pattern=Breakout
PASSED                                                                   [ 68%]
test_gold_ai.py::test_forced_entry_audit_logic 
-------------------------------- live log call ---------------------------------
09:24:32 [INFO] [gold_ai2025.Part2_DeprecatedParams] Part 2: Core Parameters & Strategy Settings (DEPRECATED - Parameters now in StrategyConfig from YAML).
09:24:32 [WARNING] [gold_ai2025.Part2_DeprecatedParams] Part 2: Is DEPRECATED. All tunable strategy parameters should be managed by StrategyConfig.
09:24:32 [INFO] [gold_ai2025.Part2_DeprecatedParams] Any true constants (e.g., for feature engineering) will be defined in their relevant sections or Part 1.
09:24:32 [INFO] [gold_ai2025.MLHelpers] Loading Machine Learning Configuration & Helpers (v4.9.13 - Refined Model Switcher)...
09:24:32 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_CLASSIFIER (L1 Filter): True
09:24:32 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_META_CLASSIFIER (L2 Filter): False
09:24:32 [INFO] [gold_ai2025.MLHelpers]   Initial Optuna Hyperparameter Tuning Enabled: False
09:24:32 [INFO] [gold_ai2025.MLHelpers]   Initial Auto Threshold Tuning Enabled: False
09:24:32 [INFO] [gold_ai2025.MT5Connector] Loading Part 12: MT5 Connector (Placeholder)...
09:24:32 [INFO] [gold_ai2025.MT5Connector] Part 12: MT5 Connector (Placeholder) Loaded.
09:24:32 [DEBUG] [gold_ai2025.Part14_FutureAdditions] Part 14: Placeholder for Future Additions reached.
09:24:32 [INFO] [gold_ai2025.Part15_EndOfScript] Reached End of Part 15 (Definitive End of Script Marker). Gold AI script processing complete.
09:24:32 [INFO] [gold_ai2025.Part2_DeprecatedParams] Part 2: Core Parameters & Strategy Settings (DEPRECATED - Parameters now in StrategyConfig from YAML).
09:24:32 [WARNING] [gold_ai2025.Part2_DeprecatedParams] Part 2: Is DEPRECATED. All tunable strategy parameters should be managed by StrategyConfig.
09:24:32 [INFO] [gold_ai2025.Part2_DeprecatedParams] Any true constants (e.g., for feature engineering) will be defined in their relevant sections or Part 1.
09:24:32 [INFO] [gold_ai2025.MLHelpers] Loading Machine Learning Configuration & Helpers (v4.9.13 - Refined Model Switcher)...
09:24:32 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_CLASSIFIER (L1 Filter): True
09:24:32 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_META_CLASSIFIER (L2 Filter): False
09:24:32 [INFO] [gold_ai2025.MLHelpers]   Initial Optuna Hyperparameter Tuning Enabled: False
09:24:32 [INFO] [gold_ai2025.MLHelpers]   Initial Auto Threshold Tuning Enabled: False
09:24:32 [INFO] [gold_ai2025.MT5Connector] Loading Part 12: MT5 Connector (Placeholder)...
09:24:32 [INFO] [gold_ai2025.MT5Connector] Part 12: MT5 Connector (Placeholder) Loaded.
09:24:32 [DEBUG] [gold_ai2025.Part14_FutureAdditions] Part 14: Placeholder for Future Additions reached.
09:24:32 [INFO] [gold_ai2025.Part15_EndOfScript] Reached End of Part 15 (Definitive End of Script Marker). Gold AI script processing complete.
09:24:32 [DEBUG] [gold_ai2025.StrategyConfig] Initializing StrategyConfig with dict: {}
09:24:32 [INFO] [gold_ai2025.StrategyConfig] StrategyConfig initialized. Risk/Trade: 0.010, Max Hold: 24 bars, Kill DD: 20.00%
09:24:32 [DEBUG] [gold_ai2025.StrategyConfig]   Feature Eng Params: M15 EMA Fast=50, M1 Rolling Z Window=300
09:24:32 [DEBUG] [gold_ai2025.StrategyConfig]   Default Signal Thresh: GainZ=0.3, RSI Buy=50
09:24:32 [DEBUG] [gold_ai2025.StrategyConfig]   Dynamic TP2 Params: HighVolBoost=1.2, LotBoostMult=1.1
09:24:32 [INFO] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.26] simulate_trades start
09:24:32 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.70+] ATR undefined, using NaN fallback.
09:24:32 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.70+] MACD undefined, using NaN fallback.
09:24:32 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.70+] RSI undefined, using default 50.
09:24:32 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.28] Triggered BE-SL: OrderIdx:0, Side:BUY, Entry:1000.0, Exit:995, PNL:0.0
09:24:32 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.28] Triggered BE-SL: OrderIdx:1, Side:BUY, Entry:1005.0, Exit:1000, PNL:0.0
09:24:32 [INFO] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.73+] [Patch] Forced Entry Audit: 1 forced entries logged: [0]
09:24:32 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.63+] Returning tuple for legacy/test compatibility
PASSED                                                                   [ 68%]
test_gold_ai.py::test_forced_entry_multi_order_audit 
-------------------------------- live log call ---------------------------------
09:24:33 [INFO] [gold_ai2025.Part2_DeprecatedParams] Part 2: Core Parameters & Strategy Settings (DEPRECATED - Parameters now in StrategyConfig from YAML).
09:24:33 [WARNING] [gold_ai2025.Part2_DeprecatedParams] Part 2: Is DEPRECATED. All tunable strategy parameters should be managed by StrategyConfig.
09:24:33 [INFO] [gold_ai2025.Part2_DeprecatedParams] Any true constants (e.g., for feature engineering) will be defined in their relevant sections or Part 1.
09:24:33 [INFO] [gold_ai2025.MLHelpers] Loading Machine Learning Configuration & Helpers (v4.9.13 - Refined Model Switcher)...
09:24:33 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_CLASSIFIER (L1 Filter): True
09:24:33 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_META_CLASSIFIER (L2 Filter): False
09:24:33 [INFO] [gold_ai2025.MLHelpers]   Initial Optuna Hyperparameter Tuning Enabled: False
09:24:33 [INFO] [gold_ai2025.MLHelpers]   Initial Auto Threshold Tuning Enabled: False
09:24:33 [INFO] [gold_ai2025.MT5Connector] Loading Part 12: MT5 Connector (Placeholder)...
09:24:33 [INFO] [gold_ai2025.MT5Connector] Part 12: MT5 Connector (Placeholder) Loaded.
09:24:33 [DEBUG] [gold_ai2025.Part14_FutureAdditions] Part 14: Placeholder for Future Additions reached.
09:24:33 [INFO] [gold_ai2025.Part15_EndOfScript] Reached End of Part 15 (Definitive End of Script Marker). Gold AI script processing complete.
09:24:33 [INFO] [gold_ai2025.Part2_DeprecatedParams] Part 2: Core Parameters & Strategy Settings (DEPRECATED - Parameters now in StrategyConfig from YAML).
09:24:33 [WARNING] [gold_ai2025.Part2_DeprecatedParams] Part 2: Is DEPRECATED. All tunable strategy parameters should be managed by StrategyConfig.
09:24:33 [INFO] [gold_ai2025.Part2_DeprecatedParams] Any true constants (e.g., for feature engineering) will be defined in their relevant sections or Part 1.
09:24:33 [INFO] [gold_ai2025.MLHelpers] Loading Machine Learning Configuration & Helpers (v4.9.13 - Refined Model Switcher)...
09:24:33 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_CLASSIFIER (L1 Filter): True
09:24:33 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_META_CLASSIFIER (L2 Filter): False
09:24:33 [INFO] [gold_ai2025.MLHelpers]   Initial Optuna Hyperparameter Tuning Enabled: False
09:24:33 [INFO] [gold_ai2025.MLHelpers]   Initial Auto Threshold Tuning Enabled: False
09:24:33 [INFO] [gold_ai2025.MT5Connector] Loading Part 12: MT5 Connector (Placeholder)...
09:24:33 [INFO] [gold_ai2025.MT5Connector] Part 12: MT5 Connector (Placeholder) Loaded.
09:24:33 [DEBUG] [gold_ai2025.Part14_FutureAdditions] Part 14: Placeholder for Future Additions reached.
09:24:33 [INFO] [gold_ai2025.Part15_EndOfScript] Reached End of Part 15 (Definitive End of Script Marker). Gold AI script processing complete.
09:24:33 [DEBUG] [gold_ai2025.StrategyConfig] Initializing StrategyConfig with dict: {}
09:24:33 [INFO] [gold_ai2025.StrategyConfig] StrategyConfig initialized. Risk/Trade: 0.010, Max Hold: 24 bars, Kill DD: 20.00%
09:24:33 [DEBUG] [gold_ai2025.StrategyConfig]   Feature Eng Params: M15 EMA Fast=50, M1 Rolling Z Window=300
09:24:33 [DEBUG] [gold_ai2025.StrategyConfig]   Default Signal Thresh: GainZ=0.3, RSI Buy=50
09:24:33 [DEBUG] [gold_ai2025.StrategyConfig]   Dynamic TP2 Params: HighVolBoost=1.2, LotBoostMult=1.1
09:24:33 [INFO] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.26] simulate_trades start
09:24:33 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.70+] ATR undefined, using NaN fallback.
09:24:33 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.70+] MACD undefined, using NaN fallback.
09:24:33 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.70+] RSI undefined, using default 50.
09:24:33 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.28] Triggered BE-SL: OrderIdx:0, Side:BUY, Entry:1000.0, Exit:995, PNL:0.0
09:24:33 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.28] Triggered BE-SL: OrderIdx:1, Side:BUY, Entry:1005.0, Exit:1000, PNL:0.0
09:24:33 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.28] Triggered BE-SL: OrderIdx:2, Side:BUY, Entry:1010.0, Exit:1005, PNL:0.0
09:24:33 [INFO] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.73+] [Patch] Forced Entry Audit: 2 forced entries logged: [0, 2]
09:24:33 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.63+] Returning tuple for legacy/test compatibility
PASSED                                                                   [ 69%]
test_gold_ai.py::test_forced_entry_audit_short 
-------------------------------- live log call ---------------------------------
09:24:33 [INFO] [gold_ai2025.Part2_DeprecatedParams] Part 2: Core Parameters & Strategy Settings (DEPRECATED - Parameters now in StrategyConfig from YAML).
09:24:33 [WARNING] [gold_ai2025.Part2_DeprecatedParams] Part 2: Is DEPRECATED. All tunable strategy parameters should be managed by StrategyConfig.
09:24:33 [INFO] [gold_ai2025.Part2_DeprecatedParams] Any true constants (e.g., for feature engineering) will be defined in their relevant sections or Part 1.
09:24:33 [INFO] [gold_ai2025.MLHelpers] Loading Machine Learning Configuration & Helpers (v4.9.13 - Refined Model Switcher)...
09:24:33 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_CLASSIFIER (L1 Filter): True
09:24:33 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_META_CLASSIFIER (L2 Filter): False
09:24:33 [INFO] [gold_ai2025.MLHelpers]   Initial Optuna Hyperparameter Tuning Enabled: False
09:24:33 [INFO] [gold_ai2025.MLHelpers]   Initial Auto Threshold Tuning Enabled: False
09:24:33 [INFO] [gold_ai2025.MT5Connector] Loading Part 12: MT5 Connector (Placeholder)...
09:24:33 [INFO] [gold_ai2025.MT5Connector] Part 12: MT5 Connector (Placeholder) Loaded.
09:24:33 [DEBUG] [gold_ai2025.Part14_FutureAdditions] Part 14: Placeholder for Future Additions reached.
09:24:33 [INFO] [gold_ai2025.Part15_EndOfScript] Reached End of Part 15 (Definitive End of Script Marker). Gold AI script processing complete.
09:24:33 [INFO] [gold_ai2025.Part2_DeprecatedParams] Part 2: Core Parameters & Strategy Settings (DEPRECATED - Parameters now in StrategyConfig from YAML).
09:24:33 [WARNING] [gold_ai2025.Part2_DeprecatedParams] Part 2: Is DEPRECATED. All tunable strategy parameters should be managed by StrategyConfig.
09:24:33 [INFO] [gold_ai2025.Part2_DeprecatedParams] Any true constants (e.g., for feature engineering) will be defined in their relevant sections or Part 1.
09:24:33 [INFO] [gold_ai2025.MLHelpers] Loading Machine Learning Configuration & Helpers (v4.9.13 - Refined Model Switcher)...
09:24:33 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_CLASSIFIER (L1 Filter): True
09:24:33 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_META_CLASSIFIER (L2 Filter): False
09:24:33 [INFO] [gold_ai2025.MLHelpers]   Initial Optuna Hyperparameter Tuning Enabled: False
09:24:33 [INFO] [gold_ai2025.MLHelpers]   Initial Auto Threshold Tuning Enabled: False
09:24:33 [INFO] [gold_ai2025.MT5Connector] Loading Part 12: MT5 Connector (Placeholder)...
09:24:33 [INFO] [gold_ai2025.MT5Connector] Part 12: MT5 Connector (Placeholder) Loaded.
09:24:33 [DEBUG] [gold_ai2025.Part14_FutureAdditions] Part 14: Placeholder for Future Additions reached.
09:24:33 [INFO] [gold_ai2025.Part15_EndOfScript] Reached End of Part 15 (Definitive End of Script Marker). Gold AI script processing complete.
09:24:33 [DEBUG] [gold_ai2025.StrategyConfig] Initializing StrategyConfig with dict: {}
09:24:33 [INFO] [gold_ai2025.StrategyConfig] StrategyConfig initialized. Risk/Trade: 0.010, Max Hold: 24 bars, Kill DD: 20.00%
09:24:33 [DEBUG] [gold_ai2025.StrategyConfig]   Feature Eng Params: M15 EMA Fast=50, M1 Rolling Z Window=300
09:24:33 [DEBUG] [gold_ai2025.StrategyConfig]   Default Signal Thresh: GainZ=0.3, RSI Buy=50
09:24:33 [DEBUG] [gold_ai2025.StrategyConfig]   Dynamic TP2 Params: HighVolBoost=1.2, LotBoostMult=1.1
09:24:33 [INFO] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.26] simulate_trades start
09:24:33 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.70+] ATR undefined, using NaN fallback.
09:24:33 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.70+] MACD undefined, using NaN fallback.
09:24:33 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.70+] RSI undefined, using default 50.
09:24:33 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.28] Triggered BE-SL: OrderIdx:0, Side:SELL, Entry:1000.0, Exit:1005, PNL:0.0
09:24:33 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.28] Triggered BE-SL: OrderIdx:1, Side:SELL, Entry:995.0, Exit:1000, PNL:0.0
09:24:33 [INFO] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.73+] [Patch] Forced Entry Audit: 1 forced entries logged: [0]
09:24:33 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.63+] Returning tuple for legacy/test compatibility
PASSED                                                                   [ 69%]
test_gold_ai.py::test_forced_entry_reason_audit 
-------------------------------- live log call ---------------------------------
09:24:33 [INFO] [gold_ai2025.Part2_DeprecatedParams] Part 2: Core Parameters & Strategy Settings (DEPRECATED - Parameters now in StrategyConfig from YAML).
09:24:33 [WARNING] [gold_ai2025.Part2_DeprecatedParams] Part 2: Is DEPRECATED. All tunable strategy parameters should be managed by StrategyConfig.
09:24:33 [INFO] [gold_ai2025.Part2_DeprecatedParams] Any true constants (e.g., for feature engineering) will be defined in their relevant sections or Part 1.
09:24:33 [INFO] [gold_ai2025.MLHelpers] Loading Machine Learning Configuration & Helpers (v4.9.13 - Refined Model Switcher)...
09:24:33 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_CLASSIFIER (L1 Filter): True
09:24:33 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_META_CLASSIFIER (L2 Filter): False
09:24:33 [INFO] [gold_ai2025.MLHelpers]   Initial Optuna Hyperparameter Tuning Enabled: False
09:24:33 [INFO] [gold_ai2025.MLHelpers]   Initial Auto Threshold Tuning Enabled: False
09:24:33 [INFO] [gold_ai2025.MT5Connector] Loading Part 12: MT5 Connector (Placeholder)...
09:24:33 [INFO] [gold_ai2025.MT5Connector] Part 12: MT5 Connector (Placeholder) Loaded.
09:24:33 [DEBUG] [gold_ai2025.Part14_FutureAdditions] Part 14: Placeholder for Future Additions reached.
09:24:33 [INFO] [gold_ai2025.Part15_EndOfScript] Reached End of Part 15 (Definitive End of Script Marker). Gold AI script processing complete.
09:24:33 [INFO] [gold_ai2025.Part2_DeprecatedParams] Part 2: Core Parameters & Strategy Settings (DEPRECATED - Parameters now in StrategyConfig from YAML).
09:24:33 [WARNING] [gold_ai2025.Part2_DeprecatedParams] Part 2: Is DEPRECATED. All tunable strategy parameters should be managed by StrategyConfig.
09:24:33 [INFO] [gold_ai2025.Part2_DeprecatedParams] Any true constants (e.g., for feature engineering) will be defined in their relevant sections or Part 1.
09:24:33 [INFO] [gold_ai2025.MLHelpers] Loading Machine Learning Configuration & Helpers (v4.9.13 - Refined Model Switcher)...
09:24:33 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_CLASSIFIER (L1 Filter): True
09:24:33 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_META_CLASSIFIER (L2 Filter): False
09:24:33 [INFO] [gold_ai2025.MLHelpers]   Initial Optuna Hyperparameter Tuning Enabled: False
09:24:33 [INFO] [gold_ai2025.MLHelpers]   Initial Auto Threshold Tuning Enabled: False
09:24:33 [INFO] [gold_ai2025.MT5Connector] Loading Part 12: MT5 Connector (Placeholder)...
09:24:33 [INFO] [gold_ai2025.MT5Connector] Part 12: MT5 Connector (Placeholder) Loaded.
09:24:33 [DEBUG] [gold_ai2025.Part14_FutureAdditions] Part 14: Placeholder for Future Additions reached.
09:24:33 [INFO] [gold_ai2025.Part15_EndOfScript] Reached End of Part 15 (Definitive End of Script Marker). Gold AI script processing complete.
09:24:33 [DEBUG] [gold_ai2025.StrategyConfig] Initializing StrategyConfig with dict: {}
09:24:33 [INFO] [gold_ai2025.StrategyConfig] StrategyConfig initialized. Risk/Trade: 0.010, Max Hold: 24 bars, Kill DD: 20.00%
09:24:33 [DEBUG] [gold_ai2025.StrategyConfig]   Feature Eng Params: M15 EMA Fast=50, M1 Rolling Z Window=300
09:24:33 [DEBUG] [gold_ai2025.StrategyConfig]   Default Signal Thresh: GainZ=0.3, RSI Buy=50
09:24:33 [DEBUG] [gold_ai2025.StrategyConfig]   Dynamic TP2 Params: HighVolBoost=1.2, LotBoostMult=1.1
09:24:33 [INFO] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.26] simulate_trades start
09:24:33 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.70+] ATR undefined, using NaN fallback.
09:24:33 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.70+] MACD undefined, using NaN fallback.
09:24:33 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.70+] RSI undefined, using default 50.
09:24:33 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.28] Triggered BE-SL: OrderIdx:0, Side:BUY, Entry:1000.0, Exit:995, PNL:0.0
09:24:33 [INFO] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.73+] [Patch] Forced Entry Audit: 1 forced entries logged: [0]
09:24:33 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.63+] Returning tuple for legacy/test compatibility
PASSED                                                                   [ 70%]
test_gold_ai.py::test_forced_entry_buy_flag_and_reason 
-------------------------------- live log call ---------------------------------
09:24:33 [INFO] [gold_ai2025.Part2_DeprecatedParams] Part 2: Core Parameters & Strategy Settings (DEPRECATED - Parameters now in StrategyConfig from YAML).
09:24:33 [WARNING] [gold_ai2025.Part2_DeprecatedParams] Part 2: Is DEPRECATED. All tunable strategy parameters should be managed by StrategyConfig.
09:24:33 [INFO] [gold_ai2025.Part2_DeprecatedParams] Any true constants (e.g., for feature engineering) will be defined in their relevant sections or Part 1.
09:24:33 [INFO] [gold_ai2025.MLHelpers] Loading Machine Learning Configuration & Helpers (v4.9.13 - Refined Model Switcher)...
09:24:33 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_CLASSIFIER (L1 Filter): True
09:24:33 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_META_CLASSIFIER (L2 Filter): False
09:24:33 [INFO] [gold_ai2025.MLHelpers]   Initial Optuna Hyperparameter Tuning Enabled: False
09:24:33 [INFO] [gold_ai2025.MLHelpers]   Initial Auto Threshold Tuning Enabled: False
09:24:33 [INFO] [gold_ai2025.MT5Connector] Loading Part 12: MT5 Connector (Placeholder)...
09:24:33 [INFO] [gold_ai2025.MT5Connector] Part 12: MT5 Connector (Placeholder) Loaded.
09:24:33 [DEBUG] [gold_ai2025.Part14_FutureAdditions] Part 14: Placeholder for Future Additions reached.
09:24:33 [INFO] [gold_ai2025.Part15_EndOfScript] Reached End of Part 15 (Definitive End of Script Marker). Gold AI script processing complete.
09:24:33 [INFO] [gold_ai2025.Part2_DeprecatedParams] Part 2: Core Parameters & Strategy Settings (DEPRECATED - Parameters now in StrategyConfig from YAML).
09:24:33 [WARNING] [gold_ai2025.Part2_DeprecatedParams] Part 2: Is DEPRECATED. All tunable strategy parameters should be managed by StrategyConfig.
09:24:33 [INFO] [gold_ai2025.Part2_DeprecatedParams] Any true constants (e.g., for feature engineering) will be defined in their relevant sections or Part 1.
09:24:34 [INFO] [gold_ai2025.MLHelpers] Loading Machine Learning Configuration & Helpers (v4.9.13 - Refined Model Switcher)...
09:24:34 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_CLASSIFIER (L1 Filter): True
09:24:34 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_META_CLASSIFIER (L2 Filter): False
09:24:34 [INFO] [gold_ai2025.MLHelpers]   Initial Optuna Hyperparameter Tuning Enabled: False
09:24:34 [INFO] [gold_ai2025.MLHelpers]   Initial Auto Threshold Tuning Enabled: False
09:24:34 [INFO] [gold_ai2025.MT5Connector] Loading Part 12: MT5 Connector (Placeholder)...
09:24:34 [INFO] [gold_ai2025.MT5Connector] Part 12: MT5 Connector (Placeholder) Loaded.
09:24:34 [DEBUG] [gold_ai2025.Part14_FutureAdditions] Part 14: Placeholder for Future Additions reached.
09:24:34 [INFO] [gold_ai2025.Part15_EndOfScript] Reached End of Part 15 (Definitive End of Script Marker). Gold AI script processing complete.
09:24:34 [DEBUG] [gold_ai2025.StrategyConfig] Initializing StrategyConfig with dict: {}
09:24:34 [INFO] [gold_ai2025.StrategyConfig] StrategyConfig initialized. Risk/Trade: 0.010, Max Hold: 24 bars, Kill DD: 20.00%
09:24:34 [DEBUG] [gold_ai2025.StrategyConfig]   Feature Eng Params: M15 EMA Fast=50, M1 Rolling Z Window=300
09:24:34 [DEBUG] [gold_ai2025.StrategyConfig]   Default Signal Thresh: GainZ=0.3, RSI Buy=50
09:24:34 [DEBUG] [gold_ai2025.StrategyConfig]   Dynamic TP2 Params: HighVolBoost=1.2, LotBoostMult=1.1
09:24:34 [INFO] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.26] simulate_trades start
09:24:34 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.70+] ATR undefined, using NaN fallback.
09:24:34 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.70+] MACD undefined, using NaN fallback.
09:24:34 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.70+] RSI undefined, using default 50.
09:24:34 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.28] Triggered BE-SL: OrderIdx:0, Side:BUY, Entry:1000.0, Exit:995, PNL:0.0
09:24:34 [INFO] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.73+] [Patch] Forced Entry Audit: 1 forced entries logged: [0]
09:24:34 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.63+] Returning tuple for legacy/test compatibility
PASSED                                                                   [ 70%]
test_gold_ai.py::test_forced_entry_sell_flag_and_reason 
-------------------------------- live log call ---------------------------------
09:24:34 [INFO] [gold_ai2025.Part2_DeprecatedParams] Part 2: Core Parameters & Strategy Settings (DEPRECATED - Parameters now in StrategyConfig from YAML).
09:24:34 [WARNING] [gold_ai2025.Part2_DeprecatedParams] Part 2: Is DEPRECATED. All tunable strategy parameters should be managed by StrategyConfig.
09:24:34 [INFO] [gold_ai2025.Part2_DeprecatedParams] Any true constants (e.g., for feature engineering) will be defined in their relevant sections or Part 1.
09:24:34 [INFO] [gold_ai2025.MLHelpers] Loading Machine Learning Configuration & Helpers (v4.9.13 - Refined Model Switcher)...
09:24:34 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_CLASSIFIER (L1 Filter): True
09:24:34 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_META_CLASSIFIER (L2 Filter): False
09:24:34 [INFO] [gold_ai2025.MLHelpers]   Initial Optuna Hyperparameter Tuning Enabled: False
09:24:34 [INFO] [gold_ai2025.MLHelpers]   Initial Auto Threshold Tuning Enabled: False
09:24:34 [INFO] [gold_ai2025.MT5Connector] Loading Part 12: MT5 Connector (Placeholder)...
09:24:34 [INFO] [gold_ai2025.MT5Connector] Part 12: MT5 Connector (Placeholder) Loaded.
09:24:34 [DEBUG] [gold_ai2025.Part14_FutureAdditions] Part 14: Placeholder for Future Additions reached.
09:24:34 [INFO] [gold_ai2025.Part15_EndOfScript] Reached End of Part 15 (Definitive End of Script Marker). Gold AI script processing complete.
09:24:34 [INFO] [gold_ai2025.Part2_DeprecatedParams] Part 2: Core Parameters & Strategy Settings (DEPRECATED - Parameters now in StrategyConfig from YAML).
09:24:34 [WARNING] [gold_ai2025.Part2_DeprecatedParams] Part 2: Is DEPRECATED. All tunable strategy parameters should be managed by StrategyConfig.
09:24:34 [INFO] [gold_ai2025.Part2_DeprecatedParams] Any true constants (e.g., for feature engineering) will be defined in their relevant sections or Part 1.
09:24:34 [INFO] [gold_ai2025.MLHelpers] Loading Machine Learning Configuration & Helpers (v4.9.13 - Refined Model Switcher)...
09:24:34 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_CLASSIFIER (L1 Filter): True
09:24:34 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_META_CLASSIFIER (L2 Filter): False
09:24:34 [INFO] [gold_ai2025.MLHelpers]   Initial Optuna Hyperparameter Tuning Enabled: False
09:24:34 [INFO] [gold_ai2025.MLHelpers]   Initial Auto Threshold Tuning Enabled: False
09:24:34 [INFO] [gold_ai2025.MT5Connector] Loading Part 12: MT5 Connector (Placeholder)...
09:24:34 [INFO] [gold_ai2025.MT5Connector] Part 12: MT5 Connector (Placeholder) Loaded.
09:24:34 [DEBUG] [gold_ai2025.Part14_FutureAdditions] Part 14: Placeholder for Future Additions reached.
09:24:34 [INFO] [gold_ai2025.Part15_EndOfScript] Reached End of Part 15 (Definitive End of Script Marker). Gold AI script processing complete.
09:24:34 [DEBUG] [gold_ai2025.StrategyConfig] Initializing StrategyConfig with dict: {}
09:24:34 [INFO] [gold_ai2025.StrategyConfig] StrategyConfig initialized. Risk/Trade: 0.010, Max Hold: 24 bars, Kill DD: 20.00%
09:24:34 [DEBUG] [gold_ai2025.StrategyConfig]   Feature Eng Params: M15 EMA Fast=50, M1 Rolling Z Window=300
09:24:34 [DEBUG] [gold_ai2025.StrategyConfig]   Default Signal Thresh: GainZ=0.3, RSI Buy=50
09:24:34 [DEBUG] [gold_ai2025.StrategyConfig]   Dynamic TP2 Params: HighVolBoost=1.2, LotBoostMult=1.1
09:24:34 [INFO] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.26] simulate_trades start
09:24:34 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.70+] ATR undefined, using NaN fallback.
09:24:34 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.70+] MACD undefined, using NaN fallback.
09:24:34 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.70+] RSI undefined, using default 50.
09:24:34 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.28] Triggered BE-SL: OrderIdx:0, Side:SELL, Entry:1000.0, Exit:1002, PNL:0.0
09:24:34 [INFO] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.73+] [Patch] Forced Entry Audit: 1 forced entries logged: [0]
09:24:34 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.63+] Returning tuple for legacy/test compatibility
PASSED                                                                   [ 71%]
test_gold_ai.py::test_forced_entry_multi_order_flags 
-------------------------------- live log call ---------------------------------
09:24:34 [INFO] [gold_ai2025.Part2_DeprecatedParams] Part 2: Core Parameters & Strategy Settings (DEPRECATED - Parameters now in StrategyConfig from YAML).
09:24:34 [WARNING] [gold_ai2025.Part2_DeprecatedParams] Part 2: Is DEPRECATED. All tunable strategy parameters should be managed by StrategyConfig.
09:24:34 [INFO] [gold_ai2025.Part2_DeprecatedParams] Any true constants (e.g., for feature engineering) will be defined in their relevant sections or Part 1.
09:24:34 [INFO] [gold_ai2025.MLHelpers] Loading Machine Learning Configuration & Helpers (v4.9.13 - Refined Model Switcher)...
09:24:34 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_CLASSIFIER (L1 Filter): True
09:24:34 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_META_CLASSIFIER (L2 Filter): False
09:24:34 [INFO] [gold_ai2025.MLHelpers]   Initial Optuna Hyperparameter Tuning Enabled: False
09:24:34 [INFO] [gold_ai2025.MLHelpers]   Initial Auto Threshold Tuning Enabled: False
09:24:34 [INFO] [gold_ai2025.MT5Connector] Loading Part 12: MT5 Connector (Placeholder)...
09:24:34 [INFO] [gold_ai2025.MT5Connector] Part 12: MT5 Connector (Placeholder) Loaded.
09:24:34 [DEBUG] [gold_ai2025.Part14_FutureAdditions] Part 14: Placeholder for Future Additions reached.
09:24:34 [INFO] [gold_ai2025.Part15_EndOfScript] Reached End of Part 15 (Definitive End of Script Marker). Gold AI script processing complete.
09:24:34 [INFO] [gold_ai2025.Part2_DeprecatedParams] Part 2: Core Parameters & Strategy Settings (DEPRECATED - Parameters now in StrategyConfig from YAML).
09:24:34 [WARNING] [gold_ai2025.Part2_DeprecatedParams] Part 2: Is DEPRECATED. All tunable strategy parameters should be managed by StrategyConfig.
09:24:34 [INFO] [gold_ai2025.Part2_DeprecatedParams] Any true constants (e.g., for feature engineering) will be defined in their relevant sections or Part 1.
09:24:34 [INFO] [gold_ai2025.MLHelpers] Loading Machine Learning Configuration & Helpers (v4.9.13 - Refined Model Switcher)...
09:24:34 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_CLASSIFIER (L1 Filter): True
09:24:34 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_META_CLASSIFIER (L2 Filter): False
09:24:34 [INFO] [gold_ai2025.MLHelpers]   Initial Optuna Hyperparameter Tuning Enabled: False
09:24:34 [INFO] [gold_ai2025.MLHelpers]   Initial Auto Threshold Tuning Enabled: False
09:24:34 [INFO] [gold_ai2025.MT5Connector] Loading Part 12: MT5 Connector (Placeholder)...
09:24:34 [INFO] [gold_ai2025.MT5Connector] Part 12: MT5 Connector (Placeholder) Loaded.
09:24:34 [DEBUG] [gold_ai2025.Part14_FutureAdditions] Part 14: Placeholder for Future Additions reached.
09:24:34 [INFO] [gold_ai2025.Part15_EndOfScript] Reached End of Part 15 (Definitive End of Script Marker). Gold AI script processing complete.
09:24:34 [DEBUG] [gold_ai2025.StrategyConfig] Initializing StrategyConfig with dict: {}
09:24:34 [INFO] [gold_ai2025.StrategyConfig] StrategyConfig initialized. Risk/Trade: 0.010, Max Hold: 24 bars, Kill DD: 20.00%
09:24:34 [DEBUG] [gold_ai2025.StrategyConfig]   Feature Eng Params: M15 EMA Fast=50, M1 Rolling Z Window=300
09:24:34 [DEBUG] [gold_ai2025.StrategyConfig]   Default Signal Thresh: GainZ=0.3, RSI Buy=50
09:24:34 [DEBUG] [gold_ai2025.StrategyConfig]   Dynamic TP2 Params: HighVolBoost=1.2, LotBoostMult=1.1
09:24:34 [INFO] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.26] simulate_trades start
09:24:34 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.70+] ATR undefined, using NaN fallback.
09:24:34 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.70+] MACD undefined, using NaN fallback.
09:24:34 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.70+] RSI undefined, using default 50.
09:24:34 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.28] Triggered BE-SL: OrderIdx:0, Side:BUY, Entry:1000.0, Exit:995, PNL:0.0
09:24:34 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.28] Triggered BE-SL: OrderIdx:2, Side:BUY, Entry:1010.0, Exit:1005, PNL:0.0
09:24:34 [INFO] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.73+] [Patch] Forced Entry Audit: 2 forced entries logged: [0, 2]
09:24:34 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.63+] Returning tuple for legacy/test compatibility
PASSED                                                                   [ 71%]
test_gold_ai.py::TestForcedEntryAudit::test_fallback_dummy_pd_np 
-------------------------------- live log call ---------------------------------
09:24:34 [INFO] [gold_ai2025.Part2_DeprecatedParams] Part 2: Core Parameters & Strategy Settings (DEPRECATED - Parameters now in StrategyConfig from YAML).
09:24:34 [WARNING] [gold_ai2025.Part2_DeprecatedParams] Part 2: Is DEPRECATED. All tunable strategy parameters should be managed by StrategyConfig.
09:24:34 [INFO] [gold_ai2025.Part2_DeprecatedParams] Any true constants (e.g., for feature engineering) will be defined in their relevant sections or Part 1.
09:24:34 [INFO] [gold_ai2025.MLHelpers] Loading Machine Learning Configuration & Helpers (v4.9.13 - Refined Model Switcher)...
09:24:34 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_CLASSIFIER (L1 Filter): True
09:24:34 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_META_CLASSIFIER (L2 Filter): False
09:24:34 [INFO] [gold_ai2025.MLHelpers]   Initial Optuna Hyperparameter Tuning Enabled: False
09:24:34 [INFO] [gold_ai2025.MLHelpers]   Initial Auto Threshold Tuning Enabled: False
09:24:34 [INFO] [gold_ai2025.MT5Connector] Loading Part 12: MT5 Connector (Placeholder)...
09:24:34 [INFO] [gold_ai2025.MT5Connector] Part 12: MT5 Connector (Placeholder) Loaded.
09:24:34 [DEBUG] [gold_ai2025.Part14_FutureAdditions] Part 14: Placeholder for Future Additions reached.
09:24:34 [INFO] [gold_ai2025.Part15_EndOfScript] Reached End of Part 15 (Definitive End of Script Marker). Gold AI script processing complete.
PASSED                                                                   [ 72%]
test_gold_ai.py::TestForcedEntryAudit::test_forced_entry_audit_annotate 
-------------------------------- live log call ---------------------------------
09:24:34 [INFO] [gold_ai2025.Part2_DeprecatedParams] Part 2: Core Parameters & Strategy Settings (DEPRECATED - Parameters now in StrategyConfig from YAML).
09:24:34 [WARNING] [gold_ai2025.Part2_DeprecatedParams] Part 2: Is DEPRECATED. All tunable strategy parameters should be managed by StrategyConfig.
09:24:34 [INFO] [gold_ai2025.Part2_DeprecatedParams] Any true constants (e.g., for feature engineering) will be defined in their relevant sections or Part 1.
09:24:34 [INFO] [gold_ai2025.MLHelpers] Loading Machine Learning Configuration & Helpers (v4.9.13 - Refined Model Switcher)...
09:24:34 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_CLASSIFIER (L1 Filter): True
09:24:34 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_META_CLASSIFIER (L2 Filter): False
09:24:34 [INFO] [gold_ai2025.MLHelpers]   Initial Optuna Hyperparameter Tuning Enabled: False
09:24:34 [INFO] [gold_ai2025.MLHelpers]   Initial Auto Threshold Tuning Enabled: False
09:24:34 [INFO] [gold_ai2025.MT5Connector] Loading Part 12: MT5 Connector (Placeholder)...
09:24:34 [INFO] [gold_ai2025.MT5Connector] Part 12: MT5 Connector (Placeholder) Loaded.
09:24:34 [DEBUG] [gold_ai2025.Part14_FutureAdditions] Part 14: Placeholder for Future Additions reached.
09:24:34 [INFO] [gold_ai2025.Part15_EndOfScript] Reached End of Part 15 (Definitive End of Script Marker). Gold AI script processing complete.
09:24:34 [DEBUG] [gold_ai2025.StrategyConfig] Initializing StrategyConfig with dict: {}
09:24:34 [INFO] [gold_ai2025.StrategyConfig] StrategyConfig initialized. Risk/Trade: 0.010, Max Hold: 24 bars, Kill DD: 20.00%
09:24:34 [DEBUG] [gold_ai2025.StrategyConfig]   Feature Eng Params: M15 EMA Fast=50, M1 Rolling Z Window=300
09:24:34 [DEBUG] [gold_ai2025.StrategyConfig]   Default Signal Thresh: GainZ=0.3, RSI Buy=50
09:24:34 [DEBUG] [gold_ai2025.StrategyConfig]   Dynamic TP2 Params: HighVolBoost=1.2, LotBoostMult=1.1
09:24:34 [INFO] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.26] simulate_trades start
09:24:34 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.70+] ATR undefined, using NaN fallback.
09:24:34 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.70+] MACD undefined, using NaN fallback.
09:24:34 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.70+] RSI undefined, using default 50.
09:24:34 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.28] Triggered BE-SL: OrderIdx:0, Side:BUY, Entry:1800.0, Exit:1795.0, PNL:0.0
09:24:34 [INFO] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.73+] [Patch] Forced Entry Audit: 1 forced entries logged: [0]
09:24:34 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.63+] Returning tuple for legacy/test compatibility
PASSED                                                                   [ 72%]
test_gold_ai.py::TestForcedEntryAudit::test_forced_entry_audit_in_trade_log 
-------------------------------- live log call ---------------------------------
09:24:35 [INFO] [gold_ai2025.Part2_DeprecatedParams] Part 2: Core Parameters & Strategy Settings (DEPRECATED - Parameters now in StrategyConfig from YAML).
09:24:35 [WARNING] [gold_ai2025.Part2_DeprecatedParams] Part 2: Is DEPRECATED. All tunable strategy parameters should be managed by StrategyConfig.
09:24:35 [INFO] [gold_ai2025.Part2_DeprecatedParams] Any true constants (e.g., for feature engineering) will be defined in their relevant sections or Part 1.
09:24:35 [INFO] [gold_ai2025.MLHelpers] Loading Machine Learning Configuration & Helpers (v4.9.13 - Refined Model Switcher)...
09:24:35 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_CLASSIFIER (L1 Filter): True
09:24:35 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_META_CLASSIFIER (L2 Filter): False
09:24:35 [INFO] [gold_ai2025.MLHelpers]   Initial Optuna Hyperparameter Tuning Enabled: False
09:24:35 [INFO] [gold_ai2025.MLHelpers]   Initial Auto Threshold Tuning Enabled: False
09:24:35 [INFO] [gold_ai2025.MT5Connector] Loading Part 12: MT5 Connector (Placeholder)...
09:24:35 [INFO] [gold_ai2025.MT5Connector] Part 12: MT5 Connector (Placeholder) Loaded.
09:24:35 [DEBUG] [gold_ai2025.Part14_FutureAdditions] Part 14: Placeholder for Future Additions reached.
09:24:35 [INFO] [gold_ai2025.Part15_EndOfScript] Reached End of Part 15 (Definitive End of Script Marker). Gold AI script processing complete.
09:24:35 [DEBUG] [gold_ai2025.StrategyConfig] Initializing StrategyConfig with dict: {}
09:24:35 [INFO] [gold_ai2025.StrategyConfig] StrategyConfig initialized. Risk/Trade: 0.010, Max Hold: 24 bars, Kill DD: 20.00%
09:24:35 [DEBUG] [gold_ai2025.StrategyConfig]   Feature Eng Params: M15 EMA Fast=50, M1 Rolling Z Window=300
09:24:35 [DEBUG] [gold_ai2025.StrategyConfig]   Default Signal Thresh: GainZ=0.3, RSI Buy=50
09:24:35 [DEBUG] [gold_ai2025.StrategyConfig]   Dynamic TP2 Params: HighVolBoost=1.2, LotBoostMult=1.1
09:24:35 [INFO] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.26] simulate_trades start
09:24:35 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.70+] ATR undefined, using NaN fallback.
09:24:35 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.70+] MACD undefined, using NaN fallback.
09:24:35 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.70+] RSI undefined, using default 50.
09:24:35 [INFO] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.73+] [Patch] Forced Entry Audit: 0 forced entries logged: []
09:24:35 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.65+] Initialized empty trade_log_df with exit_reason column
09:24:35 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.63+] Returning tuple for legacy/test compatibility
PASSED                                                                   [ 73%]
test_gold_ai.py::TestForcedEntryAudit::test_forced_entry_audit_warning PASSED [ 74%]
test_gold_ai.py::TestForcedEntryAudit::test_forced_entry_multi_case 
-------------------------------- live log call ---------------------------------
09:24:35 [INFO] [gold_ai2025.Part2_DeprecatedParams] Part 2: Core Parameters & Strategy Settings (DEPRECATED - Parameters now in StrategyConfig from YAML).
09:24:35 [WARNING] [gold_ai2025.Part2_DeprecatedParams] Part 2: Is DEPRECATED. All tunable strategy parameters should be managed by StrategyConfig.
09:24:35 [INFO] [gold_ai2025.Part2_DeprecatedParams] Any true constants (e.g., for feature engineering) will be defined in their relevant sections or Part 1.
09:24:35 [INFO] [gold_ai2025.MLHelpers] Loading Machine Learning Configuration & Helpers (v4.9.13 - Refined Model Switcher)...
09:24:35 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_CLASSIFIER (L1 Filter): True
09:24:35 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_META_CLASSIFIER (L2 Filter): False
09:24:35 [INFO] [gold_ai2025.MLHelpers]   Initial Optuna Hyperparameter Tuning Enabled: False
09:24:35 [INFO] [gold_ai2025.MLHelpers]   Initial Auto Threshold Tuning Enabled: False
09:24:35 [INFO] [gold_ai2025.MT5Connector] Loading Part 12: MT5 Connector (Placeholder)...
09:24:35 [INFO] [gold_ai2025.MT5Connector] Part 12: MT5 Connector (Placeholder) Loaded.
09:24:35 [DEBUG] [gold_ai2025.Part14_FutureAdditions] Part 14: Placeholder for Future Additions reached.
09:24:35 [INFO] [gold_ai2025.Part15_EndOfScript] Reached End of Part 15 (Definitive End of Script Marker). Gold AI script processing complete.
09:24:35 [DEBUG] [gold_ai2025.StrategyConfig] Initializing StrategyConfig with dict: {}
09:24:35 [INFO] [gold_ai2025.StrategyConfig] StrategyConfig initialized. Risk/Trade: 0.010, Max Hold: 24 bars, Kill DD: 20.00%
09:24:35 [DEBUG] [gold_ai2025.StrategyConfig]   Feature Eng Params: M15 EMA Fast=50, M1 Rolling Z Window=300
09:24:35 [DEBUG] [gold_ai2025.StrategyConfig]   Default Signal Thresh: GainZ=0.3, RSI Buy=50
09:24:35 [DEBUG] [gold_ai2025.StrategyConfig]   Dynamic TP2 Params: HighVolBoost=1.2, LotBoostMult=1.1
09:24:35 [INFO] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.26] simulate_trades start
09:24:35 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.70+] ATR undefined, using NaN fallback.
09:24:35 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.70+] MACD undefined, using NaN fallback.
09:24:35 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.70+] RSI undefined, using default 50.
09:24:35 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.28] Triggered BE-SL: OrderIdx:0, Side:BUY, Entry:1000.0, Exit:995, PNL:0.0
09:24:35 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.28] Triggered BE-SL: OrderIdx:1, Side:BUY, Entry:1001.0, Exit:996, PNL:0.0
09:24:35 [INFO] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.73+] [Patch] Forced Entry Audit: 2 forced entries logged: [0, 1]
09:24:35 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.63+] Returning tuple for legacy/test compatibility
PASSED                                                                   [ 74%]
test_gold_ai.py::test_ml_inference_path 
-------------------------------- live log call ---------------------------------
09:24:35 [INFO] [gold_ai2025.Part2_DeprecatedParams] Part 2: Core Parameters & Strategy Settings (DEPRECATED - Parameters now in StrategyConfig from YAML).
09:24:35 [WARNING] [gold_ai2025.Part2_DeprecatedParams] Part 2: Is DEPRECATED. All tunable strategy parameters should be managed by StrategyConfig.
09:24:35 [INFO] [gold_ai2025.Part2_DeprecatedParams] Any true constants (e.g., for feature engineering) will be defined in their relevant sections or Part 1.
09:24:35 [INFO] [gold_ai2025.MLHelpers] Loading Machine Learning Configuration & Helpers (v4.9.13 - Refined Model Switcher)...
09:24:35 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_CLASSIFIER (L1 Filter): True
09:24:35 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_META_CLASSIFIER (L2 Filter): False
09:24:35 [INFO] [gold_ai2025.MLHelpers]   Initial Optuna Hyperparameter Tuning Enabled: False
09:24:35 [INFO] [gold_ai2025.MLHelpers]   Initial Auto Threshold Tuning Enabled: False
09:24:35 [INFO] [gold_ai2025.MT5Connector] Loading Part 12: MT5 Connector (Placeholder)...
09:24:35 [INFO] [gold_ai2025.MT5Connector] Part 12: MT5 Connector (Placeholder) Loaded.
09:24:35 [DEBUG] [gold_ai2025.Part14_FutureAdditions] Part 14: Placeholder for Future Additions reached.
09:24:35 [INFO] [gold_ai2025.Part15_EndOfScript] Reached End of Part 15 (Definitive End of Script Marker). Gold AI script processing complete.
09:24:35 [DEBUG] [gold_ai2025.StrategyConfig] Initializing StrategyConfig with dict: {'initial_capital': 500, 'n_walk_forward_splits': 2, 'risk_per_trade': 0.02, 'use_catboost': True, 'use_shap': True}
09:24:35 [INFO] [gold_ai2025.StrategyConfig] StrategyConfig initialized. Risk/Trade: 0.020, Max Hold: 24 bars, Kill DD: 20.00%
09:24:35 [DEBUG] [gold_ai2025.StrategyConfig]   Feature Eng Params: M15 EMA Fast=50, M1 Rolling Z Window=300
09:24:35 [DEBUG] [gold_ai2025.StrategyConfig]   Default Signal Thresh: GainZ=0.3, RSI Buy=50
09:24:35 [DEBUG] [gold_ai2025.StrategyConfig]   Dynamic TP2 Params: HighVolBoost=1.2, LotBoostMult=1.1
09:24:35 [INFO] [gold_ai2025.run_all_folds_with_threshold] Detected legacy argument order; adjusted parameters.
09:24:35 [WARNING] [gold_ai2025.run_all_folds_with_threshold] trade_manager_obj not provided; using dummy instance.
09:24:35 [INFO] [gold_ai2025.RiskManager] RiskManager initialized. Hard Kill DD: 20.00%, Soft Kill DD: 15.00%
09:24:35 [WARNING] [gold_ai2025.run_all_folds_with_threshold] risk_manager_obj not provided; initialized new RiskManager.
09:24:35 [WARNING] [gold_ai2025.run_all_folds_with_threshold] output_dir_for_wfv not provided; using '/content/drive/MyDrive/new'.
09:24:35 [INFO] [gold_ai2025.run_all_folds_with_threshold] [Patch][QA v4.9.87] Using /content/drive/MyDrive/new as the only valid test path.
09:24:35 [INFO] [gold_ai2025.run_all_folds_with_threshold]       [Runner (Prep Data - Fund: FALLBACK_FUND)] Starting Full WF Sim (L1_Th=0.33) for 2 folds.
09:24:35 [INFO] [gold_ai2025.run_all_folds_with_threshold]    RiskManager and TradeManager states reset for WFV execution of Fund: FALLBACK_FUND
09:24:35 [INFO] [gold_ai2025.run_all_folds_with_threshold] 
--- Completed All 2 Folds for Fund: FALLBACK_FUND ---
09:24:35 [INFO] [gold_ai2025.calculate_metrics.Overall WF Buy (FALLBACK_FUND)]   (Metrics) Calculating full metrics for: 'Overall WF Buy (FALLBACK_FUND)'...
09:24:35 [WARNING] [gold_ai2025.calculate_metrics.Overall WF Buy (FALLBACK_FUND)]     No trades logged for 'Overall WF Buy (FALLBACK_FUND)'.
09:24:35 [INFO] [gold_ai2025.calculate_metrics.Overall WF Buy (FALLBACK_FUND)]   (Metrics) Finished calculating full metrics for: 'Overall WF Buy (FALLBACK_FUND)'.
09:24:35 [INFO] [gold_ai2025.calculate_metrics.Overall WF Sell (FALLBACK_FUND)]   (Metrics) Calculating full metrics for: 'Overall WF Sell (FALLBACK_FUND)'...
09:24:35 [WARNING] [gold_ai2025.calculate_metrics.Overall WF Sell (FALLBACK_FUND)]     No trades logged for 'Overall WF Sell (FALLBACK_FUND)'.
09:24:35 [INFO] [gold_ai2025.calculate_metrics.Overall WF Sell (FALLBACK_FUND)]   (Metrics) Finished calculating full metrics for: 'Overall WF Sell (FALLBACK_FUND)'.
09:24:35 [INFO] [gold_ai2025.export_run_summary_to_json] [Patch AI Studio v4.9.59+] [Patch] run_summary exported successfully: /content/drive/MyDrive/new/run_summary_FALLBACK_FUND_WFV_ALL_SUMMARY_20250521_092435.json
09:24:35 [INFO] [gold_ai2025.run_all_folds_with_threshold] --- Finished WFV Simulation for Fund: FALLBACK_FUND ---
PASSED                                                                   [ 75%]
test_gold_ai.py::test_safe_load_csv_auto_permission_denied 
-------------------------------- live log call ---------------------------------
09:24:35 [INFO] [gold_ai2025.Part2_DeprecatedParams] Part 2: Core Parameters & Strategy Settings (DEPRECATED - Parameters now in StrategyConfig from YAML).
09:24:35 [WARNING] [gold_ai2025.Part2_DeprecatedParams] Part 2: Is DEPRECATED. All tunable strategy parameters should be managed by StrategyConfig.
09:24:35 [INFO] [gold_ai2025.Part2_DeprecatedParams] Any true constants (e.g., for feature engineering) will be defined in their relevant sections or Part 1.
09:24:35 [INFO] [gold_ai2025.MLHelpers] Loading Machine Learning Configuration & Helpers (v4.9.13 - Refined Model Switcher)...
09:24:35 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_CLASSIFIER (L1 Filter): True
09:24:35 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_META_CLASSIFIER (L2 Filter): False
09:24:35 [INFO] [gold_ai2025.MLHelpers]   Initial Optuna Hyperparameter Tuning Enabled: False
09:24:35 [INFO] [gold_ai2025.MLHelpers]   Initial Auto Threshold Tuning Enabled: False
09:24:35 [INFO] [gold_ai2025.MT5Connector] Loading Part 12: MT5 Connector (Placeholder)...
09:24:35 [INFO] [gold_ai2025.MT5Connector] Part 12: MT5 Connector (Placeholder) Loaded.
09:24:35 [DEBUG] [gold_ai2025.Part14_FutureAdditions] Part 14: Placeholder for Future Additions reached.
09:24:35 [INFO] [gold_ai2025.Part15_EndOfScript] Reached End of Part 15 (Definitive End of Script Marker). Gold AI script processing complete.
09:24:35 [INFO] [gold_ai2025.safe_load_csv_auto] [Patch][QA v4.9.85] (safe_load) Attempting to load: file.csv
09:24:35 [WARNING] [gold_ai2025.safe_load_csv_auto] [Patch][QA v4.9.100] Could not create directory for CSV: PermissionError('permission denied')
PASSED                                                                   [ 75%]
test_gold_ai.py::test_safe_load_csv_auto_unicode_decode_nested 
-------------------------------- live log call ---------------------------------
09:24:35 [INFO] [gold_ai2025.Part2_DeprecatedParams] Part 2: Core Parameters & Strategy Settings (DEPRECATED - Parameters now in StrategyConfig from YAML).
09:24:35 [WARNING] [gold_ai2025.Part2_DeprecatedParams] Part 2: Is DEPRECATED. All tunable strategy parameters should be managed by StrategyConfig.
09:24:35 [INFO] [gold_ai2025.Part2_DeprecatedParams] Any true constants (e.g., for feature engineering) will be defined in their relevant sections or Part 1.
09:24:35 [INFO] [gold_ai2025.MLHelpers] Loading Machine Learning Configuration & Helpers (v4.9.13 - Refined Model Switcher)...
09:24:35 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_CLASSIFIER (L1 Filter): True
09:24:35 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_META_CLASSIFIER (L2 Filter): False
09:24:35 [INFO] [gold_ai2025.MLHelpers]   Initial Optuna Hyperparameter Tuning Enabled: False
09:24:35 [INFO] [gold_ai2025.MLHelpers]   Initial Auto Threshold Tuning Enabled: False
09:24:35 [INFO] [gold_ai2025.MT5Connector] Loading Part 12: MT5 Connector (Placeholder)...
09:24:35 [INFO] [gold_ai2025.MT5Connector] Part 12: MT5 Connector (Placeholder) Loaded.
09:24:35 [DEBUG] [gold_ai2025.Part14_FutureAdditions] Part 14: Placeholder for Future Additions reached.
09:24:35 [INFO] [gold_ai2025.Part15_EndOfScript] Reached End of Part 15 (Definitive End of Script Marker). Gold AI script processing complete.
09:24:35 [INFO] [gold_ai2025.safe_load_csv_auto] [Patch][QA v4.9.85] (safe_load) Attempting to load: nested.csv
09:24:35 [DEBUG] [gold_ai2025.safe_load_csv_auto] [Patch][QA v4.9.85] No .gz extension, using standard pd.read_csv.
09:24:35 [WARNING] [gold_ai2025.safe_load_csv_auto] [Patch][QA v4.9.85] UTF-8 decode failed, trying latin1 for file 'nested.csv' (UnicodeDecodeError('utf-8', b'', 0, 1, 'fail'))
09:24:35 [INFO] [gold_ai2025.safe_load_csv_auto] [Patch][QA v4.9.85] Loaded csv with latin1 encoding as fallback.
PASSED                                                                   [ 76%]
test_gold_ai.py::test_setup_output_directory_oserror_exit 
-------------------------------- live log call ---------------------------------
09:24:35 [INFO] [gold_ai2025.Part2_DeprecatedParams] Part 2: Core Parameters & Strategy Settings (DEPRECATED - Parameters now in StrategyConfig from YAML).
09:24:35 [WARNING] [gold_ai2025.Part2_DeprecatedParams] Part 2: Is DEPRECATED. All tunable strategy parameters should be managed by StrategyConfig.
09:24:35 [INFO] [gold_ai2025.Part2_DeprecatedParams] Any true constants (e.g., for feature engineering) will be defined in their relevant sections or Part 1.
09:24:35 [INFO] [gold_ai2025.MLHelpers] Loading Machine Learning Configuration & Helpers (v4.9.13 - Refined Model Switcher)...
09:24:35 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_CLASSIFIER (L1 Filter): True
09:24:35 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_META_CLASSIFIER (L2 Filter): False
09:24:35 [INFO] [gold_ai2025.MLHelpers]   Initial Optuna Hyperparameter Tuning Enabled: False
09:24:35 [INFO] [gold_ai2025.MLHelpers]   Initial Auto Threshold Tuning Enabled: False
09:24:35 [INFO] [gold_ai2025.MT5Connector] Loading Part 12: MT5 Connector (Placeholder)...
09:24:35 [INFO] [gold_ai2025.MT5Connector] Part 12: MT5 Connector (Placeholder) Loaded.
09:24:35 [DEBUG] [gold_ai2025.Part14_FutureAdditions] Part 14: Placeholder for Future Additions reached.
09:24:35 [INFO] [gold_ai2025.Part15_EndOfScript] Reached End of Part 15 (Definitive End of Script Marker). Gold AI script processing complete.
09:24:35 [INFO] [gold_ai2025.setup_output_directory]    (Setup) กำลังตรวจสอบ/สร้าง Output Directory: /disk/full/dir
09:24:35 [ERROR] [gold_ai2025.setup_output_directory]    (Error) ไม่สามารถสร้างหรือเข้าถึง Output Directory '/disk/full/dir': disk full
Traceback (most recent call last):
  File "/content/drive/MyDrive/new/gold_ai2025.py", line 1275, in setup_output_directory
    try:
        ^
  File "/usr/lib/python3.11/unittest/mock.py", line 1124, in __call__
    return self._mock_call(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.11/unittest/mock.py", line 1128, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.11/unittest/mock.py", line 1183, in _execute_mock_call
    raise effect
OSError: disk full
PASSED                                                                   [ 76%]
test_gold_ai.py::test_prepare_datetime_missing_columns 
-------------------------------- live log call ---------------------------------
09:24:36 [INFO] [gold_ai2025.Part2_DeprecatedParams] Part 2: Core Parameters & Strategy Settings (DEPRECATED - Parameters now in StrategyConfig from YAML).
09:24:36 [WARNING] [gold_ai2025.Part2_DeprecatedParams] Part 2: Is DEPRECATED. All tunable strategy parameters should be managed by StrategyConfig.
09:24:36 [INFO] [gold_ai2025.Part2_DeprecatedParams] Any true constants (e.g., for feature engineering) will be defined in their relevant sections or Part 1.
09:24:36 [INFO] [gold_ai2025.MLHelpers] Loading Machine Learning Configuration & Helpers (v4.9.13 - Refined Model Switcher)...
09:24:36 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_CLASSIFIER (L1 Filter): True
09:24:36 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_META_CLASSIFIER (L2 Filter): False
09:24:36 [INFO] [gold_ai2025.MLHelpers]   Initial Optuna Hyperparameter Tuning Enabled: False
09:24:36 [INFO] [gold_ai2025.MLHelpers]   Initial Auto Threshold Tuning Enabled: False
09:24:36 [INFO] [gold_ai2025.MT5Connector] Loading Part 12: MT5 Connector (Placeholder)...
09:24:36 [INFO] [gold_ai2025.MT5Connector] Part 12: MT5 Connector (Placeholder) Loaded.
09:24:36 [DEBUG] [gold_ai2025.Part14_FutureAdditions] Part 14: Placeholder for Future Additions reached.
09:24:36 [INFO] [gold_ai2025.Part15_EndOfScript] Reached End of Part 15 (Definitive End of Script Marker). Gold AI script processing complete.
09:24:36 [INFO] [gold_ai2025.prepare_datetime] (Processing) กำลังเตรียม Datetime Index ()...
09:24:36 [WARNING] [gold_ai2025.prepare_datetime]    StrategyConfig not provided or missing 'max_nat_ratio_threshold'. Using default: 0.05
09:24:36 [CRITICAL] [gold_ai2025.prepare_datetime] (Error) ขาดคอลัมน์ Date/Timestamp ใน .
PASSED                                                                   [ 77%]
test_gold_ai.py::test_prepare_datetime_nat_ratio_all 
-------------------------------- live log call ---------------------------------
09:24:36 [INFO] [gold_ai2025.Part2_DeprecatedParams] Part 2: Core Parameters & Strategy Settings (DEPRECATED - Parameters now in StrategyConfig from YAML).
09:24:36 [WARNING] [gold_ai2025.Part2_DeprecatedParams] Part 2: Is DEPRECATED. All tunable strategy parameters should be managed by StrategyConfig.
09:24:36 [INFO] [gold_ai2025.Part2_DeprecatedParams] Any true constants (e.g., for feature engineering) will be defined in their relevant sections or Part 1.
09:24:36 [INFO] [gold_ai2025.MLHelpers] Loading Machine Learning Configuration & Helpers (v4.9.13 - Refined Model Switcher)...
09:24:36 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_CLASSIFIER (L1 Filter): True
09:24:36 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_META_CLASSIFIER (L2 Filter): False
09:24:36 [INFO] [gold_ai2025.MLHelpers]   Initial Optuna Hyperparameter Tuning Enabled: False
09:24:36 [INFO] [gold_ai2025.MLHelpers]   Initial Auto Threshold Tuning Enabled: False
09:24:36 [INFO] [gold_ai2025.MT5Connector] Loading Part 12: MT5 Connector (Placeholder)...
09:24:36 [INFO] [gold_ai2025.MT5Connector] Part 12: MT5 Connector (Placeholder) Loaded.
09:24:36 [DEBUG] [gold_ai2025.Part14_FutureAdditions] Part 14: Placeholder for Future Additions reached.
09:24:36 [INFO] [gold_ai2025.Part15_EndOfScript] Reached End of Part 15 (Definitive End of Script Marker). Gold AI script processing complete.
09:24:36 [INFO] [gold_ai2025.prepare_datetime] (Processing) กำลังเตรียม Datetime Index (ALL_NAT_TEST)...
09:24:36 [WARNING] [gold_ai2025.prepare_datetime]    StrategyConfig not provided or missing 'max_nat_ratio_threshold'. Using default: 0.05
09:24:36 [INFO] [gold_ai2025.preview_datetime_format]    [Preview] First 5 Date + Timestamp format examples:
09:24:36 [INFO] [gold_ai2025.preview_datetime_format] 
0000 99:99:99
0000 99:99:99
0000 99:99:99
09:24:36 [INFO] [gold_ai2025.prepare_datetime]       [Converter] กำลังตรวจสอบและแปลงปี พ.ศ. เป็น ค.ศ. (ถ้าจำเป็น)...
09:24:36 [INFO] [gold_ai2025.prepare_datetime]       [Converter] ไม่พบปีที่น่าจะเป็น พ.ศ. (หรือข้อมูลน้อยเกินไป).
09:24:36 [DEBUG] [gold_ai2025.prepare_datetime]       Combining Date and Timestamp strings...
09:24:36 [INFO] [gold_ai2025.parse_datetime_safely]       [Parser] Attempting to parse date/time strings...
09:24:36 [DEBUG] [gold_ai2025.parse_datetime_safely]       [Parser] Trying format: '%Y%m%d %H:%M:%S' for 3 values...
09:24:36 [DEBUG] [gold_ai2025.parse_datetime_safely]       [Parser] Trying format: '%Y%m%d%H:%M:%S' for 3 values...
09:24:36 [DEBUG] [gold_ai2025.parse_datetime_safely]       [Parser] Trying format: '%Y-%m-%d %H:%M:%S' for 3 values...
09:24:36 [DEBUG] [gold_ai2025.parse_datetime_safely]       [Parser] Trying format: '%Y/%m/%d %H:%M:%S' for 3 values...
09:24:37 [DEBUG] [gold_ai2025.parse_datetime_safely]       [Parser] Trying format: '%Y.%m.%d %H:%M:%S' for 3 values...
09:24:37 [DEBUG] [gold_ai2025.parse_datetime_safely]       [Parser] Trying format: '%d/%m/%Y %H:%M:%S' for 3 values...
09:24:37 [DEBUG] [gold_ai2025.parse_datetime_safely]       [Parser] Trying format: '%m/%d/%Y %H:%M:%S' for 3 values...
09:24:37 [INFO] [gold_ai2025.parse_datetime_safely]       [Parser] Trying general parser for 3 remaining values...
09:24:37 [WARNING] [gold_ai2025.parse_datetime_safely]       [Parser] Could not parse 3 date/time strings.
09:24:37 [WARNING] [gold_ai2025.parse_datetime_safely]          Example failed strings:
0    0000 99:99:99
1    0000 99:99:99
2    0000 99:99:99
09:24:37 [INFO] [gold_ai2025.parse_datetime_safely]       [Parser] (Finished) Date/time parsing complete.
09:24:37 [WARNING] [gold_ai2025.prepare_datetime]    (Warning) พบค่า NaT 3 (100.0%) ใน ALL_NAT_TEST หลังการ parse.
09:24:37 [CRITICAL] [gold_ai2025.prepare_datetime]    (Error) พบค่า NaT 100% ใน ALL_NAT_TEST. ไม่สามารถดำเนินการต่อได้. ตัวอย่าง: 0000 99:99:99
PASSED                                                                   [ 77%]
test_gold_ai.py::test_RiskManager_update_drawdown_edge_cases 
-------------------------------- live log call ---------------------------------
09:24:38 [INFO] [gold_ai2025.Part2_DeprecatedParams] Part 2: Core Parameters & Strategy Settings (DEPRECATED - Parameters now in StrategyConfig from YAML).
09:24:38 [WARNING] [gold_ai2025.Part2_DeprecatedParams] Part 2: Is DEPRECATED. All tunable strategy parameters should be managed by StrategyConfig.
09:24:38 [INFO] [gold_ai2025.Part2_DeprecatedParams] Any true constants (e.g., for feature engineering) will be defined in their relevant sections or Part 1.
09:24:38 [INFO] [gold_ai2025.MLHelpers] Loading Machine Learning Configuration & Helpers (v4.9.13 - Refined Model Switcher)...
09:24:38 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_CLASSIFIER (L1 Filter): True
09:24:38 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_META_CLASSIFIER (L2 Filter): False
09:24:38 [INFO] [gold_ai2025.MLHelpers]   Initial Optuna Hyperparameter Tuning Enabled: False
09:24:38 [INFO] [gold_ai2025.MLHelpers]   Initial Auto Threshold Tuning Enabled: False
09:24:38 [INFO] [gold_ai2025.MT5Connector] Loading Part 12: MT5 Connector (Placeholder)...
09:24:38 [INFO] [gold_ai2025.MT5Connector] Part 12: MT5 Connector (Placeholder) Loaded.
09:24:38 [DEBUG] [gold_ai2025.Part14_FutureAdditions] Part 14: Placeholder for Future Additions reached.
09:24:38 [INFO] [gold_ai2025.Part15_EndOfScript] Reached End of Part 15 (Definitive End of Script Marker). Gold AI script processing complete.
09:24:38 [DEBUG] [gold_ai2025.StrategyConfig] Initializing StrategyConfig with dict: {}
09:24:38 [INFO] [gold_ai2025.StrategyConfig] StrategyConfig initialized. Risk/Trade: 0.010, Max Hold: 24 bars, Kill DD: 20.00%
09:24:38 [DEBUG] [gold_ai2025.StrategyConfig]   Feature Eng Params: M15 EMA Fast=50, M1 Rolling Z Window=300
09:24:38 [DEBUG] [gold_ai2025.StrategyConfig]   Default Signal Thresh: GainZ=0.3, RSI Buy=50
09:24:38 [DEBUG] [gold_ai2025.StrategyConfig]   Dynamic TP2 Params: HighVolBoost=1.2, LotBoostMult=1.1
09:24:38 [INFO] [gold_ai2025.RiskManager] RiskManager initialized. Hard Kill DD: 200.00%, Soft Kill DD: 150.00%
09:24:38 [WARNING] [gold_ai2025.RiskManager] [Patch AI Studio v4.9.58+] current_equity is None/NaN in update_drawdown, forcing 0.0
09:24:38 [INFO] [gold_ai2025.RiskManager] [Patch AI Studio v4.9.58+] Drawdown peak initialized to 1.00
09:24:38 [INFO] [gold_ai2025.RiskManager] [Patch AI Studio v4.9.58+] Drawdown updated: Equity=0.00, Peak=1.00, DD=1.0000
09:24:38 [WARNING] [gold_ai2025.RiskManager] [Patch AI Studio v4.9.58+] current_equity is negative! Forcing to 0.0
09:24:38 [INFO] [gold_ai2025.RiskManager] [Patch AI Studio v4.9.58+] Drawdown updated: Equity=0.00, Peak=1.00, DD=1.0000
09:24:38 [INFO] [gold_ai2025.RiskManager] RiskManager initialized. Hard Kill DD: 200.00%, Soft Kill DD: 150.00%
09:24:38 [INFO] [gold_ai2025.RiskManager] [Patch AI Studio v4.9.58+] Drawdown peak initialized to 5.00
09:24:38 [INFO] [gold_ai2025.RiskManager] [Patch AI Studio v4.9.58+] Drawdown updated: Equity=5.00, Peak=5.00, DD=0.0000
09:24:38 [INFO] [gold_ai2025.RiskManager] RiskManager initialized. Hard Kill DD: 200.00%, Soft Kill DD: 150.00%
09:24:38 [INFO] [gold_ai2025.RiskManager] [Patch AI Studio v4.9.58+] Drawdown updated: Equity=0.00, Peak=1.00, DD=1.0000
PASSED                                                                   [ 78%]
test_gold_ai.py::test_RiskManager_update_drawdown_kill_switch 
-------------------------------- live log call ---------------------------------
09:24:38 [INFO] [gold_ai2025.Part2_DeprecatedParams] Part 2: Core Parameters & Strategy Settings (DEPRECATED - Parameters now in StrategyConfig from YAML).
09:24:38 [WARNING] [gold_ai2025.Part2_DeprecatedParams] Part 2: Is DEPRECATED. All tunable strategy parameters should be managed by StrategyConfig.
09:24:38 [INFO] [gold_ai2025.Part2_DeprecatedParams] Any true constants (e.g., for feature engineering) will be defined in their relevant sections or Part 1.
09:24:38 [INFO] [gold_ai2025.MLHelpers] Loading Machine Learning Configuration & Helpers (v4.9.13 - Refined Model Switcher)...
09:24:38 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_CLASSIFIER (L1 Filter): True
09:24:38 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_META_CLASSIFIER (L2 Filter): False
09:24:38 [INFO] [gold_ai2025.MLHelpers]   Initial Optuna Hyperparameter Tuning Enabled: False
09:24:38 [INFO] [gold_ai2025.MLHelpers]   Initial Auto Threshold Tuning Enabled: False
09:24:38 [INFO] [gold_ai2025.MT5Connector] Loading Part 12: MT5 Connector (Placeholder)...
09:24:38 [INFO] [gold_ai2025.MT5Connector] Part 12: MT5 Connector (Placeholder) Loaded.
09:24:38 [DEBUG] [gold_ai2025.Part14_FutureAdditions] Part 14: Placeholder for Future Additions reached.
09:24:38 [INFO] [gold_ai2025.Part15_EndOfScript] Reached End of Part 15 (Definitive End of Script Marker). Gold AI script processing complete.
09:24:38 [DEBUG] [gold_ai2025.StrategyConfig] Initializing StrategyConfig with dict: {}
09:24:38 [INFO] [gold_ai2025.StrategyConfig] StrategyConfig initialized. Risk/Trade: 0.010, Max Hold: 24 bars, Kill DD: 20.00%
09:24:38 [DEBUG] [gold_ai2025.StrategyConfig]   Feature Eng Params: M15 EMA Fast=50, M1 Rolling Z Window=300
09:24:38 [DEBUG] [gold_ai2025.StrategyConfig]   Default Signal Thresh: GainZ=0.3, RSI Buy=50
09:24:38 [DEBUG] [gold_ai2025.StrategyConfig]   Dynamic TP2 Params: HighVolBoost=1.2, LotBoostMult=1.1
09:24:38 [INFO] [gold_ai2025.RiskManager] RiskManager initialized. Hard Kill DD: 20.00%, Soft Kill DD: 15.00%
09:24:38 [INFO] [gold_ai2025.RiskManager] [Patch AI Studio v4.9.58+] Drawdown updated: Equity=79.00, Peak=100.00, DD=0.2100
09:24:38 [CRITICAL] [gold_ai2025.RiskManager] [Patch AI Studio v4.9.58+][RISK] Soft Kill ACTIVATED: DD=0.2100 >= 0.1500
09:24:38 [CRITICAL] [gold_ai2025.RiskManager] [Patch AI Studio v4.9.59+][Patch] [RISK - KILL SWITCH] Max Drawdown Triggered! EQ=79.00, Peak=100.00, DD=0.2100 >= 0.2000
PASSED                                                                   [ 78%]
test_gold_ai.py::test_TradeManager_should_force_entry_block_paths 
-------------------------------- live log call ---------------------------------
09:24:38 [INFO] [gold_ai2025.Part2_DeprecatedParams] Part 2: Core Parameters & Strategy Settings (DEPRECATED - Parameters now in StrategyConfig from YAML).
09:24:38 [WARNING] [gold_ai2025.Part2_DeprecatedParams] Part 2: Is DEPRECATED. All tunable strategy parameters should be managed by StrategyConfig.
09:24:38 [INFO] [gold_ai2025.Part2_DeprecatedParams] Any true constants (e.g., for feature engineering) will be defined in their relevant sections or Part 1.
09:24:38 [INFO] [gold_ai2025.MLHelpers] Loading Machine Learning Configuration & Helpers (v4.9.13 - Refined Model Switcher)...
09:24:38 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_CLASSIFIER (L1 Filter): True
09:24:38 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_META_CLASSIFIER (L2 Filter): False
09:24:38 [INFO] [gold_ai2025.MLHelpers]   Initial Optuna Hyperparameter Tuning Enabled: False
09:24:38 [INFO] [gold_ai2025.MLHelpers]   Initial Auto Threshold Tuning Enabled: False
09:24:38 [INFO] [gold_ai2025.MT5Connector] Loading Part 12: MT5 Connector (Placeholder)...
09:24:38 [INFO] [gold_ai2025.MT5Connector] Part 12: MT5 Connector (Placeholder) Loaded.
09:24:38 [DEBUG] [gold_ai2025.Part14_FutureAdditions] Part 14: Placeholder for Future Additions reached.
09:24:38 [INFO] [gold_ai2025.Part15_EndOfScript] Reached End of Part 15 (Definitive End of Script Marker). Gold AI script processing complete.
09:24:38 [DEBUG] [gold_ai2025.StrategyConfig] Initializing StrategyConfig with dict: {}
09:24:38 [INFO] [gold_ai2025.StrategyConfig] StrategyConfig initialized. Risk/Trade: 0.010, Max Hold: 24 bars, Kill DD: 20.00%
09:24:38 [DEBUG] [gold_ai2025.StrategyConfig]   Feature Eng Params: M15 EMA Fast=50, M1 Rolling Z Window=300
09:24:38 [DEBUG] [gold_ai2025.StrategyConfig]   Default Signal Thresh: GainZ=0.3, RSI Buy=50
09:24:38 [DEBUG] [gold_ai2025.StrategyConfig]   Dynamic TP2 Params: HighVolBoost=1.2, LotBoostMult=1.1
09:24:38 [INFO] [gold_ai2025.RiskManager] RiskManager initialized. Hard Kill DD: 20.00%, Soft Kill DD: 15.00%
09:24:38 [INFO] [gold_ai2025.TradeManager] TradeManager initialized. FE Cooldown: 240 min, FE Score: 1.0, FE Max Losses: 2
09:24:38 [INFO] [gold_ai2025.TradeManager] [Patch AI Studio v4.9.58+] Forced entry disabled by config.
09:24:38 [DEBUG] [gold_ai2025.RiskManager] [RISK] Trading blocked: Soft Kill Switch is active.
09:24:38 [DEBUG] [gold_ai2025.TradeManager] [Patch AI Studio v4.9.58+] Forced entry blocked: Soft Kill is active.
09:24:38 [DEBUG] [gold_ai2025.TradeManager] [Patch AI Studio v4.9.58+] Forced entry check: Cooldown 10.0 min < 240 min.
09:24:38 [DEBUG] [gold_ai2025.TradeManager] [Patch AI Studio v4.9.58+] No last trade time, cooldown met.
09:24:38 [DEBUG] [gold_ai2025.TradeManager] [Patch AI Studio v4.9.58+] Forced entry: score 0.5 < min 1.0
09:24:38 [DEBUG] [gold_ai2025.TradeManager] [Patch AI Studio v4.9.58+] No last trade time, cooldown met.
09:24:38 [INFO] [gold_ai2025.TradeManager] [Patch AI Studio v4.9.58+] Forced entry blocked: Max consecutive forced losses 2 >= 2
09:24:38 [DEBUG] [gold_ai2025.TradeManager] [Patch AI Studio v4.9.58+] No last trade time, cooldown met.
09:24:38 [DEBUG] [gold_ai2025.TradeManager] [Patch AI Studio v4.9.58+] Forced entry: NaN in market data, skipping ATR/gain_z/pattern checks.
09:24:38 [INFO] [gold_ai2025.TradeManager] [Patch AI Studio v4.9.58+] Forced entry ALLOWED: Δt=inf min, Score=2.00
09:24:38 [DEBUG] [gold_ai2025.TradeManager] [Patch AI Studio v4.9.58+] No last trade time, cooldown met.
09:24:38 [DEBUG] [gold_ai2025.TradeManager] [Patch AI Studio v4.9.58+] Forced entry: ATR ratio (10.00) > max 2.5
09:24:38 [DEBUG] [gold_ai2025.TradeManager] [Patch AI Studio v4.9.58+] No last trade time, cooldown met.
09:24:38 [DEBUG] [gold_ai2025.TradeManager] [Patch AI Studio v4.9.58+] Forced entry: Abs Gain_Z 0.10 < min 1.0
09:24:38 [DEBUG] [gold_ai2025.TradeManager] [Patch AI Studio v4.9.58+] No last trade time, cooldown met.
09:24:38 [DEBUG] [gold_ai2025.TradeManager] [Patch AI Studio v4.9.58+] Forced entry: pattern 'Unknown' not in allowed ['Normal', 'Breakout', 'StrongTrend']
PASSED                                                                   [ 79%]
test_gold_ai.py::test_TradeManager_should_force_entry_success 
-------------------------------- live log call ---------------------------------
09:24:38 [INFO] [gold_ai2025.Part2_DeprecatedParams] Part 2: Core Parameters & Strategy Settings (DEPRECATED - Parameters now in StrategyConfig from YAML).
09:24:38 [WARNING] [gold_ai2025.Part2_DeprecatedParams] Part 2: Is DEPRECATED. All tunable strategy parameters should be managed by StrategyConfig.
09:24:38 [INFO] [gold_ai2025.Part2_DeprecatedParams] Any true constants (e.g., for feature engineering) will be defined in their relevant sections or Part 1.
09:24:38 [INFO] [gold_ai2025.MLHelpers] Loading Machine Learning Configuration & Helpers (v4.9.13 - Refined Model Switcher)...
09:24:38 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_CLASSIFIER (L1 Filter): True
09:24:38 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_META_CLASSIFIER (L2 Filter): False
09:24:38 [INFO] [gold_ai2025.MLHelpers]   Initial Optuna Hyperparameter Tuning Enabled: False
09:24:38 [INFO] [gold_ai2025.MLHelpers]   Initial Auto Threshold Tuning Enabled: False
09:24:38 [INFO] [gold_ai2025.MT5Connector] Loading Part 12: MT5 Connector (Placeholder)...
09:24:38 [INFO] [gold_ai2025.MT5Connector] Part 12: MT5 Connector (Placeholder) Loaded.
09:24:38 [DEBUG] [gold_ai2025.Part14_FutureAdditions] Part 14: Placeholder for Future Additions reached.
09:24:38 [INFO] [gold_ai2025.Part15_EndOfScript] Reached End of Part 15 (Definitive End of Script Marker). Gold AI script processing complete.
09:24:38 [DEBUG] [gold_ai2025.StrategyConfig] Initializing StrategyConfig with dict: {}
09:24:38 [INFO] [gold_ai2025.StrategyConfig] StrategyConfig initialized. Risk/Trade: 0.010, Max Hold: 24 bars, Kill DD: 20.00%
09:24:38 [DEBUG] [gold_ai2025.StrategyConfig]   Feature Eng Params: M15 EMA Fast=50, M1 Rolling Z Window=300
09:24:38 [DEBUG] [gold_ai2025.StrategyConfig]   Default Signal Thresh: GainZ=0.3, RSI Buy=50
09:24:38 [DEBUG] [gold_ai2025.StrategyConfig]   Dynamic TP2 Params: HighVolBoost=1.2, LotBoostMult=1.1
09:24:38 [INFO] [gold_ai2025.RiskManager] RiskManager initialized. Hard Kill DD: 20.00%, Soft Kill DD: 15.00%
09:24:38 [INFO] [gold_ai2025.TradeManager] TradeManager initialized. FE Cooldown: 240 min, FE Score: 1.0, FE Max Losses: 2
09:24:38 [DEBUG] [gold_ai2025.TradeManager] [Patch AI Studio v4.9.58+] No last trade time, cooldown met.
09:24:38 [INFO] [gold_ai2025.TradeManager] [Patch AI Studio v4.9.58+] Forced entry ALLOWED: Δt=inf min, Score=2.00
PASSED                                                                   [ 80%]
test_gold_ai.py::test_try_import_with_install_importerror 
-------------------------------- live log call ---------------------------------
09:24:38 [INFO] [gold_ai2025.Part2_DeprecatedParams] Part 2: Core Parameters & Strategy Settings (DEPRECATED - Parameters now in StrategyConfig from YAML).
09:24:38 [WARNING] [gold_ai2025.Part2_DeprecatedParams] Part 2: Is DEPRECATED. All tunable strategy parameters should be managed by StrategyConfig.
09:24:38 [INFO] [gold_ai2025.Part2_DeprecatedParams] Any true constants (e.g., for feature engineering) will be defined in their relevant sections or Part 1.
09:24:39 [INFO] [gold_ai2025.MLHelpers] Loading Machine Learning Configuration & Helpers (v4.9.13 - Refined Model Switcher)...
09:24:39 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_CLASSIFIER (L1 Filter): True
09:24:39 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_META_CLASSIFIER (L2 Filter): False
09:24:39 [INFO] [gold_ai2025.MLHelpers]   Initial Optuna Hyperparameter Tuning Enabled: False
09:24:39 [INFO] [gold_ai2025.MLHelpers]   Initial Auto Threshold Tuning Enabled: False
09:24:39 [INFO] [gold_ai2025.MT5Connector] Loading Part 12: MT5 Connector (Placeholder)...
09:24:39 [INFO] [gold_ai2025.MT5Connector] Part 12: MT5 Connector (Placeholder) Loaded.
09:24:39 [DEBUG] [gold_ai2025.Part14_FutureAdditions] Part 14: Placeholder for Future Additions reached.
09:24:39 [INFO] [gold_ai2025.Part15_EndOfScript] Reached End of Part 15 (Definitive End of Script Marker). Gold AI script processing complete.
09:24:39 [WARNING] [gold_ai2025.try_import_with_install] ไม่พบ Library: NOTFOUNDLIB. กำลังพยายามติดตั้ง...
09:24:39 [ERROR] [gold_ai2025.try_import_with_install]    (Error) เกิดข้อผิดพลาดระหว่างติดตั้ง notfoundlib: pip fail
Traceback (most recent call last):
  File "/content/drive/MyDrive/new/gold_ai2025.py", line 382, in try_import_with_install
    imported_module = importlib.import_module(module_name)
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.11/unittest/mock.py", line 1124, in __call__
    return self._mock_call(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.11/unittest/mock.py", line 1128, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.11/unittest/mock.py", line 1183, in _execute_mock_call
    raise effect
ImportError: fail

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/content/drive/MyDrive/new/gold_ai2025.py", line 393, in try_import_with_install
    install_result = subprocess.run(
                     ^^^^^^^^^^^^^^^
  File "/usr/lib/python3.11/unittest/mock.py", line 1124, in __call__
    return self._mock_call(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.11/unittest/mock.py", line 1128, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.11/unittest/mock.py", line 1183, in _execute_mock_call
    raise effect
Exception: pip fail
09:24:39 [INFO] [gold_ai2025.try_import_with_install]    Assigned None for missing 'notfoundlib'.
PASSED                                                                   [ 80%]
test_gold_ai.py::test_try_import_with_install_no_version 
-------------------------------- live log call ---------------------------------
09:24:39 [INFO] [gold_ai2025.Part2_DeprecatedParams] Part 2: Core Parameters & Strategy Settings (DEPRECATED - Parameters now in StrategyConfig from YAML).
09:24:39 [WARNING] [gold_ai2025.Part2_DeprecatedParams] Part 2: Is DEPRECATED. All tunable strategy parameters should be managed by StrategyConfig.
09:24:39 [INFO] [gold_ai2025.Part2_DeprecatedParams] Any true constants (e.g., for feature engineering) will be defined in their relevant sections or Part 1.
09:24:39 [INFO] [gold_ai2025.MLHelpers] Loading Machine Learning Configuration & Helpers (v4.9.13 - Refined Model Switcher)...
09:24:39 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_CLASSIFIER (L1 Filter): True
09:24:39 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_META_CLASSIFIER (L2 Filter): False
09:24:39 [INFO] [gold_ai2025.MLHelpers]   Initial Optuna Hyperparameter Tuning Enabled: False
09:24:39 [INFO] [gold_ai2025.MLHelpers]   Initial Auto Threshold Tuning Enabled: False
09:24:39 [INFO] [gold_ai2025.MT5Connector] Loading Part 12: MT5 Connector (Placeholder)...
09:24:39 [INFO] [gold_ai2025.MT5Connector] Part 12: MT5 Connector (Placeholder) Loaded.
09:24:39 [DEBUG] [gold_ai2025.Part14_FutureAdditions] Part 14: Placeholder for Future Additions reached.
09:24:39 [INFO] [gold_ai2025.Part15_EndOfScript] Reached End of Part 15 (Definitive End of Script Marker). Gold AI script processing complete.
09:24:39 [DEBUG] [gold_ai2025.log_library_version] [DEBUG] Version attribute for library NOVERSION is 'N/A' or None.
PASSED                                                                   [ 81%]
test_gold_ai.py::test_plot_equity_curve_importerror 
-------------------------------- live log call ---------------------------------
09:24:39 [INFO] [gold_ai2025.Part2_DeprecatedParams] Part 2: Core Parameters & Strategy Settings (DEPRECATED - Parameters now in StrategyConfig from YAML).
09:24:39 [WARNING] [gold_ai2025.Part2_DeprecatedParams] Part 2: Is DEPRECATED. All tunable strategy parameters should be managed by StrategyConfig.
09:24:39 [INFO] [gold_ai2025.Part2_DeprecatedParams] Any true constants (e.g., for feature engineering) will be defined in their relevant sections or Part 1.
09:24:39 [INFO] [gold_ai2025.MLHelpers] Loading Machine Learning Configuration & Helpers (v4.9.13 - Refined Model Switcher)...
09:24:39 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_CLASSIFIER (L1 Filter): True
09:24:39 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_META_CLASSIFIER (L2 Filter): False
09:24:39 [INFO] [gold_ai2025.MLHelpers]   Initial Optuna Hyperparameter Tuning Enabled: False
09:24:39 [INFO] [gold_ai2025.MLHelpers]   Initial Auto Threshold Tuning Enabled: False
09:24:39 [INFO] [gold_ai2025.MT5Connector] Loading Part 12: MT5 Connector (Placeholder)...
09:24:39 [INFO] [gold_ai2025.MT5Connector] Part 12: MT5 Connector (Placeholder) Loaded.
09:24:39 [DEBUG] [gold_ai2025.Part14_FutureAdditions] Part 14: Placeholder for Future Additions reached.
09:24:39 [INFO] [gold_ai2025.Part15_EndOfScript] Reached End of Part 15 (Definitive End of Script Marker). Gold AI script processing complete.
09:24:39 [DEBUG] [gold_ai2025.StrategyConfig] Initializing StrategyConfig with dict: {}
09:24:39 [INFO] [gold_ai2025.StrategyConfig] StrategyConfig initialized. Risk/Trade: 0.010, Max Hold: 24 bars, Kill DD: 20.00%
09:24:39 [DEBUG] [gold_ai2025.StrategyConfig]   Feature Eng Params: M15 EMA Fast=50, M1 Rolling Z Window=300
09:24:39 [DEBUG] [gold_ai2025.StrategyConfig]   Default Signal Thresh: GainZ=0.3, RSI Buy=50
09:24:39 [DEBUG] [gold_ai2025.StrategyConfig]   Dynamic TP2 Params: HighVolBoost=1.2, LotBoostMult=1.1
09:24:39 [INFO] [gold_ai2025.plot_equity_curve.demo] 
--- (Plotting) Plotting Equity Curve: ImportError Test ---
PASSED                                                                   [ 81%]
test_gold_ai.py::test_set_thai_font_no_matplotlib 
-------------------------------- live log call ---------------------------------
09:24:39 [INFO] [gold_ai2025.Part2_DeprecatedParams] Part 2: Core Parameters & Strategy Settings (DEPRECATED - Parameters now in StrategyConfig from YAML).
09:24:39 [WARNING] [gold_ai2025.Part2_DeprecatedParams] Part 2: Is DEPRECATED. All tunable strategy parameters should be managed by StrategyConfig.
09:24:39 [INFO] [gold_ai2025.Part2_DeprecatedParams] Any true constants (e.g., for feature engineering) will be defined in their relevant sections or Part 1.
09:24:39 [INFO] [gold_ai2025.MLHelpers] Loading Machine Learning Configuration & Helpers (v4.9.13 - Refined Model Switcher)...
09:24:39 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_CLASSIFIER (L1 Filter): True
09:24:39 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_META_CLASSIFIER (L2 Filter): False
09:24:39 [INFO] [gold_ai2025.MLHelpers]   Initial Optuna Hyperparameter Tuning Enabled: False
09:24:39 [INFO] [gold_ai2025.MLHelpers]   Initial Auto Threshold Tuning Enabled: False
09:24:39 [INFO] [gold_ai2025.MT5Connector] Loading Part 12: MT5 Connector (Placeholder)...
09:24:39 [INFO] [gold_ai2025.MT5Connector] Part 12: MT5 Connector (Placeholder) Loaded.
09:24:39 [DEBUG] [gold_ai2025.Part14_FutureAdditions] Part 14: Placeholder for Future Additions reached.
09:24:39 [INFO] [gold_ai2025.Part15_EndOfScript] Reached End of Part 15 (Definitive End of Script Marker). Gold AI script processing complete.
09:24:39 [WARNING] [root] [Patch][Font][QA v4.9.91+] matplotlib not available for font setting.
PASSED                                                                   [ 82%]
test_gold_ai.py::test_simple_converter_complex_types 
-------------------------------- live log call ---------------------------------
09:24:39 [INFO] [gold_ai2025.Part2_DeprecatedParams] Part 2: Core Parameters & Strategy Settings (DEPRECATED - Parameters now in StrategyConfig from YAML).
09:24:39 [WARNING] [gold_ai2025.Part2_DeprecatedParams] Part 2: Is DEPRECATED. All tunable strategy parameters should be managed by StrategyConfig.
09:24:39 [INFO] [gold_ai2025.Part2_DeprecatedParams] Any true constants (e.g., for feature engineering) will be defined in their relevant sections or Part 1.
09:24:39 [INFO] [gold_ai2025.MLHelpers] Loading Machine Learning Configuration & Helpers (v4.9.13 - Refined Model Switcher)...
09:24:39 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_CLASSIFIER (L1 Filter): True
09:24:39 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_META_CLASSIFIER (L2 Filter): False
09:24:39 [INFO] [gold_ai2025.MLHelpers]   Initial Optuna Hyperparameter Tuning Enabled: False
09:24:39 [INFO] [gold_ai2025.MLHelpers]   Initial Auto Threshold Tuning Enabled: False
09:24:39 [INFO] [gold_ai2025.MT5Connector] Loading Part 12: MT5 Connector (Placeholder)...
09:24:39 [INFO] [gold_ai2025.MT5Connector] Part 12: MT5 Connector (Placeholder) Loaded.
09:24:39 [DEBUG] [gold_ai2025.Part14_FutureAdditions] Part 14: Placeholder for Future Additions reached.
09:24:39 [INFO] [gold_ai2025.Part15_EndOfScript] Reached End of Part 15 (Definitive End of Script Marker). Gold AI script processing complete.
09:24:39 [DEBUG] [gold_ai2025.simple_converter] Type <class 'set'> not directly serializable. Converting to string: '{1, 2}...'
09:24:39 [DEBUG] [gold_ai2025.simple_converter] Type <class 'complex'> not directly serializable. Converting to string: '(2+3j)...'
09:24:39 [DEBUG] [gold_ai2025.simple_converter] Type <class 'test_gold_ai.test_simple_converter_complex_types.<locals>.Custom'> not directly serializable. Converting to string: '<test_gold_ai.test_simple_converter_complex_types.<locals>.Custom object at 0x7f8b7daf2a90>...'
PASSED                                                                   [ 82%]
test_gold_ai.py::test__isinstance_safe_magicmock 
-------------------------------- live log call ---------------------------------
09:24:40 [INFO] [gold_ai2025.Part2_DeprecatedParams] Part 2: Core Parameters & Strategy Settings (DEPRECATED - Parameters now in StrategyConfig from YAML).
09:24:40 [WARNING] [gold_ai2025.Part2_DeprecatedParams] Part 2: Is DEPRECATED. All tunable strategy parameters should be managed by StrategyConfig.
09:24:40 [INFO] [gold_ai2025.Part2_DeprecatedParams] Any true constants (e.g., for feature engineering) will be defined in their relevant sections or Part 1.
09:24:40 [INFO] [gold_ai2025.MLHelpers] Loading Machine Learning Configuration & Helpers (v4.9.13 - Refined Model Switcher)...
09:24:40 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_CLASSIFIER (L1 Filter): True
09:24:40 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_META_CLASSIFIER (L2 Filter): False
09:24:40 [INFO] [gold_ai2025.MLHelpers]   Initial Optuna Hyperparameter Tuning Enabled: False
09:24:40 [INFO] [gold_ai2025.MLHelpers]   Initial Auto Threshold Tuning Enabled: False
09:24:40 [INFO] [gold_ai2025.MT5Connector] Loading Part 12: MT5 Connector (Placeholder)...
09:24:40 [INFO] [gold_ai2025.MT5Connector] Part 12: MT5 Connector (Placeholder) Loaded.
09:24:40 [DEBUG] [gold_ai2025.Part14_FutureAdditions] Part 14: Placeholder for Future Additions reached.
09:24:40 [INFO] [gold_ai2025.Part15_EndOfScript] Reached End of Part 15 (Definitive End of Script Marker). Gold AI script processing complete.
09:24:40 [WARNING] [root] [Patch AI Studio v4.9.41] _isinstance_safe: fallback DataFrame attribute match for <MagicMock id='140237099476752'>
PASSED                                                                   [ 83%]
test_gold_ai.py::TestUtilityCoverageQA::test_ensure_dataframe_all_cases 
-------------------------------- live log setup --------------------------------
09:24:40 [INFO] [gold_ai2025.Part2_DeprecatedParams] Part 2: Core Parameters & Strategy Settings (DEPRECATED - Parameters now in StrategyConfig from YAML).
09:24:40 [WARNING] [gold_ai2025.Part2_DeprecatedParams] Part 2: Is DEPRECATED. All tunable strategy parameters should be managed by StrategyConfig.
09:24:40 [INFO] [gold_ai2025.Part2_DeprecatedParams] Any true constants (e.g., for feature engineering) will be defined in their relevant sections or Part 1.
09:24:40 [INFO] [gold_ai2025.MLHelpers] Loading Machine Learning Configuration & Helpers (v4.9.13 - Refined Model Switcher)...
09:24:40 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_CLASSIFIER (L1 Filter): True
09:24:40 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_META_CLASSIFIER (L2 Filter): False
09:24:40 [INFO] [gold_ai2025.MLHelpers]   Initial Optuna Hyperparameter Tuning Enabled: False
09:24:40 [INFO] [gold_ai2025.MLHelpers]   Initial Auto Threshold Tuning Enabled: False
09:24:40 [INFO] [gold_ai2025.MT5Connector] Loading Part 12: MT5 Connector (Placeholder)...
09:24:40 [INFO] [gold_ai2025.MT5Connector] Part 12: MT5 Connector (Placeholder) Loaded.
09:24:40 [DEBUG] [gold_ai2025.Part14_FutureAdditions] Part 14: Placeholder for Future Additions reached.
09:24:40 [INFO] [gold_ai2025.Part15_EndOfScript] Reached End of Part 15 (Definitive End of Script Marker). Gold AI script processing complete.
PASSED                                                                   [ 83%]
test_gold_ai.py::TestUtilityCoverageQA::test_ensure_datetimeindex_conversion PASSED [ 84%]
test_gold_ai.py::TestUtilityCoverageQA::test_safe_float_fmt_variants PASSED [ 84%]
test_gold_ai.py::TestUtilityCoverageQA::test_simple_converter_all_paths 
-------------------------------- live log call ---------------------------------
09:24:40 [DEBUG] [gold_ai2025.simple_converter] Type <class 'set'> not directly serializable. Converting to string: '{1, 2}...'
09:24:40 [DEBUG] [gold_ai2025.simple_converter] Type <class 'complex'> not directly serializable. Converting to string: '(2+3j)...'
09:24:40 [DEBUG] [gold_ai2025.simple_converter] Type <class 'test_gold_ai.TestUtilityCoverageQA.test_simple_converter_all_paths.<locals>.DummyObj'> not directly serializable. Converting to string: '<test_gold_ai.TestUtilityCoverageQA.test_simple_converter_all_paths.<locals>.DummyObj object at 0x7f...'
PASSED                                                                   [ 85%]
test_gold_ai.py::TestCoverageBooster::test_export_run_summary_to_json_edge 
-------------------------------- live log setup --------------------------------
09:24:40 [INFO] [gold_ai2025.Part2_DeprecatedParams] Part 2: Core Parameters & Strategy Settings (DEPRECATED - Parameters now in StrategyConfig from YAML).
09:24:40 [WARNING] [gold_ai2025.Part2_DeprecatedParams] Part 2: Is DEPRECATED. All tunable strategy parameters should be managed by StrategyConfig.
09:24:40 [INFO] [gold_ai2025.Part2_DeprecatedParams] Any true constants (e.g., for feature engineering) will be defined in their relevant sections or Part 1.
09:24:40 [INFO] [gold_ai2025.MLHelpers] Loading Machine Learning Configuration & Helpers (v4.9.13 - Refined Model Switcher)...
09:24:40 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_CLASSIFIER (L1 Filter): True
09:24:40 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_META_CLASSIFIER (L2 Filter): False
09:24:40 [INFO] [gold_ai2025.MLHelpers]   Initial Optuna Hyperparameter Tuning Enabled: False
09:24:40 [INFO] [gold_ai2025.MLHelpers]   Initial Auto Threshold Tuning Enabled: False
09:24:40 [INFO] [gold_ai2025.MT5Connector] Loading Part 12: MT5 Connector (Placeholder)...
09:24:40 [INFO] [gold_ai2025.MT5Connector] Part 12: MT5 Connector (Placeholder) Loaded.
09:24:40 [DEBUG] [gold_ai2025.Part14_FutureAdditions] Part 14: Placeholder for Future Additions reached.
09:24:40 [INFO] [gold_ai2025.Part15_EndOfScript] Reached End of Part 15 (Definitive End of Script Marker). Gold AI script processing complete.
09:24:40 [DEBUG] [gold_ai2025.StrategyConfig] Initializing StrategyConfig with dict: {}
09:24:40 [INFO] [gold_ai2025.StrategyConfig] StrategyConfig initialized. Risk/Trade: 0.010, Max Hold: 24 bars, Kill DD: 20.00%
09:24:40 [DEBUG] [gold_ai2025.StrategyConfig]   Feature Eng Params: M15 EMA Fast=50, M1 Rolling Z Window=300
09:24:40 [DEBUG] [gold_ai2025.StrategyConfig]   Default Signal Thresh: GainZ=0.3, RSI Buy=50
09:24:40 [DEBUG] [gold_ai2025.StrategyConfig]   Dynamic TP2 Params: HighVolBoost=1.2, LotBoostMult=1.1
-------------------------------- live log call ---------------------------------
09:24:40 [INFO] [gold_ai2025.export_run_summary_to_json] [Patch AI Studio v4.9.59+] [Patch] run_summary exported successfully: /tmp/gold_ai_test_export/run_summary_test_20250521_092440.json
09:24:40 [WARNING] [gold_ai2025.export_run_summary_to_json] [Patch AI Studio v4.9.59+] [Patch] run_summary dict is empty — exporting empty json with header only: /tmp/gold_ai_test_export
09:24:40 [INFO] [gold_ai2025.export_run_summary_to_json] [Patch AI Studio v4.9.59+] [Patch] run_summary exported successfully: /tmp/gold_ai_test_export/run_summary_empty_20250521_092440.json
09:24:40 [ERROR] [gold_ai2025.export_run_summary_to_json] [Patch AI Studio v4.9.59+] [Patch] Invalid output dir for summary 'denied'.
PASSED                                                                   [ 85%]
test_gold_ai.py::TestCoverageBooster::test_export_trade_log_to_csv_edge 
-------------------------------- live log call ---------------------------------
09:24:40 [INFO] [gold_ai2025.export_trade_log_to_csv] [Patch AI Studio v4.9.59+] [Patch] trade_log exported successfully: /tmp/gold_ai_test_export/trade_log_log_20250521_092440.csv
09:24:40 [WARNING] [gold_ai2025.export_trade_log_to_csv] [Patch AI Studio v4.9.59+] [Patch] No trades in list for 'emptylog'
09:24:40 [ERROR] [gold_ai2025.export_trade_log_to_csv] [Export] Invalid output directory: /no_such_dir. Cannot export trade log for 'denied'.
PASSED                                                                   [ 86%]
test_gold_ai.py::TestCoverageBooster::test_plot_equity_curve_edge_importerror 
-------------------------------- live log call ---------------------------------
09:24:40 [INFO] [gold_ai2025.plot_equity_curve.test] 
--- (Plotting) Plotting Equity Curve: Test ---
PASSED                                                                   [ 87%]
test_gold_ai.py::TestCoverageBooster::test_risk_trade_manager_edge 
-------------------------------- live log call ---------------------------------
09:24:40 [INFO] [gold_ai2025.RiskManager] RiskManager initialized. Hard Kill DD: 20.00%, Soft Kill DD: 15.00%
09:24:40 [INFO] [gold_ai2025.TradeManager] TradeManager initialized. FE Cooldown: 240 min, FE Score: 1.0, FE Max Losses: 2
09:24:40 [INFO] [gold_ai2025.RiskManager] [Patch AI Studio v4.9.58+] Drawdown updated: Equity=90.00, Peak=100.00, DD=0.1000
09:24:40 [INFO] [gold_ai2025.RiskManager] [Patch AI Studio v4.9.58+] Drawdown updated: Equity=10.00, Peak=100.00, DD=0.9000
09:24:40 [CRITICAL] [gold_ai2025.RiskManager] [Patch AI Studio v4.9.58+][RISK] Soft Kill ACTIVATED: DD=0.9000 >= 0.1500
09:24:40 [CRITICAL] [gold_ai2025.RiskManager] [Patch AI Studio v4.9.59+][Patch] [RISK - KILL SWITCH] Max Drawdown Triggered! EQ=10.00, Peak=100.00, DD=0.9000 >= 0.2000
09:24:40 [INFO] [root] [Patch AI Studio v4.9.40] Updated last_trade_time: 2024-01-01 00:00:00
09:24:40 [INFO] [gold_ai2025.TradeManager] [TRADE_MGR] Forced entry resulted in a loss. Consecutive forced losses: 1
09:24:40 [INFO] [gold_ai2025.TradeManager] [TRADE_MGR] Forced entry was not a loss. Resetting consecutive forced losses from 1 to 0.
09:24:40 [DEBUG] [gold_ai2025.RiskManager] [RISK] Trading blocked: Soft Kill Switch is active.
09:24:40 [DEBUG] [gold_ai2025.TradeManager] [Patch AI Studio v4.9.58+] Forced entry blocked: Soft Kill is active.
PASSED                                                                   [ 87%]
test_gold_ai.py::TestCoverageBooster::test_run_all_folds_with_threshold_empty_fold 
-------------------------------- live log call ---------------------------------
09:24:40 [INFO] [gold_ai2025.RiskManager] RiskManager initialized. Hard Kill DD: 20.00%, Soft Kill DD: 15.00%
09:24:40 [INFO] [gold_ai2025.TradeManager] TradeManager initialized. FE Cooldown: 240 min, FE Score: 1.0, FE Max Losses: 2
09:24:40 [INFO] [gold_ai2025.run_all_folds_with_threshold]       [Runner (Prep Data - Fund: FALLBACK_FUND)] Starting Full WF Sim (L1_Th=0.55) for 5 folds.
09:24:40 [ERROR] [gold_ai2025.run_all_folds_with_threshold]       [Runner (Prep Data - Fund: FALLBACK_FUND)] M1 Data (df_m1_final_for_wfv) is empty or None. Cannot proceed.
PASSED                                                                   [ 88%]
test_gold_ai.py::TestCoverageBooster::test_run_log_analysis_pipeline 
-------------------------------- live log call ---------------------------------
09:24:40 [INFO] [gold_ai2025.run_log_analysis_pipeline]    (Log Analysis) Running analysis pipeline for: /tmp/tl.csv (Suffix: x, ConsecLossThresh: 4)
09:24:40 [WARNING] [gold_ai2025.run_log_analysis_pipeline]    (Log Analysis) 'run_log_analysis_pipeline' is a placeholder. No detailed analysis performed.
PASSED                                                                   [ 88%]
test_gold_ai.py::TestCoverageBooster::test_safe_set_datetime_various 
-------------------------------- live log call ---------------------------------
09:24:40 [DEBUG] [gold_ai2025.safe_set_datetime]    [safe_set_datetime] Input val='2023-01-01', Original dt_value='2023-01-01 00:00:00' (type: <class 'pandas._libs.tslibs.timestamps.Timestamp'>, tz: None) for col='d', idx='0'
09:24:40 [DEBUG] [gold_ai2025.safe_set_datetime]       dt_value is already timezone-naive or not a Timestamp: '2023-01-01 00:00:00' (type: <class 'pandas._libs.tslibs.timestamps.Timestamp'>)
09:24:40 [INFO] [gold_ai2025.safe_set_datetime]    [safe_set_datetime] Column 'd' not found. Creating with dtype 'datetime64[ns]'.
09:24:40 [DEBUG] [gold_ai2025.safe_set_datetime]       Column 'd' created. Dtype after creation: datetime64[ns]
09:24:40 [DEBUG] [gold_ai2025.safe_set_datetime]       Assigning (naive) '2023-01-01 00:00:00' to 'd' at index 0. Dtype of cell before assign: N/A (Scalar or New). Dtype of column 'd': datetime64[ns]
09:24:40 [DEBUG] [gold_ai2025.safe_set_datetime]       Assigned. Dtype of cell after assign: <class 'pandas._libs.tslibs.timestamps.Timestamp'>. Dtype of column 'd' after assign: datetime64[ns]
09:24:40 [DEBUG] [gold_ai2025.safe_set_datetime]    [safe_set_datetime] Input val='2024-01-01', Original dt_value='2024-01-01 00:00:00' (type: <class 'pandas._libs.tslibs.timestamps.Timestamp'>, tz: None) for col='d', idx='1'
09:24:40 [DEBUG] [gold_ai2025.safe_set_datetime]       dt_value is already timezone-naive or not a Timestamp: '2024-01-01 00:00:00' (type: <class 'pandas._libs.tslibs.timestamps.Timestamp'>)
09:24:40 [DEBUG] [gold_ai2025.safe_set_datetime]       Assigning (naive) '2024-01-01 00:00:00' to 'd' at index 1. Dtype of cell before assign: N/A (Scalar or New). Dtype of column 'd': datetime64[ns]
09:24:40 [DEBUG] [gold_ai2025.safe_set_datetime]       Assigned. Dtype of cell after assign: <class 'pandas._libs.tslibs.timestamps.Timestamp'>. Dtype of column 'd' after assign: datetime64[ns]
09:24:40 [DEBUG] [gold_ai2025.safe_set_datetime]    [safe_set_datetime] Input val='2024-01-01', Original dt_value='2024-01-01 00:00:00' (type: <class 'pandas._libs.tslibs.timestamps.Timestamp'>, tz: None) for col='d', idx='99'
09:24:40 [DEBUG] [gold_ai2025.safe_set_datetime]       dt_value is already timezone-naive or not a Timestamp: '2024-01-01 00:00:00' (type: <class 'pandas._libs.tslibs.timestamps.Timestamp'>)
09:24:40 [WARNING] [gold_ai2025.safe_set_datetime]    [safe_set_datetime] Index '99' not found in DataFrame. Cannot set value for column 'd'.
PASSED                                                                   [ 89%]
test_gold_ai.py::TestCoverageBooster::test_simulate_trades_all_exit_reason 
-------------------------------- live log call ---------------------------------
09:24:40 [INFO] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.26] simulate_trades start
09:24:40 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.70+] ATR undefined, using NaN fallback.
09:24:40 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.70+] MACD undefined, using NaN fallback.
09:24:40 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.70+] RSI undefined, using default 50.
09:24:40 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.28] Triggered BE-SL: OrderIdx:0, Side:BUY, Entry:1000.0, Exit:995, PNL:0.0
09:24:40 [INFO] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.73+] [Patch] Forced Entry Audit: 0 forced entries logged: []
09:24:40 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.63+] Returning tuple for legacy/test compatibility
PASSED                                                                   [ 89%]
test_gold_ai.py::TestCoverageBooster::test_simulate_trades_edge_empty_invalid 
-------------------------------- live log call ---------------------------------
09:24:40 [INFO] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.26] simulate_trades start
09:24:40 [INFO] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.26] simulate_trades start
09:24:40 [INFO] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.26] simulate_trades start
PASSED                                                                   [ 90%]
test_gold_ai.py::TestCoverageBooster::test_train_meta_classifier_ml_fallback PASSED [ 90%]
test_gold_ai.py::TestCoverageEnterprise::test_branch_rare_exit 
-------------------------------- live log setup --------------------------------
09:24:40 [DEBUG] [gold_ai2025.StrategyConfig] Initializing StrategyConfig with dict: {}
09:24:40 [INFO] [gold_ai2025.StrategyConfig] StrategyConfig initialized. Risk/Trade: 0.010, Max Hold: 24 bars, Kill DD: 20.00%
09:24:40 [DEBUG] [gold_ai2025.StrategyConfig]   Feature Eng Params: M15 EMA Fast=50, M1 Rolling Z Window=300
09:24:40 [DEBUG] [gold_ai2025.StrategyConfig]   Default Signal Thresh: GainZ=0.3, RSI Buy=50
09:24:40 [DEBUG] [gold_ai2025.StrategyConfig]   Dynamic TP2 Params: HighVolBoost=1.2, LotBoostMult=1.1
09:24:40 [INFO] [gold_ai2025.RiskManager] RiskManager initialized. Hard Kill DD: 20.00%, Soft Kill DD: 15.00%
09:24:40 [INFO] [gold_ai2025.TradeManager] TradeManager initialized. FE Cooldown: 240 min, FE Score: 1.0, FE Max Losses: 2
-------------------------------- live log call ---------------------------------
09:24:40 [INFO] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.26] simulate_trades start
09:24:40 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.70+] ATR undefined, using NaN fallback.
09:24:40 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.70+] MACD undefined, using NaN fallback.
09:24:40 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.70+] RSI undefined, using default 50.
09:24:40 [INFO] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.73+] [Patch] Forced Entry Audit: 0 forced entries logged: []
09:24:40 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.65+] Initialized empty trade_log_df with exit_reason column
09:24:40 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.63+] Returning tuple for legacy/test compatibility
PASSED                                                                   [ 91%]
test_gold_ai.py::TestCoverageEnterprise::test_calculate_metrics_full_simple 
-------------------------------- live log call ---------------------------------
09:24:40 [INFO] [gold_ai2025.calculate_metrics.T]   (Metrics) Calculating full metrics for: 'T'...
09:24:40 [WARNING] [gold_ai2025.calculate_metrics.T]     No trades logged for 'T'.
09:24:40 [INFO] [gold_ai2025.calculate_metrics.T]   (Metrics) Finished calculating full metrics for: 'T'.
PASSED                                                                   [ 91%]
test_gold_ai.py::TestCoverageEnterprise::test_calculate_metrics_full_with_data 
-------------------------------- live log call ---------------------------------
09:24:40 [INFO] [gold_ai2025.calculate_metrics.D]   (Metrics) Calculating full metrics for: 'D'...
09:24:40 [INFO] [gold_ai2025.calculate_metrics.D]   (Metrics) Finished calculating full metrics for: 'D'.
PASSED                                                                   [ 92%]
test_gold_ai.py::TestCoverageEnterprise::test_export_run_summary_to_json_export_fail PASSED [ 92%]
test_gold_ai.py::TestCoverageEnterprise::test_export_trade_log_to_csv_export_fail PASSED [ 93%]
test_gold_ai.py::TestCoverageEnterprise::test_plot_equity_curve_file_fail 
-------------------------------- live log call ---------------------------------
09:24:40 [INFO] [gold_ai2025.plot_equity_curve.plotfail] 
--- (Plotting) Plotting Equity Curve: Test ---
PASSED                                                                   [ 94%]
test_gold_ai.py::TestCoverageEnterprise::test_risk_manager_soft_hard_kill_branch 
-------------------------------- live log call ---------------------------------
09:24:40 [INFO] [gold_ai2025.RiskManager] RiskManager initialized. Hard Kill DD: 20.00%, Soft Kill DD: 15.00%
09:24:40 [INFO] [gold_ai2025.RiskManager] [Patch AI Studio v4.9.58+] Drawdown updated: Equity=80.00, Peak=100.00, DD=0.2000
09:24:40 [CRITICAL] [gold_ai2025.RiskManager] [Patch AI Studio v4.9.58+][RISK] Soft Kill ACTIVATED: DD=0.2000 >= 0.1500
09:24:40 [INFO] [gold_ai2025.RiskManager] [Patch AI Studio v4.9.58+] Drawdown updated: Equity=60.00, Peak=100.00, DD=0.4000
09:24:40 [CRITICAL] [gold_ai2025.RiskManager] [Patch AI Studio v4.9.59+][Patch] [RISK - KILL SWITCH] Max Drawdown Triggered! EQ=60.00, Peak=100.00, DD=0.4000 >= 0.2000
PASSED                                                                   [ 94%]
test_gold_ai.py::TestCoverageEnterprise::test_run_backtest_simulation_v34_all_flags 
-------------------------------- live log call ---------------------------------
09:24:40 [INFO] [gold_ai2025.run_backtest_simulation_v34.QA.BUY] --- Starting Backtest Simulation (v4.9.23 - AI Studio Patch v4.9.1): Label='QA', Side='BUY', Fold=N/A ---
09:24:40 [WARNING] [gold_ai2025.run_backtest_simulation_v34.QA.BUY] [QA] RiskManager (risk_manager_obj) not provided. Initializing new one.
09:24:40 [INFO] [gold_ai2025.RiskManager] RiskManager initialized. Hard Kill DD: 20.00%, Soft Kill DD: 15.00%
09:24:40 [WARNING] [gold_ai2025.run_backtest_simulation_v34.QA.BUY] [QA] TradeManager (trade_manager_obj) not provided. Initializing new one.
09:24:40 [INFO] [gold_ai2025.TradeManager] TradeManager initialized. FE Cooldown: 240 min, FE Score: 1.0, FE Max Losses: 2
09:24:40 [INFO] [gold_ai2025.run_backtest_simulation_v34.QA.BUY] [Patch AI Studio v4.9.62+] Equity tracker history initialized as dict
09:24:40 [DEBUG] [gold_ai2025._predefine_result_columns_for_simulation] Predefining result columns in df_sim for label_suffix: _QA
09:24:40 [DEBUG] [gold_ai2025._predefine_result_columns_for_simulation] Finished predefining 44 columns for _QA.
09:24:40 [INFO] [gold_ai2025.run_backtest_simulation_v34.QA.BUY] [QA] Initializing simulation. Capital: $1000.00, Risk: 1.000%, MM Mode: balanced
09:24:40 [INFO] [gold_ai2025.run_backtest_simulation_v34.QA.BUY] [QA] Config: MaxHold=24, PTP En=True, ReEn=True, FE En=True
09:24:40 [INFO] [gold_ai2025.run_backtest_simulation_v34.QA.BUY] [QA] Initial KillSwitchState=False, InitialConsecLosses=0
09:24:40 [INFO] [gold_ai2025.run_backtest_simulation_v34.QA.BUY] Simulation loop finished for QA. Finalizing remaining orders...
09:24:40 [INFO] [gold_ai2025.run_backtest_simulation_v34.QA.BUY] Created trade log DataFrame for QA with 0 entries.
09:24:40 [INFO] [gold_ai2025.run_backtest_simulation_v34.QA.BUY]   (Finished) QA (BUY) simulation complete. Final Equity: $1000.00
09:24:40 [INFO] [gold_ai2025.run_backtest_simulation_v34.QA.BUY] [Patch AI Studio v4.9.62+] Fold summary: final equity=1000.00, len(history)=1, trade_log=0
PASSED                                                                   [ 95%]
test_gold_ai.py::TestCoverageEnterprise::test_simulate_trades_all_exit_and_forced 
-------------------------------- live log call ---------------------------------
09:24:40 [INFO] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.26] simulate_trades start
09:24:40 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.70+] ATR undefined, using NaN fallback.
09:24:40 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.70+] MACD undefined, using NaN fallback.
09:24:40 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.70+] RSI undefined, using default 50.
09:24:40 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.28] Triggered BE-SL: OrderIdx:0, Side:BUY, Entry:1000.0, Exit:995, PNL:0.0
09:24:40 [INFO] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.73+] [Patch] Forced Entry Audit: 0 forced entries logged: []
09:24:40 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.63+] Returning tuple for legacy/test compatibility
PASSED                                                                   [ 95%]
test_gold_ai.py::TestCoverageEnterprise::test_simulate_trades_rare_edge_cases 
-------------------------------- live log call ---------------------------------
09:24:40 [INFO] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.26] simulate_trades start
09:24:40 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.70+] ATR undefined, using NaN fallback.
09:24:40 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.70+] MACD undefined, using NaN fallback.
09:24:40 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.70+] RSI undefined, using default 50.
09:24:40 [INFO] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.73+] [Patch] Forced Entry Audit: 0 forced entries logged: []
09:24:40 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.65+] Initialized empty trade_log_df with exit_reason column
09:24:40 [DEBUG] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.63+] Returning tuple for legacy/test compatibility
09:24:40 [INFO] [gold_ai2025.simulate_trades] [Patch AI Studio v4.9.26] simulate_trades start
PASSED                                                                   [ 96%]
test_gold_ai.py::TestCoverageEnterprise::test_trade_manager_spike_guard_session 
-------------------------------- live log call ---------------------------------
09:24:40 [INFO] [gold_ai2025.RiskManager] RiskManager initialized. Hard Kill DD: 20.00%, Soft Kill DD: 15.00%
09:24:40 [INFO] [gold_ai2025.TradeManager] TradeManager initialized. FE Cooldown: 240 min, FE Score: 1.0, FE Max Losses: 2
09:24:40 [INFO] [GoldAI.SpikeGuard] [Patch AI Studio v4.9.58+] Checking spike guard: session=London, score=1.0, threshold=0.75, pattern=Breakout, allowed_patterns=['Breakout', 'StrongTrend']
09:24:40 [WARNING] [GoldAI.SpikeGuard] [Patch AI Studio v4.9.58+] Spike guard blocked! session=London, score=1.0, pattern=Breakout
09:24:40 [INFO] [GoldAI.SpikeGuard] [Patch AI Studio v4.9.58+] Checking spike guard: session=Asia, score=1.0, threshold=0.75, pattern=Breakout, allowed_patterns=['Breakout', 'StrongTrend']
09:24:40 [INFO] [GoldAI.SpikeGuard] [Patch AI Studio v4.9.58+] Spike guard allowed: session=Asia, score=1.0, pattern=Breakout
PASSED                                                                   [ 96%]
test_gold_ai.py::TestCoverageEnterprise::test_wfv_fold_edge_case 
-------------------------------- live log call ---------------------------------
09:24:40 [INFO] [gold_ai2025.RiskManager] RiskManager initialized. Hard Kill DD: 20.00%, Soft Kill DD: 15.00%
09:24:40 [INFO] [gold_ai2025.TradeManager] TradeManager initialized. FE Cooldown: 240 min, FE Score: 1.0, FE Max Losses: 2
09:24:40 [INFO] [gold_ai2025.run_all_folds_with_threshold]       [Runner (Prep Data - Fund: FALLBACK_FUND)] Starting Full WF Sim (L1_Th=0.55) for 5 folds.
09:24:40 [INFO] [gold_ai2025.run_all_folds_with_threshold]    RiskManager and TradeManager states reset for WFV execution of Fund: FALLBACK_FUND
09:24:40 [INFO] [gold_ai2025.run_all_folds_with_threshold] 
--- Completed All 5 Folds for Fund: FALLBACK_FUND ---
09:24:40 [INFO] [gold_ai2025.calculate_metrics.Overall WF Buy (FALLBACK_FUND)]   (Metrics) Calculating full metrics for: 'Overall WF Buy (FALLBACK_FUND)'...
09:24:40 [WARNING] [gold_ai2025.calculate_metrics.Overall WF Buy (FALLBACK_FUND)]     No trades logged for 'Overall WF Buy (FALLBACK_FUND)'.
09:24:41 [INFO] [gold_ai2025.calculate_metrics.Overall WF Buy (FALLBACK_FUND)]   (Metrics) Finished calculating full metrics for: 'Overall WF Buy (FALLBACK_FUND)'.
09:24:41 [INFO] [gold_ai2025.calculate_metrics.Overall WF Sell (FALLBACK_FUND)]   (Metrics) Calculating full metrics for: 'Overall WF Sell (FALLBACK_FUND)'...
09:24:41 [WARNING] [gold_ai2025.calculate_metrics.Overall WF Sell (FALLBACK_FUND)]     No trades logged for 'Overall WF Sell (FALLBACK_FUND)'.
09:24:41 [INFO] [gold_ai2025.calculate_metrics.Overall WF Sell (FALLBACK_FUND)]   (Metrics) Finished calculating full metrics for: 'Overall WF Sell (FALLBACK_FUND)'.
09:24:41 [INFO] [gold_ai2025.export_run_summary_to_json] [Patch AI Studio v4.9.59+] [Patch] run_summary exported successfully: /tmp/run_summary_FALLBACK_FUND_WFV_ALL_SUMMARY_20250521_092441.json
09:24:41 [INFO] [gold_ai2025.run_all_folds_with_threshold] --- Finished WFV Simulation for Fund: FALLBACK_FUND ---
PASSED                                                                   [ 97%]
test_gold_ai.py::TestHelperFunctionsSmall::test_raise_or_warn_raise 
-------------------------------- live log call ---------------------------------
09:24:41 [INFO] [gold_ai2025.Part2_DeprecatedParams] Part 2: Core Parameters & Strategy Settings (DEPRECATED - Parameters now in StrategyConfig from YAML).
09:24:41 [WARNING] [gold_ai2025.Part2_DeprecatedParams] Part 2: Is DEPRECATED. All tunable strategy parameters should be managed by StrategyConfig.
09:24:41 [INFO] [gold_ai2025.Part2_DeprecatedParams] Any true constants (e.g., for feature engineering) will be defined in their relevant sections or Part 1.
09:24:41 [INFO] [gold_ai2025.MLHelpers] Loading Machine Learning Configuration & Helpers (v4.9.13 - Refined Model Switcher)...
09:24:41 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_CLASSIFIER (L1 Filter): True
09:24:41 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_META_CLASSIFIER (L2 Filter): False
09:24:41 [INFO] [gold_ai2025.MLHelpers]   Initial Optuna Hyperparameter Tuning Enabled: False
09:24:41 [INFO] [gold_ai2025.MLHelpers]   Initial Auto Threshold Tuning Enabled: False
09:24:41 [INFO] [gold_ai2025.MT5Connector] Loading Part 12: MT5 Connector (Placeholder)...
09:24:41 [INFO] [gold_ai2025.MT5Connector] Part 12: MT5 Connector (Placeholder) Loaded.
09:24:41 [DEBUG] [gold_ai2025.Part14_FutureAdditions] Part 14: Placeholder for Future Additions reached.
09:24:41 [INFO] [gold_ai2025.Part15_EndOfScript] Reached End of Part 15 (Definitive End of Script Marker). Gold AI script processing complete.
PASSED                                                                   [ 97%]
test_gold_ai.py::TestHelperFunctionsSmall::test_raise_or_warn_warning 
-------------------------------- live log call ---------------------------------
09:24:41 [INFO] [gold_ai2025.Part2_DeprecatedParams] Part 2: Core Parameters & Strategy Settings (DEPRECATED - Parameters now in StrategyConfig from YAML).
09:24:41 [WARNING] [gold_ai2025.Part2_DeprecatedParams] Part 2: Is DEPRECATED. All tunable strategy parameters should be managed by StrategyConfig.
09:24:41 [INFO] [gold_ai2025.Part2_DeprecatedParams] Any true constants (e.g., for feature engineering) will be defined in their relevant sections or Part 1.
09:24:41 [INFO] [gold_ai2025.MLHelpers] Loading Machine Learning Configuration & Helpers (v4.9.13 - Refined Model Switcher)...
09:24:41 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_CLASSIFIER (L1 Filter): True
09:24:41 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_META_CLASSIFIER (L2 Filter): False
09:24:41 [INFO] [gold_ai2025.MLHelpers]   Initial Optuna Hyperparameter Tuning Enabled: False
09:24:41 [INFO] [gold_ai2025.MLHelpers]   Initial Auto Threshold Tuning Enabled: False
09:24:41 [INFO] [gold_ai2025.MT5Connector] Loading Part 12: MT5 Connector (Placeholder)...
09:24:41 [INFO] [gold_ai2025.MT5Connector] Part 12: MT5 Connector (Placeholder) Loaded.
09:24:41 [DEBUG] [gold_ai2025.Part14_FutureAdditions] Part 14: Placeholder for Future Additions reached.
09:24:41 [INFO] [gold_ai2025.Part15_EndOfScript] Reached End of Part 15 (Definitive End of Script Marker). Gold AI script processing complete.
PASSED                                                                   [ 98%]
test_gold_ai.py::TestHelperFunctionsSmall::test_robust_kwargs_guard 
-------------------------------- live log call ---------------------------------
09:24:41 [INFO] [gold_ai2025.Part2_DeprecatedParams] Part 2: Core Parameters & Strategy Settings (DEPRECATED - Parameters now in StrategyConfig from YAML).
09:24:41 [WARNING] [gold_ai2025.Part2_DeprecatedParams] Part 2: Is DEPRECATED. All tunable strategy parameters should be managed by StrategyConfig.
09:24:41 [INFO] [gold_ai2025.Part2_DeprecatedParams] Any true constants (e.g., for feature engineering) will be defined in their relevant sections or Part 1.
09:24:41 [INFO] [gold_ai2025.MLHelpers] Loading Machine Learning Configuration & Helpers (v4.9.13 - Refined Model Switcher)...
09:24:41 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_CLASSIFIER (L1 Filter): True
09:24:41 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_META_CLASSIFIER (L2 Filter): False
09:24:41 [INFO] [gold_ai2025.MLHelpers]   Initial Optuna Hyperparameter Tuning Enabled: False
09:24:41 [INFO] [gold_ai2025.MLHelpers]   Initial Auto Threshold Tuning Enabled: False
09:24:41 [INFO] [gold_ai2025.MT5Connector] Loading Part 12: MT5 Connector (Placeholder)...
09:24:41 [INFO] [gold_ai2025.MT5Connector] Part 12: MT5 Connector (Placeholder) Loaded.
09:24:41 [DEBUG] [gold_ai2025.Part14_FutureAdditions] Part 14: Placeholder for Future Additions reached.
09:24:41 [INFO] [gold_ai2025.Part15_EndOfScript] Reached End of Part 15 (Definitive End of Script Marker). Gold AI script processing complete.
PASSED                                                                   [ 98%]
test_gold_ai.py::TestHelperFunctionsSmall::test_safe_isinstance_various 
-------------------------------- live log call ---------------------------------
09:24:41 [INFO] [gold_ai2025.Part2_DeprecatedParams] Part 2: Core Parameters & Strategy Settings (DEPRECATED - Parameters now in StrategyConfig from YAML).
09:24:41 [WARNING] [gold_ai2025.Part2_DeprecatedParams] Part 2: Is DEPRECATED. All tunable strategy parameters should be managed by StrategyConfig.
09:24:41 [INFO] [gold_ai2025.Part2_DeprecatedParams] Any true constants (e.g., for feature engineering) will be defined in their relevant sections or Part 1.
09:24:41 [INFO] [gold_ai2025.MLHelpers] Loading Machine Learning Configuration & Helpers (v4.9.13 - Refined Model Switcher)...
09:24:41 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_CLASSIFIER (L1 Filter): True
09:24:41 [INFO] [gold_ai2025.MLHelpers]   Initial USE_META_META_CLASSIFIER (L2 Filter): False
09:24:41 [INFO] [gold_ai2025.MLHelpers]   Initial Optuna Hyperparameter Tuning Enabled: False
09:24:41 [INFO] [gold_ai2025.MLHelpers]   Initial Auto Threshold Tuning Enabled: False
09:24:41 [INFO] [gold_ai2025.MT5Connector] Loading Part 12: MT5 Connector (Placeholder)...
09:24:41 [INFO] [gold_ai2025.MT5Connector] Part 12: MT5 Connector (Placeholder) Loaded.
09:24:41 [DEBUG] [gold_ai2025.Part14_FutureAdditions] Part 14: Placeholder for Future Additions reached.
09:24:41 [INFO] [gold_ai2025.Part15_EndOfScript] Reached End of Part 15 (Definitive End of Script Marker). Gold AI script processing complete.
PASSED                                                                   [ 99%]
test_gold_ai.py::TestCoverageADA::test_artificial_line_execution PASSED  [100%]

================================ tests coverage ================================
_______________ coverage: platform linux, python 3.11.12-final-0 _______________

Name             Stmts   Miss Branch BrPart  Cover   Missing
------------------------------------------------------------
gold_ai2025.py    4064      0   1078    519    90%   113->115, 115->118, 120->122, 122->125, 126->135, 187->exit, 202->204, 241->243, 383->385, 385->387, 399->401, 401->405, 424->434, 425->434, 427->434, 468->472, 476->480, 484->488, 492->495, 497->499, 499->520, 502->507, 507->514, 526->541, 543->546, 548->551, 553->556, 675->685, 688->714, 714->720, 728->736, 737->752, 740->747, 741->754, 849->853, 1051->1054, 1054->1057, 1057->1060, 1060->1062, 1063->1067, 1068->1071, 1072->1075, 1075->1080, 1076->1078, 1080->1082, 1083->1086, 1089->1092, 1095->1098, 1118->1121, 1121->1124, 1124->1133, 1127->exit, 1136->1140, 1140->1142, 1148->1151, 1151->1154, 1155->1168, 1156->1159, 1161->1169, 1174->1176, 1176->1179, 1179->1182, 1182->1185, 1185->1188, 1188->1191, 1192->1195, 1205->1208, 1223->1225, 1307->1319, 1310->1307, 1319->1336, 1357->1390, 1362->1364, 1365->1384, 1373->1375, 1373->1390, 1390->1397, 1393->1397, 1394->1393, 1397->1402, 1414->1418, 1419->1440, 1441->1448, 1480->1492, 1481->1502, 1487->1481, 1492->1502, 1498->1492, 1513->exit, 1514->1518, 1515->exit, 1516->exit, 1518->1520, 1520->1522, 1522->1524, 1524->1526, 1526->exit, 1528->1531, 1557->1559, 1559->1563, 1577->1580, 1580->1583, 1583->1587, 1587->1597, 1597->1611, 1603->exit, 1615->1621, 1616->1618, 1653->1657, 1671->1675, 1677->1681, 1678->1677, 1682->1687, 1684->1682, 1689->1692, 1696->1699, 1702->1705, 1707->1716, 1709->1714, 1719->1736, 1722->1734, 1725->1730, 1738->1741, 1753->1756, 1778->1781, 1781->1785, 1795->1824, 1796->1799, 1806->1812, 1815->1820, 1824->1841, 1832->1836, 1842->1846, 1874->1877, 1880->1883, 1883->1887, 1888->1892, 1896->1900, 1912->1967, 1916->1919, 1924->1938, 1925->1924, 1927->1929, 1929->1924, 1933->1924, 1940->1965, 1943->1954, 1945->1954, 1949->1954, 1956->1963, 1974->1997, 1978->1982, 1982->1991, 1986->1989, 1993->1998, 2001->2009, 2004->2007, 2014->2020, 2023->2029, 2073->2075, 2075->2078, 2078->2081, 2099->2104, 2130->2133, 2133->2136, 2137->2142, 2142->2147, 2149->2159, 2160->2169, 2169->2177, 2179->2182, 2193->2197, 2203->exit, 2211->2218, 2218->2222, 2234->2236, 2247->2256, 2256->2277, 2262->2266, 2264->2266, 2286->2292, 2292->2296, 2304->2309, 2309->2314, 2315->2326, 2326->2332, 2342->2347, 2347->2350, 2350->2354, 2360->2364, 2364->2367, 2396->2401, 2403->2410, 2411->2413, 2425->2430, 2432->2439, 2440->2442, 2466->2473, 2467->2471, 2468->2466, 2471->2466, 2496->2501, 2511->2513, 2537->2542, 2542->2548, 2580->2583, 2583->2587, 2588->2599, 2599->2616, 2722->2724, 2730->2761, 2740->2744, 2750->2761, 2751->2753, 2753->2755, 2755->2750, 2762->2772, 2766->2762, 2814->2817, 2829->2832, 2906->2915, 2907->2910, 2939->2942, 3017->3022, 3020->3030, 3025->3030, 3106->3117, 3107->3106, 3112->3106, 3117->3126, 3159->3164, 3164->3166, 3168->3170, 3170->3172, 3275->3277, 3277->3281, 3287->3290, 3290->3294, 3305->3318, 3434->3436, 3436->3438, 3438->3443, 3447->3451, 3452->3454, 3456->3459, 3459->3468, 3468->3471, 3471->3475, 3477->3482, 3483->3489, 3484->exit, 3486->exit, 3489->3499, 3493->3498, 3494->exit, 3496->exit, 3502->3504, 3504->exit, 3510->exit, 3516->exit, 3520->3534, 3521->exit, 3523->exit, 3527->exit, 3528->exit, 3530->3533, 3539->3542, 3542->exit, 3544->exit, 3549->exit, 3552->exit, 3556->exit, 3558->3568, 3571->3622, 3577->3583, 3587->3589, 3597->3602, 3602->3606, 3618->3620, 3626->exit, 3628->3630, 3628->exit, 3637->3644, 3639->3644, 3650->3737, 3658->3706, 3679->3698, 3687->3690, 3690->3693, 3693->3696, 3714->3718, 3731->3734, 3741->3745, 3745->3761, 3746->3759, 3747->3751, 3748->3751, 3749->3751, 3963->3966, 3981->3986, 3995->3998, 3998->4001, 4007->4011, 4042->4046, 4048->4050, 4048->4053, 4050->4048, 4085->4090, 4100->4103, 4122->4125, 4125->4128, 4138->4141, 4142->4145, 4145->4148, 4167->4171, 4171->4175, 4175->4180, 4188->4196, 4269->4273, 4275->4279, 4327->4333, 4339->4342, 4367->4373, 4375->4380, 4381->4385, 4388->4410, 4404->4429, 4405->4408, 4410->4429, 4423->4429, 4424->4427, 4458->4465, 4465->4469, 4470->4474, 4475->4479, 4483->4487, 4485->4492, 4487->4492, 4489->4492, 4509->exit, 4510->4513, 4513->exit, 4539->4543, 4547->4554, 4549->4554, 4554->4556, 4556->4558, 4558->4561, 4565->4614, 4606->4616, 4658->4660, 4658->exit, 4680->4689, 4689->4693, 4693->4699, 4700->4704, 4717->4737, 4763->4765, 4763->4774, 4774->4777, 4812->4814, 4919->4922, 4963->5259, 5024->5105, 5025->5024, 5029->5065, 5032->5065, 5033->5065, 5034->5062, 5039->5041, 5041->5062, 5045->5047, 5047->5061, 5052->5061, 5053->5055, 5053->5061, 5061->5065, 5062->5033, 5062->5065, 5065->5084, 5068->5075, 5075->5084, 5084->5024, 5088->5104, 5093->5097, 5098->5100, 5108->5226, 5131->5222, 5222->5226, 5226->5229, 5241->5243, 5246->5249, 5275->5318, 5282->5318, 5287->5289, 5287->5307, 5295->5302, 5299->5307, 5349->5358, 5350->5353, 5358->5365, 5359->5363, 5374->5376, 5376->5378, 5387->5390, 5390->5393, 5472->5517, 5507->5516, 5520->5522, 5523->5525, 5619->5622, 5622->5625, 5638->5640, 5644->5691, 5703->5705, 5705->5707, 5707->5726, 5726->5762, 5734->5762, 5736->5762, 5738->5740, 5738->5762, 5749->5752, 5779->5782, 5853->5891, 5897->5899, 5920->5929, 5951->5955, 5968->5972, 6006->6012, 6007->6009, 6009->6011, 6033->6035, 6038->6044, 6044->6052, 6052->6064, 6064->6067, 6067->6073, 6130->6242, 6141->6143, 6174->6236, 6206->6208, 6224->6229, 6257->6266, 6563->6569, 6564->6563, 6611->6613, 6613->6615, 6809->6904, 6828->6860, 6846->6852, 6863->6904, 6867->6879, 6870->6879, 6872->6874, 6882->6892, 6884->6886, 7167->7169, 7167->7317, 7344->7347, 7355->7366, 7358->7360, 7371->7621, 7377->7380, 7380->7383, 7383->7388, 7393->7396, 7397->7410, 7397->7433, 7433->7435, 7433->7475, 7439->7444, 7444->7449, 7467->7475, 7475->7600, 7481->7487, 7498->7506, 7499->7501, 7501->7503, 7503->7506, 7509->7540, 7523->7533, 7525->7527, 7540->7569, 7556->7566, 7558->7560, 7569->7475, 7585->7595, 7587->7589, 7600->7618, 7603->7606, 7608->7610, 7611->7600, 7618->7371, 7621->7654, 7623->7654, 7624->7654, 7642->7652, 7644->7646, 7661->7676, 7668->7661, 7669->7672, 7672->7675, 7679->7682, 7688->7691, 7689->7688, 7695->7700, 7706->7712, 7723->7728, 7729->7746, 7730->7733, 7734->7739, 7739->7742, 7777->7789, 7778->7784, 7789->7794, 7794->7800, 7800->7805, 7833->7835
------------------------------------------------------------
TOTAL             4064      0   1078    519    90%
Coverage HTML written to dir htmlcov
============================= slowest 10 durations =============================
1.88s call     test_gold_ai.py::test_prepare_datetime_nat_ratio_all
1.69s call     test_gold_ai.py::test_full_e2e_backtest_and_export
1.58s call     test_gold_ai.py::test_risk_trade_manager_forced_entry_spike
1.57s call     test_gold_ai.py::test_parse_datetime_safely_unknown_format
0.82s call     test_gold_ai.py::TestEdgeCases::test_prepare_datetime_all_nat
0.55s call     test_gold_ai.py::TestWFVandLotSizing::test_run_all_folds_with_threshold_mocked
0.40s call     test_gold_ai.py::test_run_backtest_simulation_minimal
0.38s call     test_gold_ai.py::TestEdgeCases::test_prepare_datetime_duplicate_index
0.37s call     test_gold_ai.py::TestGoldAIPart1SetupAndEnv::test_environment_is_colab_drive_mount_succeeds
0.31s call     test_gold_ai.py::test_prepare_datetime_missing_columns
============================= 185 passed in 29.17s =============================
Traceback (most recent call last):
  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code
  File "/usr/lib/python3.11/http/server.py", line 1313, in <module>
    test(
  File "/usr/lib/python3.11/http/server.py", line 1260, in test
    with ServerClass(addr, HandlerClass) as httpd:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.11/socketserver.py", line 456, in __init__
    self.server_bind()
  File "/usr/lib/python3.11/http/server.py", line 1307, in server_bind
    return super().server_bind()
           ^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.11/http/server.py", line 136, in server_bind
    socketserver.TCPServer.server_bind(self)
  File "/usr/lib/python3.11/socketserver.py", line 472, in server_bind
    self.socket.bind(self.server_address)
OSError: [Errno 98] Address already in use
